/**
 * @license
 * @date      Fri Nov 04 2022 15:07:06 GMT+0100 (Central European Standard Time)
 * @time      1667570830835
 * @brand     globalforms
 * @version   2.40.0-00000

 */function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],a=!0,s=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],a=!0,s=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],a=!0,s=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(a=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,n=e}finally{try{a||null==o.return||o.return()}finally{if(s)throw n}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,a)}return i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(i,!0).forEach(function(e){_defineProperty(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}!function(w,e,s){"use strict";Foundation.libs.abide={name:"abide",version:"5.5.3",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/([-;:&=\+\$,\w]+@{1})?([-A-Za-z0-9\.]+)+:?(\d+)?((\/[-\+~%\/\.\w]+)?\??([-\+=&;%@\.\w]+)?#?([\w]+)?)?/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(e,t,i){return s.getElementById(e.getAttribute(this.add_namespace("data-equalto"))).value===e.value}}},timer:null,init:function(e,t,i){this.bindings(t,i)},events:function(e){var i=this,a=i.S(e).attr("novalidate","novalidate"),s=a.data(this.attr_name(!0)+"-init")||{};function n(e,t){clearTimeout(i.timer),i.timer=setTimeout(function(){i.validate([e],t)}.bind(e),s.timeout)}this.invalid_attr=this.add_namespace("data-invalid"),a.off(".abide").on("submit.fndtn.abide",function(e){var t=/ajax/i.test(i.S(this).attr(i.attr_name()));return i.validate(i.S(this).find("input, textarea, select").not(":hidden, [data-abide-ignore]").get(),e,t)}).on("validate.fndtn.abide",function(e){"manual"===s.validate_on&&i.validate([e.target],e)}).on("reset",function(e){return i.reset(w(this),e)}).find("input, textarea, select").not(":hidden, [data-abide-ignore]").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(e){var t=this.getAttribute("id"),i=a.find('[data-equalto="'+t+'"]');s.validate_on_blur&&!0===s.validate_on_blur&&n(this,e),void 0!==i.get(0)&&i.val().length&&n(i.get(0),e),"change"===s.validate_on&&n(this,e)}).on("keydown.fndtn.abide",function(e){var t=this.getAttribute("id"),i=a.find('[data-equalto="'+t+'"]');s.live_validate&&!0===s.live_validate&&9!=e.which&&n(this,e),void 0!==i.get(0)&&i.val().length&&n(i.get(0),e),"tab"===s.validate_on&&9===e.which?n(this,e):"change"===s.validate_on&&n(this,e)}).on("focus",function(e){navigator.userAgent.match(/iPad|iPhone|Android|BlackBerry|Windows Phone|webOS/i)&&w("html, body").animate({scrollTop:w(e.target).offset().top},100)})},reset:function(e,t){var i=this;e.removeAttr(i.invalid_attr),w("["+i.invalid_attr+"]",e).removeAttr(i.invalid_attr),w("."+i.settings.error_class,e).not("small").removeClass(i.settings.error_class),w(":input",e).not(":button, :submit, :reset, :hidden, [data-abide-ignore]").val("").removeAttr(i.invalid_attr)},validate:function(e,t,i){for(var a=this.parse_patterns(e),s=a.length,n=this.S(e[0]).closest("form"),r=/submit/.test(t.type),o=0;o<s;o++)if(!a[o]&&(r||i))return this.settings.focus_on_invalid&&e[o].focus(),n.trigger("invalid.fndtn.abide"),this.S(e[o]).closest("form").attr(this.invalid_attr,""),!1;return(r||i)&&n.trigger("valid.fndtn.abide"),n.removeAttr(this.invalid_attr),!i},parse_patterns:function(e){for(var t=e.length,i=[];t--;)i.push(this.pattern(e[t]));return this.check_validation_and_apply_styles(i)},pattern:function(e){var t=e.getAttribute("type"),i="string"==typeof e.getAttribute("required"),a=e.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(a)&&0<a.length?[e,this.settings.patterns[a],i]:0<a.length?[e,new RegExp(a),i]:this.settings.patterns.hasOwnProperty(t)?[e,this.settings.patterns[t],i]:[e,a=/.*/,i]},check_validation_and_apply_styles:function(e){var t=e.length,i=[];if(0==t)return i;for(this.S(e[0][0]).closest("[data-"+this.attr_name(!0)+"]").data(this.attr_name(!0)+"-init");t--;){var a,s,n=e[t][0],r=e[t][2],o=n.value.trim(),l=this.S(n).parent(),c=n.getAttribute(this.add_namespace("data-abide-validator")),d="radio"===n.type,h="checkbox"===n.type,g=this.S('label[for="'+n.getAttribute("id")+'"]'),u=!r||0<n.value.length,f=[];if(n.getAttribute(this.add_namespace("data-equalto"))&&(c="equalTo"),a=l.is("label")?l.parent():l,d&&r)f.push(this.valid_radio(n,r));else if(h&&r)f.push(this.valid_checkbox(n,r));else if(c){for(var p=c.split(" "),m=!0,b=!0,y=0;y<p.length;y++)s=this.settings.validators[p[y]].apply(this,[n,r,a]),f.push(s),b=s&&m,m=s;b?(this.S(n).removeAttr(this.invalid_attr),a.removeClass("error"),0<g.length&&this.settings.error_labels&&g.removeClass(this.settings.error_class).removeAttr("role"),w(n).triggerHandler("valid")):(this.S(n).attr(this.invalid_attr,""),a.addClass("error"),0<g.length&&this.settings.error_labels&&g.addClass(this.settings.error_class).attr("role","alert"),w(n).triggerHandler("invalid"))}else if(e[t][1].test(o)&&u||!r&&n.value.length<1||w(n).attr("disabled")?f.push(!0):f.push(!1),(f=[f.every(function(e){return e})])[0])this.S(n).removeAttr(this.invalid_attr),n.setAttribute("aria-invalid","false"),n.removeAttribute("aria-describedby"),a.removeClass(this.settings.error_class),0<g.length&&this.settings.error_labels&&g.removeClass(this.settings.error_class).removeAttr("role"),w(n).triggerHandler("valid");else{this.S(n).attr(this.invalid_attr,""),n.setAttribute("aria-invalid","true");var v=a.find("small."+this.settings.error_class,"span."+this.settings.error_class),S=0<v.length?v[0].id:"";0<S.length&&n.setAttribute("aria-describedby",S),a.addClass(this.settings.error_class),0<g.length&&this.settings.error_labels&&g.addClass(this.settings.error_class).attr("role","alert"),w(n).triggerHandler("invalid")}i=i.concat(f)}return i},valid_checkbox:function(e,t){var i=(e=this.S(e)).is(":checked")||!t||e.get(0).getAttribute("disabled");return i?(e.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),w(e).triggerHandler("valid")):(e.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),w(e).triggerHandler("invalid")),i},valid_radio:function(e,t){for(var i=e.getAttribute("name"),a=this.S(e).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+i+"']"),s=a.length,n=!1,r=!1,o=0;o<s;o++)a[o].getAttribute("disabled")?n=r=!0:a[o].checked?n=!0:r&&(n=!1);for(o=0;o<s;o++)n?(this.S(a[o]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class),w(a[o]).triggerHandler("valid")):(this.S(a[o]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),w(a[o]).triggerHandler("invalid"));return n},valid_equal:function(e,t,i){var a=s.getElementById(e.getAttribute(this.add_namespace("data-equalto"))).value===e.value;return a?(this.S(e).removeAttr(this.invalid_attr),i.removeClass(this.settings.error_class),0<label.length&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(e).attr(this.invalid_attr,""),i.addClass(this.settings.error_class),0<label.length&&settings.error_labels&&label.addClass(this.settings.error_class)),a},valid_oneof:function(e,t,i,a){e=this.S(e);var s=this.S("["+this.add_namespace("data-oneof")+"]"),n=0<s.filter(":checked").length;if(n?e.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):e.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),!a){var r=this;s.each(function(){r.valid_oneof.call(r,this,null,null,!0)})}return n},reflow:function(e,t){var i=this,a=i.S("["+this.attr_name()+"]").attr("novalidate","novalidate");i.S(a).each(function(e,t){i.events(t)})}}}(jQuery,window,window.document),function(d,r){"use strict";Foundation.libs.accordion={name:"accordion",version:"5.5.3",settings:{content_class:"content",active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(e,t,i){this.bindings(t,i)},events:function(e){var l=this,c=this.S;l.create(this.S(e)),c(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > dd > a, ["+this.attr_name()+"] > li > a",function(e){var t=c(this).closest("["+l.attr_name()+"]"),i=l.attr_name()+"="+t.attr(l.attr_name()),a=t.data(l.attr_name(!0)+"-init")||l.settings,s=c("#"+this.href.split("#")[1]),n=d("> dd, > li",t),r=n.children("."+a.content_class),o=r.filter("."+a.active_class);if(e.preventDefault(),t.attr(l.attr_name())&&(r=r.add("["+i+"] dd > ."+a.content_class+", ["+i+"] li > ."+a.content_class),n=n.add("["+i+"] dd, ["+i+"] li")),a.toggleable&&s.is(o))return s.parent("dd, li").toggleClass(a.active_class,!1),s.toggleClass(a.active_class,!1),c(this).attr("aria-expanded",function(e,t){return"true"===t?"false":"true"}),a.callback(s),s.triggerHandler("toggled",[t]),void t.triggerHandler("toggled",[s]);a.multi_expand||(r.removeClass(a.active_class),n.removeClass(a.active_class),n.children("a").attr("aria-expanded","false")),s.addClass(a.active_class).parent().addClass(a.active_class),a.callback(s),s.triggerHandler("toggled",[t]),t.triggerHandler("toggled",[s]),c(this).attr("aria-expanded","true")})},create:function(e){var t=e,i=d("> .accordion-navigation",t),a=t.data(this.attr_name(!0)+"-init")||this.settings;i.children("a").attr("aria-expanded","false"),i.has("."+a.content_class+"."+a.active_class).addClass(a.active_class).children("a").attr("aria-expanded","true"),a.multi_expand&&e.attr("aria-multiselectable","true")},toggle:function(e){var t=void 0!==(e=void 0!==e?e:{}).selector?e.selector:"",i=void 0!==e.toggle_state?e.toggle_state:"",a=(void 0!==e.$accordion?e.$accordion:this.S(this.scope).closest("["+this.attr_name()+"]")).find("> dd"+t+", > li"+t);if(a.length<1)return r.console&&console.error("Selection not found.",t),!1;var s=this.S,n=this.settings.active_class;a.each(function(){var e=s(this),t=e.hasClass(n);(t&&"close"===i||!t&&"open"===i||""===i)&&e.find("> a").trigger("click.fndtn.accordion")})},open:function(e){(e=void 0!==e?e:{}).toggle_state="open",this.toggle(e)},close:function(e){(e=void 0!==e?e:{}).toggle_state="close",this.toggle(e)},off:function(){},reflow:function(){}}}(jQuery,window,window.document),
/**
 * @license jQuery UI Datepicker 1.12.1
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 */
function(e){"function"==typeof define&&define.amd?define(["jquery","../version","../keycode"],e):e(jQuery)}(function(C){var n;function e(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},C.extend(this._defaults,this.regional[""]),this.regional.en=C.extend(!0,{},this.regional[""]),this.regional["en-US"]=C.extend(!0,{},this.regional.en),this.dpDiv=i(C("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function i(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.on("mouseout",t,function(){C(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",t,r)}function r(){C.datepicker._isDisabledDatepicker(n.inline?n.dpDiv.parent()[0]:n.input[0])||(C(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),C(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&C(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&C(this).addClass("ui-datepicker-next-hover"))}function h(e,t){for(var i in C.extend(e,t),t)null==t[i]&&(e[i]=t[i]);return e}return C.extend(C.ui,{datepicker:{version:"1.12.1"}}),C.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return h(this._defaults,e||{}),this},_attachDatepicker:function(e,t){var i,a,s;a="div"===(i=e.nodeName.toLowerCase())||"span"===i,e.id||(this.uuid+=1,e.id="dp"+this.uuid),(s=this._newInst(C(e),a)).settings=C.extend({},t||{}),"input"===i?this._connectDatepicker(e,s):a&&this._inlineDatepicker(e,s)},_newInst:function(e,t){return{id:e[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?i(C("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(e,t){var i=C(e);t.append=C([]),t.trigger=C([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(t),C.data(e,"datepicker",t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i,a,s,n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=C("<span class='"+this._appendClass+"'>"+n+"</span>"),e[r?"before":"after"](t.append)),e.off("focus",this._showDatepicker),t.trigger&&t.trigger.remove(),"focus"!==(i=this._get(t,"showOn"))&&"both"!==i||e.on("focus",this._showDatepicker),"button"!==i&&"both"!==i||(a=this._get(t,"buttonText"),s=this._get(t,"buttonImage"),t.trigger=C(this._get(t,"buttonImageOnly")?C("<img/>").addClass(this._triggerClass).attr({src:s,alt:a,title:a}):C("<button type='button'></button>").addClass(this._triggerClass).html(s?C("<img/>").attr({src:s,alt:a,title:a}):a)),e[r?"before":"after"](t.trigger),t.trigger.on("click",function(){return C.datepicker._datepickerShowing&&C.datepicker._lastInput===e[0]?C.datepicker._hideDatepicker():(C.datepicker._datepickerShowing&&C.datepicker._lastInput!==e[0]&&C.datepicker._hideDatepicker(),C.datepicker._showDatepicker(e[0])),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,a,s,n=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(s=a=i=0;s<e.length;s++)e[s].length>i&&(i=e[s].length,a=s);return a},n.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),n.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-n.getDay())),e.input.attr("size",this._formatDate(e,n).length)}},_inlineDatepicker:function(e,t){var i=C(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv),C.data(e,"datepicker",t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,a,s){var n,r,o,l,c,d=this._dialogInst;return d||(this.uuid+=1,n="dp"+this.uuid,this._dialogInput=C("<input type='text' id='"+n+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),C("body").append(this._dialogInput),(d=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},C.data(this._dialogInput[0],"datepicker",d)),h(d.settings,a||{}),t=t&&t.constructor===Date?this._formatDate(d,t):t,this._dialogInput.val(t),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(r=document.documentElement.clientWidth,o=document.documentElement.clientHeight,l=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[r/2-100+l,o/2-150+c]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),d.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),C.blockUI&&C.blockUI(this.dpDiv),C.data(this._dialogInput[0],"datepicker",d),this},_destroyDatepicker:function(e){var t,i=C(e),a=C.data(e,"datepicker");i.hasClass(this.markerClassName)&&(t=e.nodeName.toLowerCase(),C.removeData(e,"datepicker"),"input"===t?(a.append.remove(),a.trigger.remove(),i.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==t&&"span"!==t||i.removeClass(this.markerClassName).empty(),n===a&&(n=null))},_enableDatepicker:function(t){var e,i,a=C(t),s=C.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==e&&"span"!==e||((i=a.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var e,i,a=C(t),s=C.data(t,"datepicker");a.hasClass(this.markerClassName)&&("input"===(e=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==e&&"span"!==e||((i=a.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=C.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(e){try{return C.data(e,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var a,s,n,r,o=this._getInst(e);if(2===arguments.length&&"string"==typeof t)return"defaults"===t?C.extend({},C.datepicker._defaults):o?"all"===t?C.extend({},o.settings):this._get(o,t):null;a=t||{},"string"==typeof t&&((a={})[t]=i),o&&(this._curInst===o&&this._hideDatepicker(),s=this._getDateDatepicker(e,!0),n=this._getMinMaxDate(o,"min"),r=this._getMinMaxDate(o,"max"),h(o.settings,a),null!==n&&void 0!==a.dateFormat&&void 0===a.minDate&&(o.settings.minDate=this._formatDate(o,n)),null!==r&&void 0!==a.dateFormat&&void 0===a.maxDate&&(o.settings.maxDate=this._formatDate(o,r)),"disabled"in a&&(a.disabled?this._disableDatepicker(e):this._enableDatepicker(e)),this._attachments(C(e),o),this._autoSize(o),this._setDate(o,s),this._updateAlternate(o),this._updateDatepicker(o))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t,i,a,s=C.datepicker._getInst(e.target),n=!0,r=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,C.datepicker._datepickerShowing)switch(e.keyCode){case 9:C.datepicker._hideDatepicker(),n=!1;break;case 13:return(a=C("td."+C.datepicker._dayOverClass+":not(."+C.datepicker._currentClass+")",s.dpDiv))[0]&&C.datepicker._selectDay(e.target,s.selectedMonth,s.selectedYear,a[0]),(t=C.datepicker._get(s,"onSelect"))?(i=C.datepicker._formatDate(s),t.apply(s.input?s.input[0]:null,[i,s])):C.datepicker._hideDatepicker(),!1;case 27:C.datepicker._hideDatepicker();break;case 33:C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(s,"stepBigMonths"):-C.datepicker._get(s,"stepMonths"),"M");break;case 34:C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(s,"stepBigMonths"):+C.datepicker._get(s,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&C.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&C.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?-C.datepicker._get(s,"stepBigMonths"):-C.datepicker._get(s,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&C.datepicker._adjustDate(e.target,e.ctrlKey?+C.datepicker._get(s,"stepBigMonths"):+C.datepicker._get(s,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&C.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36===e.keyCode&&e.ctrlKey?C.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t,i,a=C.datepicker._getInst(e.target);if(C.datepicker._get(a,"constrainInput"))return t=C.datepicker._possibleChars(C.datepicker._get(a,"dateFormat")),i=String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),e.ctrlKey||e.metaKey||i<" "||!t||-1<t.indexOf(i)},_doKeyUp:function(e){var t=C.datepicker._getInst(e.target);if(t.input.val()!==t.lastVal)try{C.datepicker.parseDate(C.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,C.datepicker._getFormatConfig(t))&&(C.datepicker._setDateFromField(t),C.datepicker._updateAlternate(t),C.datepicker._updateDatepicker(t))}catch(e){}return!0},_showDatepicker:function(e){var t,i,a,s,n,r,o;"input"!==(e=e.target||e).nodeName.toLowerCase()&&(e=C("input",e.parentNode)[0]),C.datepicker._isDisabledDatepicker(e)||C.datepicker._lastInput===e||(t=C.datepicker._getInst(e),C.datepicker._curInst&&C.datepicker._curInst!==t&&(C.datepicker._curInst.dpDiv.stop(!0,!0),t&&C.datepicker._datepickerShowing&&C.datepicker._hideDatepicker(C.datepicker._curInst.input[0])),!1!==(a=(i=C.datepicker._get(t,"beforeShow"))?i.apply(e,[e,t]):{})&&(h(t.settings,a),t.lastVal=null,C.datepicker._lastInput=e,C.datepicker._setDateFromField(t),C.datepicker._inDialog&&(e.value=""),C.datepicker._pos||(C.datepicker._pos=C.datepicker._findPos(e),C.datepicker._pos[1]+=e.offsetHeight),s=!1,C(e).parents().each(function(){return!(s|="fixed"===C(this).css("position"))}),n={left:C.datepicker._pos[0],top:C.datepicker._pos[1]},C.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),C.datepicker._updateDatepicker(t),n=C.datepicker._checkOffset(t,n,s),t.dpDiv.css({position:C.datepicker._inDialog&&C.blockUI?"static":s?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),t.inline||(r=C.datepicker._get(t,"showAnim"),o=C.datepicker._get(t,"duration"),t.dpDiv.css("z-index",function(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}(C(e))+1),C.datepicker._datepickerShowing=!0,C.effects&&C.effects.effect[r]?t.dpDiv.show(r,C.datepicker._get(t,"showOptions"),o):t.dpDiv[r||"show"](r?o:null),C.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),C.datepicker._curInst=t)))},_updateDatepicker:function(e){this.maxRows=4,(n=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var t,i=this._getNumberOfMonths(e),a=i[1],s=e.dpDiv.find("."+this._dayOverClass+" a");0<s.length&&r.apply(s.get(0)),e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<a&&e.dpDiv.addClass("ui-datepicker-multi-"+a).css("width",17*a+"em"),e.dpDiv[(1!==i[0]||1!==i[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e===C.datepicker._curInst&&C.datepicker._datepickerShowing&&C.datepicker._shouldFocusInput(e)&&e.input.trigger("focus"),e.yearshtml&&(t=e.yearshtml,setTimeout(function(){t===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),t=e.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(e,t,i){var a=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),n=e.input?e.input.outerWidth():0,r=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:C(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:C(document).scrollTop());return t.left-=this._get(e,"isRTL")?a-n:0,t.left-=i&&t.left===e.input.offset().left?C(document).scrollLeft():0,t.top-=i&&t.top===e.input.offset().top+r?C(document).scrollTop():0,t.left-=Math.min(t.left,t.left+a>o&&a<o?Math.abs(t.left+a-o):0),t.top-=Math.min(t.top,t.top+s>l&&s<l?Math.abs(s+r):0),t},_findPos:function(e){for(var t,i=this._getInst(e),a=this._get(i,"isRTL");e&&("hidden"===e.type||1!==e.nodeType||C.expr.filters.hidden(e));)e=e[a?"previousSibling":"nextSibling"];return[(t=C(e).offset()).left,t.top]},_hideDatepicker:function(e){var t,i,a,s,n=this._curInst;!n||e&&n!==C.data(e,"datepicker")||this._datepickerShowing&&(t=this._get(n,"showAnim"),i=this._get(n,"duration"),a=function(){C.datepicker._tidyDialog(n)},C.effects&&(C.effects.effect[t]||C.effects[t])?n.dpDiv.hide(t,C.datepicker._get(n,"showOptions"),i,a):n.dpDiv["slideDown"===t?"slideUp":"fadeIn"===t?"fadeOut":"hide"](t?i:null,a),t||a(),this._datepickerShowing=!1,(s=this._get(n,"onClose"))&&s.apply(n.input?n.input[0]:null,[n.input?n.input.val():"",n]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),C.blockUI&&(C.unblockUI(),C("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(C.datepicker._curInst){var t=C(e.target),i=C.datepicker._getInst(t[0]);(t[0].id===C.datepicker._mainDivId||0!==t.parents("#"+C.datepicker._mainDivId).length||t.hasClass(C.datepicker.markerClassName)||t.closest("."+C.datepicker._triggerClass).length||!C.datepicker._datepickerShowing||C.datepicker._inDialog&&C.blockUI)&&(!t.hasClass(C.datepicker.markerClassName)||C.datepicker._curInst===i)||C.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var a=C(e),s=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(s,t+("M"===i?this._get(s,"showCurrentAtPos"):0),i),this._updateDatepicker(s))},_gotoToday:function(e){var t,i=C(e),a=this._getInst(i[0]);this._get(a,"gotoCurrent")&&a.currentDay?(a.selectedDay=a.currentDay,a.drawMonth=a.selectedMonth=a.currentMonth,a.drawYear=a.selectedYear=a.currentYear):(t=new Date,a.selectedDay=t.getDate(),a.drawMonth=a.selectedMonth=t.getMonth(),a.drawYear=a.selectedYear=t.getFullYear()),this._notifyChange(a),this._adjustDate(i)},_selectMonthYear:function(e,t,i){var a=C(e),s=this._getInst(a[0]);s["selected"+("M"===i?"Month":"Year")]=s["draw"+("M"===i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(a)},_selectDay:function(e,t,i,a){var s,n=C(e);C(a).hasClass(this._unselectableClass)||this._isDisabledDatepicker(n[0])||((s=this._getInst(n[0])).selectedDay=s.currentDay=C("a",a).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=i,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(e){var t=C(e);this._selectDate(t,"")},_selectDate:function(e,t){var i,a=C(e),s=this._getInst(a[0]);t=null!=t?t:this._formatDate(s),s.input&&s.input.val(t),this._updateAlternate(s),(i=this._get(s,"onSelect"))?i.apply(s.input?s.input[0]:null,[t,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(e){var t,i,a,s=this._get(e,"altField");s&&(t=this._get(e,"altFormat")||this._get(e,"dateFormat"),i=this._getDate(e),a=this.formatDate(t,i,this._getFormatConfig(e)),C(s).val(a))},noWeekends:function(e){var t=e.getDay();return[0<t&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,n,e){if(null==i||null==n)throw"Invalid arguments";if(""===(n="object"==typeof n?n.toString():n+""))return null;function r(e){var t=o+1<i.length&&i.charAt(o+1)===e;return t&&o++,t}function t(e){var t=r(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,a=new RegExp("^\\d{"+("y"===e?i:1)+","+i+"}"),s=n.substring(h).match(a);if(!s)throw"Missing number at position "+h;return h+=s[0].length,parseInt(s[0],10)}function a(e,t,i){var a=-1,s=C.map(r(e)?i:t,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(C.each(s,function(e,t){var i=t[1];if(n.substr(h,i.length).toLowerCase()===i.toLowerCase())return a=t[0],h+=i.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+h}function s(){if(n.charAt(h)!==i.charAt(o))throw"Unexpected literal at position "+h;h++}var o,l,c,d,h=0,g=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof g?g:(new Date).getFullYear()%100+parseInt(g,10),f=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort,p=(e?e.dayNames:null)||this._defaults.dayNames,m=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,b=(e?e.monthNames:null)||this._defaults.monthNames,y=-1,v=-1,S=-1,w=-1,x=!1;for(o=0;o<i.length;o++)if(x)"'"!==i.charAt(o)||r("'")?s():x=!1;else switch(i.charAt(o)){case"d":S=t("d");break;case"D":a("D",f,p);break;case"o":w=t("o");break;case"m":v=t("m");break;case"M":v=a("M",m,b);break;case"y":y=t("y");break;case"@":y=(d=new Date(t("@"))).getFullYear(),v=d.getMonth()+1,S=d.getDate();break;case"!":y=(d=new Date((t("!")-this._ticksTo1970)/1e4)).getFullYear(),v=d.getMonth()+1,S=d.getDate();break;case"'":r("'")?s():x=!0;break;default:s()}if(h<n.length&&(c=n.substr(h),!/^\s+/.test(c)))throw"Extra/unparsed characters found in date: "+c;if(-1===y?y=(new Date).getFullYear():y<100&&(y+=(new Date).getFullYear()-(new Date).getFullYear()%100+(y<=u?0:-100)),-1<w)for(v=1,S=w;;){if(S<=(l=this._getDaysInMonth(y,v-1)))break;v++,S-=l}if((d=this._daylightSavingAdjust(new Date(y,v-1,S))).getFullYear()!==y||d.getMonth()+1!==v||d.getDate()!==S)throw"Invalid date";return d},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(i,e,t){if(!e)return"";function s(e){var t=r+1<i.length&&i.charAt(r+1)===e;return t&&r++,t}function a(e,t,i){var a=""+t;if(s(e))for(;a.length<i;)a="0"+a;return a}function n(e,t,i,a){return s(e)?a[t]:i[t]}var r,o=(t?t.dayNamesShort:null)||this._defaults.dayNamesShort,l=(t?t.dayNames:null)||this._defaults.dayNames,c=(t?t.monthNamesShort:null)||this._defaults.monthNamesShort,d=(t?t.monthNames:null)||this._defaults.monthNames,h="",g=!1;if(e)for(r=0;r<i.length;r++)if(g)"'"!==i.charAt(r)||s("'")?h+=i.charAt(r):g=!1;else switch(i.charAt(r)){case"d":h+=a("d",e.getDate(),2);break;case"D":h+=n("D",e.getDay(),o,l);break;case"o":h+=a("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":h+=a("m",e.getMonth()+1,2);break;case"M":h+=n("M",e.getMonth(),c,d);break;case"y":h+=s("y")?e.getFullYear():(e.getFullYear()%100<10?"0":"")+e.getFullYear()%100;break;case"@":h+=e.getTime();break;case"!":h+=1e4*e.getTime()+this._ticksTo1970;break;case"'":s("'")?h+="'":g=!0;break;default:h+=i.charAt(r)}return h},_possibleChars:function(i){function e(e){var t=a+1<i.length&&i.charAt(a+1)===e;return t&&a++,t}var a,t="",s=!1;for(a=0;a<i.length;a++)if(s)"'"!==i.charAt(a)||e("'")?t+=i.charAt(a):s=!1;else switch(i.charAt(a)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":e("'")?t+="'":s=!0;break;default:t+=i.charAt(a)}return t},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),a=e.lastVal=e.input?e.input.val():null,s=this._getDefaultDate(e),n=s,r=this._getFormatConfig(e);try{n=this.parseDate(i,a,r)||s}catch(e){a=t?"":a}e.selectedDay=n.getDate(),e.drawMonth=e.selectedMonth=n.getMonth(),e.drawYear=e.selectedYear=n.getFullYear(),e.currentDay=a?n.getDate():0,e.currentMonth=a?n.getMonth():0,e.currentYear=a?n.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(o,e,t){var i,a,s=null==e||""===e?t:"string"==typeof e?function(e){try{return C.datepicker.parseDate(C.datepicker._get(o,"dateFormat"),e,C.datepicker._getFormatConfig(o))}catch(e){}for(var t=(e.toLowerCase().match(/^c/)?C.datepicker._getDate(o):null)||new Date,i=t.getFullYear(),a=t.getMonth(),s=t.getDate(),n=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=n.exec(e);r;){switch(r[2]||"d"){case"d":case"D":s+=parseInt(r[1],10);break;case"w":case"W":s+=7*parseInt(r[1],10);break;case"m":case"M":a+=parseInt(r[1],10),s=Math.min(s,C.datepicker._getDaysInMonth(i,a));break;case"y":case"Y":i+=parseInt(r[1],10),s=Math.min(s,C.datepicker._getDaysInMonth(i,a))}r=n.exec(e)}return new Date(i,a,s)}(e):"number"==typeof e?isNaN(e)?t:(i=e,(a=new Date).setDate(a.getDate()+i),a):new Date(e.getTime());return(s=s&&"Invalid Date"===s.toString()?t:s)&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(12<e.getHours()?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var a=!t,s=e.selectedMonth,n=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),s===e.selectedMonth&&n===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(a?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){C.datepicker._adjustDate(i,-t,"M")},next:function(){C.datepicker._adjustDate(i,+t,"M")},hide:function(){C.datepicker._hideDatepicker()},today:function(){C.datepicker._gotoToday(i)},selectDay:function(){return C.datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return C.datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return C.datepicker._selectMonthYear(i,this,"Y"),!1}};C(this).on(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,a,s,n,r,o,l,c,d,h,g,u,f,p,m,b,y,v,S,w,x,C,$,I,k,_,D,T,L,G,P,M,A,F,E,V,O,R,B=new Date,N=this._daylightSavingAdjust(new Date(B.getFullYear(),B.getMonth(),B.getDate())),j=this._get(e,"isRTL"),H=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),Y=this._get(e,"navigationAsDateFormat"),W=this._getNumberOfMonths(e),q=this._get(e,"showCurrentAtPos"),z=this._get(e,"stepMonths"),K=1!==W[0]||1!==W[1],Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Z=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),X=e.drawMonth-q,ee=e.drawYear;if(X<0&&(X+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-W[0]*W[1]+1,J.getDate())),t=Z&&t<Z?Z:t;this._daylightSavingAdjust(new Date(ee,X,1))>t;)--X<0&&(X=11,ee--);for(e.drawMonth=X,e.drawYear=ee,i=this._get(e,"prevText"),i=Y?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,X-z,1)),this._getFormatConfig(e)):i,a=this._canAdjustMonth(e,-1,ee,X)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>",s=this._get(e,"nextText"),s=Y?this.formatDate(s,this._daylightSavingAdjust(new Date(ee,X+z,1)),this._getFormatConfig(e)):s,n=this._canAdjustMonth(e,1,ee,X)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+s+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+s+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+s+"</span></a>",r=this._get(e,"currentText"),o=this._get(e,"gotoCurrent")&&e.currentDay?Q:N,r=Y?this.formatDate(r,o,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=H?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(e,o)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(j?"":l)+"</div>":"",d=parseInt(this._get(e,"firstDay"),10),d=isNaN(d)?0:d,h=this._get(e,"showWeek"),g=this._get(e,"dayNames"),u=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),p=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),b=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),v=this._getDefaultDate(e),S="",x=0;x<W[0];x++){for(C="",this.maxRows=4,$=0;$<W[1];$++){if(I=this._daylightSavingAdjust(new Date(ee,X,e.selectedDay)),k=" ui-corner-all",_="",K){if(_+="<div class='ui-datepicker-group",1<W[1])switch($){case 0:_+=" ui-datepicker-group-first",k=" ui-corner-"+(j?"right":"left");break;case W[1]-1:_+=" ui-datepicker-group-last",k=" ui-corner-"+(j?"left":"right");break;default:_+=" ui-datepicker-group-middle",k=""}_+="'>"}for(_+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+k+"'>"+(/all|left/.test(k)&&0===x?j?n:a:"")+(/all|right/.test(k)&&0===x?j?a:n:"")+this._generateMonthYearHeader(e,X,ee,Z,J,0<x||0<$,f,p)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=h?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)D+="<th scope='col'"+(5<=(w+d+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+g[T=(w+d)%7]+"'>"+u[T]+"</span></th>";for(_+=D+"</tr></thead><tbody>",L=this._getDaysInMonth(ee,X),ee===e.selectedYear&&X===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,L)),G=(this._getFirstDayOfMonth(ee,X)-d+7)%7,P=Math.ceil((G+L)/7),M=K&&this.maxRows>P?this.maxRows:P,this.maxRows=M,A=this._daylightSavingAdjust(new Date(ee,X,1-G)),F=0;F<M;F++){for(_+="<tr>",E=h?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(A)+"</td>":"",w=0;w<7;w++)V=m?m.apply(e.input?e.input[0]:null,[A]):[!0,""],R=(O=A.getMonth()!==X)&&!y||!V[0]||Z&&A<Z||J&&J<A,E+="<td class='"+(5<=(w+d+6)%7?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(A.getTime()===I.getTime()&&X===e.selectedMonth&&e._keyEvent||v.getTime()===A.getTime()&&v.getTime()===I.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!b?"":" "+V[1]+(A.getTime()===Q.getTime()?" "+this._currentClass:"")+(A.getTime()===N.getTime()?" ui-datepicker-today":""))+"'"+(O&&!b||!V[2]?"":" title='"+V[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+A.getMonth()+"' data-year='"+A.getFullYear()+"'")+">"+(O&&!b?"&#xa0;":R?"<span class='ui-state-default'>"+A.getDate()+"</span>":"<a class='ui-state-default"+(A.getTime()===N.getTime()?" ui-state-highlight":"")+(A.getTime()===Q.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+A.getDate()+"</a>")+"</td>",A.setDate(A.getDate()+1),A=this._daylightSavingAdjust(A);_+=E+"</tr>"}11<++X&&(X=0,ee++),C+=_+="</tbody></table>"+(K?"</div>"+(0<W[0]&&$===W[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}S+=C}return S+=c,e._keyEvent=!1,S},_generateMonthYearHeader:function(e,t,i,a,s,n,r,o){var l,c,d,h,g,u,f,p,m=this._get(e,"changeMonth"),b=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),v="<div class='ui-datepicker-title'>",S="";if(n||!m)S+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=a&&a.getFullYear()===i,c=s&&s.getFullYear()===i,S+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",d=0;d<12;d++)(!l||d>=a.getMonth())&&(!c||d<=s.getMonth())&&(S+="<option value='"+d+"'"+(d===t?" selected='selected'":"")+">"+o[d]+"</option>");S+="</select>"}if(y||(v+=S+(!n&&m&&b?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!b)v+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(h=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),f=(u=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t})(h[0]),p=Math.max(f,u(h[1]||"")),f=a?Math.max(f,a.getFullYear()):f,p=s?Math.min(p,s.getFullYear()):p,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=p;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",v+=e.yearshtml,e.yearshtml=null}return v+=this._get(e,"yearSuffix"),y&&(v+=(!n&&m&&b?"":"&#xa0;")+S),v+="</div>"},_adjustInstDate:function(e,t,i){var a=e.selectedYear+("Y"===i?t:0),s=e.selectedMonth+("M"===i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(a,s))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(a,s,n)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),s=i&&t<i?i:t;return a&&a<s?a:s},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,a){var s=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,a+(t<0?t:s[0]*s[1]),1));return t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i,a,s=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),r=null,o=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),a=(new Date).getFullYear(),r=parseInt(i[0],10),o=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=a),i[1].match(/[+\-].*/)&&(o+=a)),(!s||t.getTime()>=s.getTime())&&(!n||t.getTime()<=n.getTime())&&(!r||t.getFullYear()>=r)&&(!o||t.getFullYear()<=o)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,a){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var s=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(a,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),s,this._getFormatConfig(e))}}),C.fn.datepicker=function(e){if(!this.length)return this;C.datepicker.initialized||(C(document).on("mousedown",C.datepicker._checkExternalClick),C.datepicker.initialized=!0),0===C("#"+C.datepicker._mainDivId).length&&C("body").append(C.datepicker.dpDiv);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!==e&&"getDate"!==e&&"widget"!==e?"option"===e&&2===arguments.length&&"string"==typeof arguments[1]?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this].concat(t)):C.datepicker._attachDatepicker(this,e)}):C.datepicker["_"+e+"Datepicker"].apply(C.datepicker,[this[0]].concat(t))},C.datepicker=new e,C.datepicker.initialized=!1,C.datepicker.uuid=(new Date).getTime(),C.datepicker.version="1.12.1",C.datepicker}),function(g,u){cowp.conf.gf=cowp.conf.gf||{},g.extend(!0,cowp.conf.gf,{europe:{type:{carline:{hiddenFieldNames:["modelYear","segment"]},bodystyle:{},trim:{},engine:{hiddenFieldIndices:["configurationString"]}},co2:[{fire:"gmitGfSetCo2Image",drilldowns:["priceDetailBean.energyLabel.imageURLs.imageSize1","energyLabel.imageUrl1"],getParams:function(e){return{src:e||""}}},{fire:"gmitGfSetCo2Headline",drilldowns:["feature.emissionLabelClassLabel","energyLabel.title"],getParams:function(e){return{newText:e||"",index:0}}},{fire:"gmitGfSetCo2Headline",drilldowns:["feature.emissionLabelClassDisclaimer","energyLabel.header"],getParams:function(e){return{newText:e||"",index:2}}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["energyLabel.classLabel",""],getParams:function(e){return{newText:e||"",rowIndex:0,columnIndex:0}},getData:function(e){var t="",i="",a={rowIndex:0,columnIndex:0,newText:""};return g(e).length&&((i=(3===(t=g(e)).length?g(t[2]):g()).find(".energy_label-chart p")).find("span").remove(),a.newText=i.html()),a}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["energyLabel.classValue","priceDetailBean.energyLabel.labelClass"],getParams:function(e){return{newText:e||"",rowIndex:0,columnIndex:1}}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["feature.fuelCombinedLabel","energyLabel.consumptionLabel","priceDetailBean.energyLabelEngineAttribute[0].label"],getParams:function(e){return{newText:e||"",rowIndex:1,columnIndex:0}}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["feature.fuelCombinedValue","energyLabel.consumptionValue","priceDetailBean.energyLabelEngineAttribute[0].$"],getParams:function(e){return{newText:e||"",rowIndex:1,columnIndex:1}}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["feature.emissionCombinedLabel","energyLabel.co2EmissionLabel","priceDetailBean.energyLabelEngineAttribute[1].label"],getParams:function(e){return{newText:e||"",rowIndex:2,columnIndex:0}}},{fire:"gmitGfSetCo2TableColumn",drilldowns:["feature.emissionCombinedValue","energyLabel.co2EmissionValue","priceDetailBean.energyLabelEngineAttribute[1].$"],getParams:function(e){return{newText:e||"",rowIndex:2,columnIndex:1}}}],pricing:[{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.optionTotalPrice.label","prices[0].label"],getParams:function(e){return{newText:e||"",rowIndex:0,columnIndex:0}}},{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.optionTotalPrice.$","prices[0].value"],getParams:function(e){return{newText:e||"",rowIndex:0,columnIndex:1}}},{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.configurationTotalPrice[0].label","prices[1].label"],getParams:function(e){return{newText:e||"",rowIndex:1,columnIndex:0}}},{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.configurationTotalPrice[0].$","prices[1].value"],getParams:function(e){return{newText:e||"",rowIndex:1,columnIndex:1}}},{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.configurationTotalPrice[1].label","prices[2].label"],getParams:function(e){return{newText:e||"",rowIndex:2,columnIndex:0}}},{fire:"gmitGfSetPricingColumn",drilldowns:["priceDetailBean.configurationTotalPrice[1].$","prices[2].value"],getParams:function(e){return{newText:e||"",rowIndex:2,columnIndex:1}}}],hiddenFields:{modelYear:{fire:"gmitGfUpdateHiddenField",drilldowns:["modelYear","modelyear"],getParams:function(e){return{newValue:e||"",index:0}}},ngBackLinkUrl:{fire:"gmitGfUpdateHiddenField",drilldowns:[],getParams:function(e){return{newValue:e||"",index:1}}},configurationString:{fire:"gmitGfUpdateHiddenField",drilldowns:["[engine].value"],getParams:function(e){return{newValue:e||"",index:2}}},configurationUrl:{fire:"gmitGfUpdateHiddenField",drilldowns:["configurationURL"],getParams:function(e){return{newValue:e||"",index:3}}},transmission:{fire:"gmitGfUpdateHiddenField",drilldowns:["transmission"],getParams:function(e){return{newValue:e||"",index:4}}},segment:{fire:"gmitGfUpdateHiddenField",drilldowns:["segmentValue"],getParams:function(e){var t={lcv_carline:"truck",car_carline:"passenger"};return{newValue:t[e]?t[e]:"",index:5}}},configurationId:{fire:"gmitGfUpdateHiddenField",drilldowns:["configID"],getParams:function(e){return{newValue:e||"",index:6}}},agencyRoleCode:{fire:"gmitGfUpdateHiddenField",drilldowns:["agencyrolecode"],getParams:function(e){return{newValue:e||"",index:7}}},comment:{fire:"gmitGfUpdateHiddenField",drilldowns:[],getParams:function(e){return{newValue:e||"",index:8}}}},headlines:[{fire:"gmitGfSetText",drilldowns:["carlineLabel"],getParams:function(e){return{newText:e||"",index:0}}},{fire:"gmitGfSetText",drilldowns:["bodystyleLabel"],getParams:function(e){return{newText:e||"",index:1}}},{fire:"gmitGfSetText",drilldowns:["series"],getParams:function(e){return{newText:e||"",index:2}}},{fire:"gmitGfSetText",drilldowns:["engineLabel"],getParams:function(e){return{newText:e||"",index:3}}}],image:[{fire:"gmitGfSetImage",drilldowns:["vehicleImageURL","configurationResult.exteriorImageViewSet.namedView[2].$"],getParams:function(e){return{src:e||""}}}],queryParameters:[{callerType:"NGVC",dropdownHide:!0,hiddenFieldNames:["modelYear","configurationUrl","transmission","configurationId"]}],dropdownDataDrilldown:"featureSelectionSet.featureSelection",getFirstDropdownData:function(e){var t=[],i="featureSelectionSetList.featureSelection",a="featureSelectionSetList.featureSelection.featureSelectionSet";return e&&(u.hasIn(e,i)?t=e[i]:u.hasIn(e,a)?u.each(e[a],function(e){g.merge(t,e.featureSelection)}):t=e["featureSelectionSetList.featureSelectionSet.featureSelection"]),t},setupOptionsList:function(e){var t="feature.code",i="",a="feature.featureId",s="",n="feature.emissionLabelClassImageURLs.imageSize1",r="",o="feature.featureGroup",l="",c="feature.label",d="",h=g("<option></option>");return e&&(i=u.hasIn(e,t)?e[t]:"",s=u.hasIn(e,a)?e[a]:"",r=u.hasIn(e,n)?e[n]:"",l=u.hasIn(e,o)?e[o]:"",d=u.hasIn(e,c)?e[c]:"",h.attr("value",i),h.attr("data-feature-id",s),h.attr("data-co-two-image",r),h.attr("data-segment",l),h.text(d)),h},getDropdownOptionData:function(e){var t="",i="feature.code",a="",s="feature.feature.featureId",n="",r="feature.emissionLabelClassImageURLs.imageSize1",o="",l="feature.label";return e&&(t=u.hasIn(e,i)?e[i]:"",a=u.hasIn(e,s)?e[s]:"",n=u.hasIn(e,r)?e[r]:"",o=u.hasIn(e,l)?e[l]:""),{featureCode:JSON.stringify(t),featureId:JSON.stringify(a),coTwoUrl:JSON.stringify(n),label:o}},getImageInfo:function(e){var t="",i="configurationResult.exteriorImageViewSet.namedView",a="",s="configurationResult.exteriorImageViewSet.label";return e&&(t=u.hasIn(e,i)?e[i]:"",a=u.hasIn(e,s)?e[s]:""),{imageData:t,imageLabel:a}},setupOptionTag:function(e,t){var i="",a="",s="featureId",n="",r="featureCode",o="",l="coTwoUrl",c="";return t&&(a=u.hasIn(t,s)?t[s]:"",n=u.hasIn(t,r)?t[r]:"",o=u.hasIn(t,l)?t[l]:"",c=u.hasIn(t,"label")?t.label:"",i=e?"<option data-feature-id=".concat(a," value=").concat(n," data-co-two-image=").concat(o,">").concat(c,"</option>"):"<option data-feature-id=".concat(a," value=").concat(n,">").concat(c,"</option>")),i},getPriceSelectionCode:function(e){return e&&u.hasIn(e,"priceDetailBean.carlineSelection.feature.code")?e.priceDetailBean.carlineSelection.feature.code:""}},north_america:{type:{modelyear:{hiddenFieldNames:[]},bodystyle:{hiddenFieldNames:[]},modelconfig:{hiddenFieldNames:[]},series:{hiddenFieldNames:[]}},typeArray:["modelyear","bodystyle","modelconfig","series"],pricing:[{fire:"gmitGfSetPricingHeadline",drilldowns:["formattedPrice","msrpPrice"],getParams:function(e){return{newText:e||""}}}],headlines:[{fire:"gmitGfSetText",drilldowns:["selectedBrand"],getParams:function(e){return{newText:e||"",index:0}}},{fire:"gmitGfSetText",drilldowns:["x-modelyear"],getParams:function(e){return{newText:e||"",index:1}}},{fire:"gmitGfSetText",drilldowns:["x-carline"],getParams:function(e){return{newText:e||"",index:2}}},{fire:"gmitGfSetText",drilldowns:["trimDesc"],getParams:function(e){return{newText:e?decodeURIComponent(e):"",index:3}}},{fire:"gmitGfSetText",drilldowns:["intColor"],getParams:function(e){return{newText:e?decodeURIComponent(e):"",index:4}}},{fire:"gmitGfSetText",drilldowns:["extColor"],getParams:function(e){return{newText:e?decodeURIComponent(e):"",index:5}}},{fire:"gmitGfSetText",drilldowns:["vin"],getParams:function(e){return{newText:e?decodeURIComponent(e):"",index:6}}},{fire:"gmitGfSetText",drilldowns:["cashbackOffer"],getParams:function(e){return{newText:e?decodeURIComponent(e):"",index:7}}}],image:[{fire:"gmitGfSetImage",drilldowns:["imageUrl"],getParams:function(e){return{src:e?decodeURIComponent(e):""}}}],hiddenFields:{configurationUrl:{fire:"gmitGfUpdateHiddenField",drilldowns:[],getParams:function(e){return{text:e||"",index:0}}},segment:{fire:"gmitGfUpdateHiddenField",drilldowns:[],getParams:function(e){return{text:e||"",index:1}}},make:{fire:"gmitGfUpdateHiddenField",drilldowns:[],getParams:function(e){return{text:e||"",index:2}}},RPO:{fire:"gmitGfUpdateHiddenField",drilldowns:["RPO"],getParams:function(e){return{text:e||"",index:3}}}},queryParameters:[{callerType:"byo",dropdownHide:!0,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:["RPO"]},{callerType:"ipe",dropdownHide:!0,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:[]},{callerType:"btl",dropdownHide:!0,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:[]},{callerType:"vco",dropdownHide:!1,setPrice:!1,setImage:!1,hiddenFieldNames:[]},{callerType:"fs",dropdownHide:!0,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:[]},{callerType:"mbtl",dropdownHide:!1,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:[]},{callerType:"mvco",dropdownHide:!1,setPrice:!0,setImage:!0,ajaxCall:{type:"GET",dataType:"xml",url:""},hiddenFieldNames:[]}],dropdownPreselectDrilldowns:["x-modelyear","x-bodystyle"],dropdownDataDrilldown:"options",getFirstDropdownData:function(e){var t=[];return e&&u.hasIn(e,"options")&&(t=e.options),t},setupOptionList:function(e){var t="",i="",a="modelyear",s="",n=g("<option></option>");return e&&(t=u.has(e,"code")?e.code:"",s=u.hasIn(e,"title")?e.title:"",n.attr("value",t),n.text(s),i="".concat(a,".").concat(t,"<sep/>"),n.attr("data-feature-id",i)),n},setupOptionTag:function(e,t,i,a){var s="",n="featureCode",r="",o="",l="coTwoUrl",c="",d=g("<option></option>");return a&&(s=u.hasIn(a,n)?a[n]:"",o=u.hasIn(a,l)?a[l]:"",c=u.hasIn(a,"label")?a.label:"",d.attr("value",s),d.text(c),i&&d.attr("data-co-two-image",o),t&&(r="".concat(t,".").concat(s,"<sep/>"),e&&(r=e+r),d.attr("data-feature-id",r))),d},getDropdownOptionData:function(e){var t="",i="";return e&&(t=u.hasIn(e,"code")?e.code:"",i=u.hasIn(e,"title")?e.title:""),{featureCode:t,label:i}},parseXML:function(e,t,i){var a=g();return e&&t&&i&&u.each(e,g.proxy(function(e){1<t.length&&1<i.length?g(e).attr(t[0])===i[0]&&g(e).attr(t[1])===i[1]&&(a=g(e)):g(e).attr(t[0])===i[0]&&(a=g(e))},this)),a}},dealerInfo:{dealerName:"dealerName",dealerStreetAddress:"address.addressLine1",dealerCity:"address.cityName",dealerPostalCode:"address.postalCode",dealerCountryCode:"address.countryCode",dealerDistance:"distance",dealerBac:"bac",dealerUpsc:"upsc",dealerCadc:"cadc",dealerProvince:"address.countrySubdivisionCode",dealerGeoLocation:"geolocation",dealerId:"id",dealerPhoneNumber:"generalContact.phone1",dealerGeneralOpeningHour:"generalOpeningHour",dealerUrl:"dealerUrl",dealerLocale:"address.countryIso",dealerUSLocale:"en_US",siteGeo:"siteGeo",codeActorCC_VN:"codeActorCC_VN"},queryObject:{},cookieObject:{}})}(cowp.$,cowp._),function(y,v){cowp.util.gf=cowp.util.gf||{},y.extend(!0,cowp.util.gf,{addErrorLabel:function(e){return y('<label class="gmit-gf-error-label"></label>').append(e)},applyBusinessRule:function(e,t){var i=this,a=[],s="",n=e;if(e.is("ul")&&(n=e.find(":input")),v.isPlainObject(t))switch(a=t.idsForEffect,v.each(a,function(e){s=(s=y("#".concat(e))).hasClass("gmit-gf-group-box")?s.closest(".gmit-flexbox-container"):s.parent(),"hide"===t.effect||"show"===t.effect?"hide"===t.effect?i.showHideElement(e,!0):i.showHideElement(e,!1):"hideSelect"!==t.effect&&"showSelect"!==t.effect||v.includes(t.valuesSelected,n.val())&&("hideSelect"===t.effect?i.showHideElement(e,!1):i.showHideElement(e,!0))}),t.effect){case"trigger":n.off(t.businessRule).on(t.businessRule,y.proxy(this.onTriggerClick,this,a,t));break;case"hide":n.off("click.hide").on("click.hide",y.proxy(this.onHideClick,this,a));break;case"hideSelect":n.off("change.hide").on("change.hide",y.proxy(this.onSelectHide,this,a,t));break;case"show":n.off("click.show").on("click.show",y.proxy(this.onShowClick,this,a));break;case"showOnly":n.off("click.showOnly").on("click.showOnly",y.proxy(this.onShowOnly,this,a));break;case"showSelect":n.off("change.show").on("change.show",y.proxy(this.onSelectShow,this,a,t));break;case"apply-mandatory-field-value-empty":n&&n.val()||this.applyMandatoryFieldValue(t);break;case"apply-mandatory-field-value":n&&n.val()&&this.applyMandatoryFieldValue(t);break;case"apply-mandatory-field":n.off("click.apply").on("click.apply",y.proxy(this.onApplyMandatoryFieldClick,this,t));break;case"apply-mandatory-selected":n.off("change.apply").on("change.apply",y.proxy(this.onApplyMandatoryFieldCheck,this,t));break;case"apply-mandatory-checked":n.off("click.apply").on("click.apply",y.proxy(this.onApplyMandatoryFieldCheck,this,t,!1));break;case"remove-mandatory-field":n.off("click.remove").on("click.remove",y.proxy(this.onRemoveMandatoryFieldClick,this,t));break;case"remove-mandatory-field-value":n&&!n.val()&&this.removeMandatoryFieldValue(t);break;case"remove-mandatory-field-value-non-empty":n&&n.val()&&this.removeMandatoryFieldValue(t);break;case"populate-element":this.populateElement(t);break;case"populate-element-value":n.off("change.populateElement".concat(v.get(t,"value")).concat(v.get(t,"elementId"))).on("change.populateElement".concat(v.get(t,"value")).concat(v.get(t,"elementId")),y.proxy(this.populateElementValue,this,t));break;case"populate-button-action":n.off("click.populateAction").on("click.populateAction",y.proxy(this.populateButtonAction,this,t))}},applyBusinessRules:function(e){var t=e.find("[data-validations]");v.each(t,y.proxy(this.processElement,this))},applyMandatoryFieldValue:function(e){var t=e?e.validateFields:"",o=e&&e.mandatoryTextToAdd?e.mandatoryTextToAdd:"*";v.each(t,function(e){var t=e&&e.field?y("#".concat(e.field)):y(),i=t.data("validations")||[],a=[],s={constraint:"simple",businessRule:"blur",operator:"mandatory",effect:"error_message",message:e&&e.message?e.message:""},n=y('label[for="'.concat(t.attr("id"),'"]')),r=n.text();r.charAt(r.length-1)!==o&&n.text(r+o),v.each(i,function(e){e&&"mandatory"!==e.operator&&a.push(e)}),a.push(s),t.data("validations",a),t.attr("data-abide-validator","gmit_validation")})},applyValidations:function(e,t,i,a){var s=this,n=i.find("small.error"),r="",o="",l="",c=y(),d="",h="",g="",u="",f="",p="",m="",b=!0;return n.html(""),v.each(e,function(e){if(v.isPlainObject(e)&&"error_message"===e.effect)switch(e.operator){case"mandatory":(t.is("select")?0<(o=t.find("option:selected")).filter("[value]").length?o.val():"":t.is('input[type="radio"]')||t.is('input[type="checkbox"]')?i.find("input:checked").val():t.val())||(n.append(s.addErrorLabel(e.message)),b=!1);break;case"equalTo":h=y("#".concat(e.fieldEqualTo)).val(),t.val()!==h&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"regex":m=e.regex?e.regex:"^*$",t.val()&&!t.val().match(m)&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"equal":g=e.valueToCompare,t.val()!==g&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"not_equals":u=e.valueToCompare,t.val()===u&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"selectFirst":l=y("#".concat(e.elementId)),p="",l.is("select")&&(r=l.find("option:selected"),p=0<r.filter("[value]").length?r.val():""),p||(n.append(s.addErrorLabel(e.message)),b=!1);break;case"lessThan":f=e.valueToCompare,d=t.val()?t.val().length:-1,a.is("ul")&&(d=a.find(":input:checked").length),-1<d&&d<f&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"greaterThan":f=e.valueToCompare,d=t.val()?t.val().length:-1,a.is("ul")&&(d=a.find(":input:checked").length),-1<d&&f<d&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"lessThanEqual":f=e.valueToCompare,d=t.val()?t.val().length:-1,a.is("ul")&&(d=a.find(":input:checked").length),-1<d&&d<=f&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"greaterThanEqual":f=e.valueToCompare,d=t.val()?t.val().length:-1,a.is("ul")&&(d=a.find(":input:checked").length),-1<d&&f<=d&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"lessThanDate":f="today"===e.valueToCompare?new Date(cowp.$.datepicker.formatDate("mm/dd/yy",new Date)):e.valueToCompare,(d=s.formatDateValue(t))&&d<f&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"greaterThanDate":f="today"===e.valueToCompare?new Date(cowp.$.datepicker.formatDate("mm/dd/yy",new Date)):e.valueToCompare,(d=s.formatDateValue(t))&&f<d&&(n.append(s.addErrorLabel(e.message)),b=!1);break;case"lessThanDateElement":c=y("#".concat(e.fieldEqualTo)),f=s.formatDateValue(c),(d=s.formatDateValue(t))&&d<f&&(n.append(s.addErrorLabel(e.message)),b=!1),s.validateElement(c);break;case"greaterThanDateElement":c=y("#".concat(e.fieldEqualTo)),f=s.formatDateValue(c),(d=s.formatDateValue(t))&&f<d&&(n.append(s.addErrorLabel(e.message)),b=!1),s.validateElement(c)}}),b?(a.removeClass("warning"),i.removeClass("error")):(a.addClass("warning"),i.addClass("error")),b},callDtmScript:function(e){window._satellite&&v.isFunction(window._satellite.track)&&window._satellite.track(e)},centerElementOnScreen:function(e,t){var i=cowp.dom.$window.height()/3,a=e.offset().top;t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),cowp.util.isWindowSize("large")||(i<a?cowp.dom.$window.scrollTop(a-i):cowp.dom.$window.scrollTop(0))},filter:function(e,t,i){var a=e.split(","),s=[],n={};return v.each(a,function(e){v.set(n,t,e),s=v.concat(s,v.filter(i,n))}),s.length?s:i},formatDateValue:function(e){var t="",i="",a="",s="",n="";return e&&(t=e.data("datepicker-initialized")?e.datepicker("getDate"):(a=0<(i=v.split(e.val(),"-")).length?i[0]:"",s=1<i.length?i[1]-1:"",n=2<i.length?i[2]:"",new Date(a,s,n))),t},formatQueryObject:function(t){var i={};return Object.keys(t).forEach(function(e){t[e]&&(i[e]=t[e])}),i},isMobile:function(){return window.Modernizr.touch&&navigator.userAgent.match(/Mobi/)},loadQueryString:function(e){var t=decodeURI(document.location.search.replace("?","").replace(/\+/g,"%20"));if(t){t=t.split("&");for(var i=0;i<t.length;i++){var a=t[i].split("=");if(a[0]===e)return a[1]}}return null},openLayerWindow:function(e){var t=y(e.currentTarget),i=y("#".concat(v.replace(t.attr("id"),"-reveal","")));e.preventDefault(),i.foundation("reveal","open")},onApplyMandatoryFieldCheck:function(e,t){var i=y(t.currentTarget),a=v.includes(e.valuesSelected,i.val());i.is(":checked")||a?this.applyMandatoryFieldValue(e):this.removeMandatoryFieldValue(e)},onApplyMandatoryFieldClick:function(e){this.applyMandatoryFieldValue(e)},onHideClick:function(e,t){var i=this,a=y(t.currentTarget),s=a.data("toggle-value"),n=0<a.filter(":checked").length||s,r=s?a.find(".icon-plus"):a.find(".icon-minus"),o=s?"icon-plus":"icon-minus",l=s?"icon-minus":"icon-plus";v.each(e,function(e){i.showHideElement(e,!n)}),r.removeClass(o).addClass(l),a.data("toggle-value",!s)},onSelectHide:function(e,t,i){var a=this,s=y(i.currentTarget),n=v.includes(t.valuesSelected,s.val());n&&v.each(e,function(e){a.showHideElement(e,!n)})},onRemoveMandatoryFieldClick:function(e){this.removeMandatoryFieldValue(e)},onResetPlaceHolder:function(e){var t=y(e.currentTarget);if(""===t.val()&&void 0!==t.val())switch(e.type){case"focus":t.attr("placeholder","");break;case"blur":t.attr("placeholder",t.data("placeholder"))}},onTriggerClick:function(e,t,i){var a=y(i.currentTarget),s=a.find(".icon-plus"),n=a.find(".icon-minus");v.isPlainObject(t)&&(v.each(e,y.proxy(function(e,t,i){var a=y("#".concat(e));i&&a.trigger(i)},t.businessRule)),0<n.length?n.removeClass("icon-minus").addClass("icon-plus"):0<s.length&&s.removeClass("icon-plus").addClass("icon-minus"))},onShowClick:function(e,t){var i=this,a=y(t.currentTarget),s=0<a.filter(":checked").length||a.data("toggle-value");v.each(e,function(e){i.showHideElement(e,s)})},onShowOnly:function(e){var t=this;v.each(e,function(e){t.showHideElement(e,!0)})},onSelectShow:function(e,t,i){var a=this,s=y(i.currentTarget),n=v.includes(t.valuesSelected,s.val());n&&v.each(e,function(e){a.showHideElement(e,n)})},parseLocationCookie:function(e){var a={};return v.each(e,function(e){var t="";if(y.cookie(e)){if(t=y.cookie(e),"cookie_customer_location"===e&&t)a=JSON.parse(decodeURIComponent(t)),v.hasIn(a,"cities")&&a.cities[0]&&v.set(a,"city",a.cities[0]),v.hasIn(a,"country_code")&&a.country_code?v.set(a,"countryCode",a.country_code):v.set(a,"countryCode","US");else if("GMWP_location"===e&&t){var i='{"'.concat(decodeURI(t).replace(/"/g,'\\"').replace(/,/g,'","').replace(/=/g,'":"'),'"}');a=JSON.parse(i),v.hasIn(a,"zip")&&a.zip&&(a.zip=a.zip.split(/[+-]+/),a.zip[0]&&v.set(a,"zipcode",a.zip[0])),v.hasIn(a,"region_code")&&a.region_code&&v.set(a,"state",a.region_code),v.hasIn(a,"country_code")&&a.country_code?v.set(a,"countryCode",a.country_code):v.set(a,"countryCode","US")}return!1}return!0}),a},parseQueryString:function(){var e=document.location.search.replace("?",""),t='{"'.concat(decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"').replace(/\n/g,"\\n"),'"}');return e?JSON.parse(this.sanitizeData(t)):""},populateElementValue:function(e,t){var i=y(t.currentTarget),a=v.get(e,"value"),s=v.get(e,"valuesSelected"),n=v.get(e,"elementId"),r=v.includes(s,i.val()),o=y("#".concat(n));r&&a&&o.val(a)},populateElement:function(e){var t=e?e.idsForEffect:"",i=e?e.elementId:"",a=e?e.value:"",s=!0,n=y("#".concat(i));v.each(t,function(e){y("#".concat(e)).val()&&(s=!1)}),s?n.val(""):n.val(a)},populateButtonAction:function(e){var t=e?e.elementId:"",i=e?e.value:"",a=y("#".concat(t));i&&a.data("action",i)},prefillSelectableItems:function(e){var t=e?e.replace("gmit-gf","x"):"",i=this.loadQueryString(t);return i?this.sanitizeData(i).split(","):null},processElement:function(e){var t=y(e),i=t.data("validations");v.each(i,y.proxy(this.applyBusinessRule,this,t))},showHideElement:function(e,t){var i=y("#".concat(e));i.hasClass("gmit-gf-group-box")?i.closest(".gmit-flexbox-container").toggle(t):i.hasClass("gmit-gf-comment")?i.closest(".gmit-gf-comment-field").parent().toggle(t):(i.hasClass("gmit-gf-radio-group")&&i.closest(".gmit-gf-field-group-container").parent().toggle(t),i.parent().toggle(t))},removeErrors:function(e){e.find(".error").addClass("hide")},removeMandatoryFieldValue:function(e){var l=this,t=e?e.validateFields:[],c=e&&e.mandatoryTextToAdd?e.mandatoryTextToAdd:"*",d=!0;v.each(t,y.proxy(function(e){var t=e&&e.field?e.field:"",i=y("#".concat(t)),a=v.find(i.data("validations"),{effect:"apply-mandatory-field-value"});i.val()&&a&&(d=!1)},this)),v.each(t,function(e){var t=e&&e.field?y("#".concat(e.field)):y(),i=t.data("validations")||[],a=e&&e.additionalFieldCheck?e.additionalFieldCheck:"",s=a?y("#".concat(a)).filter(":checked"):y(),n=y('label[for="'.concat(t.attr("id"),'"]')),r=n.text(),o=r.charAt(r.length-1);d&&(o===c&&n.text(r.slice(0,-1)),v.remove(i,{operator:"mandatory",effect:"error_message"}),0<i.length?(t.data("validations",i),t.attr("data-abide-validator","gmit_validation")):(t.data("validations",""),t.removeAttr("data-abide-validator"))),l.validateElement(t),0<s.filter(":checked").length&&s.trigger("click")})},resetPlaceHolder:function(e){e.data("placeholder",e.attr("placeholder")),e.off("focus.reset").on("focus.reset",y.proxy(this.onResetPlaceHolder,this)),e.off("blur.reset").on("blur.reset",this.onResetPlaceHolder)},sanitizeData:function(e){return y("<div></div>").text(e).html()},setupModuleId:function(e,t){var i;return i=e.find(t),cowp.util.getModuleId(i)},setupModuleIdsFromArray:function(e){var t="",i=[];return 0<e.length&&v.each(e,y.proxy(function(e){t=cowp.util.getModuleId(y(e)),i.push(t)},this)),i},showError:function(e,t,i){var a=t.find(".error");return e.addClass("require-error"),a.html(i).removeClass("hide"),!1},subscribeModuleIds:function(e,t){e.length&&v.each(e,y.proxy(function(e){t.sandbox.subscribe(e,t)},this))},validateElement:function(e){window.setTimeout(y.proxy(function(){0<e.filter("[data-invalid]").length&&Foundation.libs.abide.validate(e,{type:""})},this,e),10)}})}(cowp.$,cowp._),function(o){Foundation&&Foundation.libs&&Foundation.libs.abide&&Foundation.libs.abide.settings&&(cowp.conf.ui.foundation&&cowp.conf.ui.foundation.abide||o.extend(!0,Foundation.libs.abide.settings,{error_labels:!1,live_validate:!1,validate_on_blur:!0,timeout:0,validators:{gmit_validation:function(e,t,i){var a=o(e),s=o(i),n=a.data("validations"),r=s.find("ul");return(a.is('input[type="radio"]')||a.is('input[type="checkbox"]'))&&(r=(s=a.closest(".gmit-gf-field-options")).find(".gmit-gf-field-group"),n=s.find(".gmit-gf-field-group").data("validations")),cowp.util.gf.applyValidations(n,a,s,r)}}}))}(cowp.$),function(s,n){s.extend(!0,cowp.conf.cmp,{gmit_gf_brochure:{name:"gmit_gf_brochure",boxContainerSelector:".js-brochure-item",boxContainerBorderSelector:".js-brochure-item",brochureListSelector:".gmit-gf-brochure-list",buttonSelector:".q-mod-gmit-gf-button",disabledClass:"gmit-gf-disabled",errorSelector:"small.error",errorClass:"error",inputCheckboxSelector:".gmit-gf-input-checkbox",dataMaxSelected:"max-selected",dataBorchureId:"brochureid",nonSelected:".gmit-gf-brochure .gmit-gf-input-checkbox:not(:checked)",dataNoBrochureSelected:"no-brochure-selected-message",requestTypeSelector:".gmit-gf-request-type",brochureIds:".js-gmit-gf-hidden-brochure-ids",selectedBrochuresSelector:".gmit-gf-brochure .gmit-gf-input-checkbox:checked"}}),cowp.mod.gmit_gf_brochure=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$selectedBrochures=s(),this.$nonSelectedBrochures=s([]),this.$brochures=e.find(":input"),this.toggleValue=!1,this.maxSelected=e.data(this.cfg.dataMaxSelected),this.disableBrochures=!1,this.noBrochureSelectedMessage=e.data(this.cfg.dataNoBrochureSelected),this.idArray=[],this.$requestType=cowp.util.getClosestModule(e,cowp.conf.cmp.gmit_gf_request_type.name),this.$brochureIdsHiddenField=this.$requestType.find(this.cfg.brochureIds),this.brochureIdHiddenFieldId=cowp.util.getModuleId(this.$brochureIdsHiddenField.parent()),this.brochures={selectedBrochureId:"",toggleValue:!1},this.requestTypeId=cowp.util.getModuleId(this.$requestType),this.sandbox.subscribe(this.id,this)},prepare:function(){var a=this,e=this.$ctx,t=this.$requestType.find(this.cfg.buttonSelector);e.on("click.brochure",this.cfg.inputCheckboxSelector,s.proxy(this.selectBrochure,this)).on("click.brochureUpdate",this.cfg.inputCheckboxSelector,s.proxy(this.updateBrochureIDs,this)),0<this.requestTypeId&&this.sandbox.subscribe(this.requestTypeId,this),0<this.brochureIdHiddenFieldId&&this.sandbox.subscribe(this.brochureIdHiddenFieldId,this),n.each(t,function(e){var t=s(e),i=cowp.util.getModuleId(t);0<i&&a.sandbox.subscribe(i,a)}),cowp.util.debugModule(this)},finish:function(){this.$brochures.off("focus")},onDisableBrochures:function(){this.disableBrochures=this.$selectedBrochures.length===this.maxSelected,this.disableBrochures?this.$nonSelectedBrochures.attr("disabled",!0).closest(this.cfg.boxContainerBorderSelector).addClass(this.cfg.disabledClass):this.$nonSelectedBrochures.removeAttr("disabled").closest(this.cfg.boxContainerBorderSelector).removeClass(this.cfg.disabledClass)},onShowBrochureSelectedError:function(){var t=this;this.$ctx.find(this.cfg.errorSelector).html(cowp.util.gf.addErrorLabel(this.noBrochureSelectedMessage)),n.each(this.$brochures,function(e){s(e).closest(t.cfg.boxContainerSelector).addClass(t.cfg.errorClass).closest(t.cfg.brochureListSelector).addClass(t.cfg.errorClass)}),this.$brochures.filter(":first").focus()},onResetShowBrochureSelectedError:function(){var t=this;this.$ctx.find(this.cfg.errorSelector).html(""),n.each(this.$brochures,function(e){s(e).closest(t.cfg.boxContainerSelector).removeClass(t.cfg.errorClass).closest(t.cfg.brochureListSelector).removeClass(t.cfg.errorClass)})},onGmitGfClearDisabledBrochures:function(){this.$nonSelectedBrochures.removeAttr("disabled").closest(this.cfg.boxContainerBorderSelector).removeClass(this.cfg.disabledClass)},selectBrochure:function(e){var t=s(e.currentTarget);this.$selectedBrochures=this.$ctx.closest(this.cfg.requestTypeSelector).find(this.cfg.selectedBrochuresSelector),this.$nonSelectedBrochures=this.$ctx.closest(this.cfg.requestTypeSelector).find(this.cfg.nonSelected),this.brochures={selectedBrochureId:t.attr("id"),toggleValue:0<t.filter(":checked").length},this.fire("brochureItemSelect",this.brochures,[this.id]),this.onDisableBrochures(),this.$selectedBrochures.length?(this.fire("resetShowBrochureSelectedError",this.cfg.name),this.onResetShowBrochureSelectedError()):this.fire("gmitGfCheckNoBrochureSelected",[this.requestTypeId])},updateBrochureIDs:function(e){var t=this,i=s(e.currentTarget),a={};this.idArray=this.$brochureIdsHiddenField.val()?this.$brochureIdsHiddenField.val().split(","):[],this.$brochureIdsHiddenField.length&&(0<i.filter(":checked").length&&i.data(this.cfg.dataBorchureId)?this.idArray.push(i.data(this.cfg.dataBorchureId)):this.idArray=n.remove(this.idArray,function(e){return e!==i.data(t.cfg.dataBorchureId)}),a.text=this.idArray.length?n.join(this.idArray,","):"",0<this.brochureIdHiddenFieldId&&this.fire("gmitGfUpdateValue",a,[this.brochureIdHiddenFieldId]))}})}(cowp.$,cowp._),function(i){i.extend(!0,cowp.conf.cmp,{gmit_gf_button:{name:"gmit_gf_button",brochureSelector:".gmit-gf-brochure",formSelector:"form",requestTypeSelector:".gmit-gf-request-type",slideUpSpeed:500,slideDownSpeed:500,scrollToTopSpeed:500,thankYouSelector:".gmit-gf-thank-you"}}),cowp.mod.gmit_gf_button=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.$requestType=this.$ctx.closest(this.cfg.requestTypeSelector),this.$brochures=this.$requestType.find(this.cfg.brochureSelector),this.$button=this.$requestType.find(this.cfg.buttonSelector),this.$form=this.$requestType.find(this.cfg.formSelector),this.$thankYou=this.$requestType.find(this.cfg.thankYouSelector),this.actionUrl="",this.action="",this.animateOpts={scrollTop:0},this.sandbox.subscribe(this.id,this)},prepare:function(){this.$ctx.on("click","button",i.proxy(this.setAction,this)).on("click","a",i.proxy(this.setAction,this))},displayThankYou:function(){return this.$brochures.find(":input:checked").length<=0?(this.fire("showBrochureSelectedError",[this.id]),!1):(this.fire("resetShowBrochureSelectedError",[this.id]),cowp.dom.$htmlBody.stop().animate(this.animateOpts,this.cfg.scrollToTopSpeed),this.$form.slideUp(this.cfg.slideUpSpeed,i.proxy(this.thankYouSlideDown,this)),!0)},thankYouSlideDown:function(){this.$thankYou.slideDown(this.cfg.slideDownSpeed,this.documentReflow)},documentReflow:function(){cowp.dom.$document.foundation("reflow")},setAction:function(e){var t=i(e.currentTarget);switch(this.actionUrl=t.data("url")||"",this.action=t.data("action")||"",this.action){case"print":e.preventDefault(),window.print();break;case"link":this.actionUrl&&(window.location=this.actionUrl);break;case"download":e.preventDefault(),i.proxy(this.displayThankYou(),this)}}})}(cowp.$),cowp.$.extend(!0,cowp.conf.cmp,{gmit_gf_checkbox_field:{name:"gmit_gf_checkbox_field",selector:".gmit-gf-input-checkbox",checkBoxGroup:".gmit-gf-checkbox-group"}}),cowp.mod.gmit_gf_checkbox_field=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$checkboxSelector=e.find(this.cfg.selector),this.checkboxGroup=e.find(this.cfg.checkBoxGroup),this.checkboxGroupId=this.checkboxGroup.attr("id")},prepare:function(){var e=cowp.util.gf.prefillSelectableItems(this.checkboxGroupId);e&&this.$checkboxSelector.val(e)},finish:function(){this.$checkboxSelector.off("focus")}}),cowp.$.extend(!0,cowp.conf.cmp,{gmit_gf_co2_data:{name:"gmit_gf_co2_data",selector:".gmit-gf-co2-data",imageSelector:".gmit-gf-co2-chart",textGroupSelector:".gmit-gf-text-group",tableSelector:".gmit-gf-table"}}),cowp.mod.gmit_gf_co2_data=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.imageId=cowp.util.gf.setupModuleId(e,this.cfg.imageSelector),this.imageCheck=0<this.imageId,this.textGroupId=cowp.util.gf.setupModuleId(e,this.cfg.textGroupSelector),this.textGroupCheck=0<this.textGroupId,this.tableId=cowp.util.gf.setupModuleId(e,this.cfg.tableSelector),this.tableCheck=0<this.tableId,this.sandbox.subscribe(this.id,this)},prepare:function(){this.imageCheck&&this.sandbox.subscribe(this.imageId,this),this.textGroupCheck&&this.sandbox.subscribe(this.textGroupId,this),this.tableCheck&&this.sandbox.subscribe(this.tableId,this)},onGmitGfSetCo2Image:function(e){var t={src:e.src};t.src&&this.imageCheck&&this.fire("gmitGfSetImage",t,[this.imageId])},onGmitGfHideCo2Image:function(){this.imageCheck&&this.fire("gmitGfHideImage",[this.imageId])},onGmitGfShowCo2Image:function(){this.imageCheck&&this.fire("gmitGfShowImage",[this.imageId])},onGmitGfSetCo2TextGroup:function(e){var t={newText:e.newText};t.newText&&this.textGroupCheck&&this.fire("gmitGfSetTextGroup",t,[this.textGroupId])},onGmitGfHideCo2TextGroup:function(){this.textGroupCheck&&this.fire("gmitGfHideTextGroup",[this.textGroupId])},onGmitGfShowCo2TextGroup:function(){this.textGroupCheck&&this.fire("gmitGfShowTextGroup",[this.textGroupId])},onGmitGfSetCo2Headline:function(e){var t={newText:e.newText,index:e.index};t.newText&&t.index&&this.textGroupCheck&&this.fire("gmitGfSetText",t,[this.textGroupId])},onGmitGfHideHeadline:function(e){e.moduleId&&this.fire("gmitGfHideText",[e.moduleId])},onGmitGfShowHeadline:function(e){e.moduleId&&this.fire("gmitGfShowHeadline",[e.moduleId])},onGmitGfHideCo2:function(){this.$ctx.hide()},onGmitGfShowCo2:function(){this.$ctx.show()},onGmitGfSetCo2TableColumn:function(e){e&&this.tableCheck&&this.fire("gmitGfSetTableColumn",e,[this.tableId])}}),function(d,t){d.extend(!0,cowp.conf.cmp,{gmit_gf_comment_field:{name:"gmit_gf_comment_field",countSelector:".gmit-gf-count",countSpanSelector:".gmit-gf-count .gmit-gf-count-down",maxLengthAttr:"maxlength",selector:".gmit-gf-comment"}}),cowp.mod.gmit_gf_comment_field=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$counter=this.$ctx.find(this.cfg.countSpanSelector),this.$commentField=e.find(this.cfg.selector)},prepare:function(){var e=this.$ctx,t=this.$commentField.attr("id"),i=cowp.util.gf.prefillSelectableItems(t);cowp.util.gf.resetPlaceHolder(this.$commentField),0<this.$counter.length&&e.on("keyup",this.cfg.selector,d.proxy(this.countCharacters,this)),i&&(this.$commentField.val(i),this.$commentField.keyup()),e.on("blur.rules",this.cfg.selector,d.proxy(this.applyBusinessRule,this)),this.sandbox.subscribe(this.id,this)},finish:function(){this.$ctx.off("focus")},applyBusinessRule:function(){cowp.util.gf.applyBusinessRules(this.$ctx)},countCharacters:function(e){var t=d(e.currentTarget),i=t.val(),a=cowp.util.isNumber(t.attr(this.cfg.maxLengthAttr))?t.attr(this.cfg.maxLengthAttr):0,s=i?i.length:0,n=a-s;return 0<a&&(a<s&&i&&t.val(i.substring(0,a)),this.$counter.html(n)),!1},onGmitGfClearCommentField:function(){this.$commentField.val("")},onGmitGfResetCharacterCounter:function(){this.$counter.html(this.$commentField.attr(this.cfg.maxLengthAttr))},onGmitGfAddValuesToCommentField:function(e){var o=this,l="",c="";t.each(e,function(e){var t=[],i="",a="",s=d(e),n=s.data("questions")?s.data("questions"):s.data("callers"),r=n&&1===n.length?n[0].key:"";r&&(s.hasClass("gmit-gf-input-radio")||s.hasClass("gmit-gf-input-checkbox")?s.is(":checked")&&(t=s.next(),i=r||t.text(),a=n&&n.length?n[0].value:s.val()):s.hasClass(".gmit-gf-comment")?(l=s.val(),c=r):(t=s.prev(),i=r||t.text(),a=s.val()),a&&o.$commentField.append("".concat(i,"=").concat(a," ")))}),l&&this.$commentField.append("".concat(c,"=").concat(l," "))}})}(cowp.$,cowp._),function(r,o){r.extend(!0,cowp.conf.cmp,{gmit_gf_datepicker:{name:"gmit_gf_datepicker",arrowClass:"gmit-gf-down-arrow",arrowSelector:".gmit-gf-down-arrow",day:".js-gmit-gf-day",month:".js-gmit-gf-month",hasDatePickerClass:"hasDatePicker",hideClass:"gmit-gf-hide",selector:".gmit-gf-datepicker-container .gmit-gf-input-text",year:".js-gmit-gf-year"}}),cowp.mod.gmit_gf_datepicker=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.$datePicker=this.$ctx.find(this.cfg.selector),this.$day=this.$ctx.find(this.cfg.day),this.$downArrow=this.$ctx.find(this.cfg.arrowSelector),this.$month=this.$ctx.find(this.cfg.month),this.$year=this.$ctx.find(this.cfg.year)},prepare:function(){this.$ctx.on("click",this.cfg.arrowSelector,r.proxy(this.onDropDownClick,this)),this.$datePicker.on("blur",r.proxy(this.onDropDownBlur,this)),this.$datePicker.on("focus",r.proxy(this.onFocusEvent,this)),this.setupDatePicker()},finish:function(){},onBroadcastBreakpointChange:function(){this.setupDatePicker()},datePickerBeforeShow:function(e,t){var i=t.dpDiv;i.css({position:"absolute",top:"".concat(this.$datePicker.offsetHeight,"px"),left:"".concat(this.$datePicker.offsetWidth-this.$datePicker.width,"px")}),this.$datePicker.after(i),i.hide()},datePickerOnClose:function(){r(this).trigger("blur")},onDropDownClick:function(){this.$datePicker.focus()},onDropDownBlur:function(){var e="",t="",i="",a="",s="";this.$datePicker.data("datepicker-initialized")?(s=(e=this.$datePicker.datepicker("getDate"))?e.getDate():"",a=e?e.getMonth()+1:"",i=e?e.getFullYear():""):(e=this.$datePicker.val(),i=0<(t=o.split(e,"-")).length?t[0]:"",a=1<t.length?t[1]:"",s=2<t.length?t[2]:""),this.$month.val(a),this.$year.val(i),this.$day.val(s),cowp.util.gf.applyBusinessRules(this.$ctx),this.$downArrow.removeClass("active")},setupDatePicker:function(){var e=this.$datePicker.data("datepickerlocalization"),t="",i="",a="",s="",n="";cowp.util.gf.isMobile()?(window.Modernizr&&window.Modernizr.inputtypes.date&&this.$datePicker.data("datepicker-initialized")&&(n=(t=this.$datePicker.datepicker("getDate"))?t.getDate():"",s=t?t.getMonth()+1:"",a=t?t.getFullYear():"",s=s&&s<10?"0".concat(s.toString()):s,n=n&&n<10?"0".concat(n.toString()):n,this.$datePicker.removeClass(this.cfg.hasDatePickerClass).data("datepicker-initialized",!1).attr("type","date").datepicker("destroy"),this.$downArrow.addClass(this.cfg.hideClass),t&&this.$datePicker.val("".concat(a,"-").concat(s,"-").concat(n))),this.$datePicker.attr("readonly",!1)):(cowp.util.gf.resetPlaceHolder(this.$datePicker),this.$datePicker.data("datepicker-initialized")||(t=this.$datePicker.val(),a=0<(i=o.split(t,"-")).length?i[0]:"",s=1<i.length?i[1]-1:"",n=2<i.length?i[2]:"",this.$datePicker.datepicker({onClose:this.datePickerOnClose,showOtherMonths:!0,beforeShow:r.proxy(this.datePickerBeforeShow,this)}),this.$datePicker.attr("type","text").attr("readonly",!0),r.datepicker.setDefaults(e),this.$downArrow.removeClass(this.cfg.hideClass),this.$datePicker.data("datepicker-initialized",!0),t&&this.$datePicker.datepicker("setDate",new Date(a,s,n))))},onFocusEvent:function(e){this.$downArrow.addClass("active"),cowp.util.gf.centerElementOnScreen(this.$datePicker,e),this.$datePicker.data("datepicker-initialized")&&this.$datePicker.datepicker("show")}})}(cowp.$,cowp._),function(h,g){h.extend(!0,cowp.conf.cmp,{gmit_gf_dealer_selector:{name:"gmit_gf_dealer_selector",closeList:".gmit-gf-dealer-search-results .gmit-gf-icon-close",closeDealer:".gmit-gf-selected-dealer .gmit-gf-icon-close",codeActorCC_VN:".js-gmit-gf-hidden-dealer-code-actor-cc-vn",dataClientApplicationId:"client-application-id",dataDealer:"dealer",dateDealerBac:"dealerBAC",dataDealerFound:"dealer-found-text",dateDealerSiteGeo:"dealerSiteGeo",dataLocale:"locale",dataEndPoints:"end-points",dataFilterServiceTypes:"filter-service-types",dataExcludeActivities:"exclude-activities",dataActivities:"activities",dataNoDealer:"no-dealer-message",dataServerError:"server-error-message",dealerBac:".js-gmit-gf-hidden-dealer-bac",dealerCity:".js-gmit-gf-hidden-dealer-city",dealerName:".js-gmit-gf-hidden-brand-site-name",dataNoDealerSelected:"no-dealer-selected",dealerCountSelector:".gmit-gf-dealer-count",dealerId:".js-gmit-gf-hidden-dealer-id",dealerItemSelector:".gmit-gf-dealer-items",dealerPostalCode:".js-gmit-gf-hidden-dealer-postal-code",dealerSearchResultSelector:".gmit-gf-dealer-search-results",dealerStreet:".js-gmit-gf-hidden-dealer-street",dealerUpsc:".js-gmit-gf-hidden-dealer-upsc",errorSelector:".gmit-gf-search-error",hiddenContainerSelector:".gmit-gf-dealer-hidden-section",hideClass:"gmit-gf-hide",inputSelector:":input",localizationPagePath:"localization-page-path",newSearchSelector:".js-gmit-gf-new-search",radioButtonSelector:".gmit-gf-input-radio",searchInputSelector:".gmit-gf-input-text",searchOptionSelector:".gmit-gf-multioption-radio",searchOptionContainerSelector:".gmit-gf-search-options",searchSelector:".js-gmit-gf-search",searchTextSelector:".gmit-gf-text-field",selectDealer:".gmit-gf-dealer",selectedDealerAddress:".gmit-gf-selected-dealer-address",selectedDealerName:".gmit-gf-selected-dealer-name",selectedDealerSelector:".gmit-gf-selected-dealer",siteGeo:".js-gmit-gf-hidden-dealer-site-geo",rrdi:".js-gmit-gf-hidden-dealer-rrdi",animateSpeed:500,spinnerSelector:".gmit-gf-loader",useAPDVService:"use-apdv-service",validationItems:".gmit-gf-input-radio, .gmit-gf-input-text",vehicleSelector:".gmit-gf-vehicle-selector"}}),cowp.mod.gmit_gf_dealer_selector=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.clientApplicationId=e.data(this.cfg.dataClientApplicationId),this.$closeDealer=e.find(this.cfg.closeDealer),this.$newSearchSelector=e.find(this.cfg.newSearchSelector),this.$searchOption=e.find(this.cfg.searchOptionSelector),this.$searchText=e.find(this.cfg.searchTextSelector),this.$searchResults=e.find(this.cfg.dealerSearchResultSelector),this.$searchOptionContainer=e.find(this.cfg.searchOptionContainerSelector),this.filterSeviceTypes=e.data(this.cfg.dataFilterServiceTypes),this.excludeActivities=e.data(this.cfg.dataExcludeActivities),this.activities=e.data(this.cfg.dataActivities),this.$hiddenValues=e.find(this.cfg.hiddenContainerSelector),this.$selectedDealer=e.find(this.cfg.selectedDealerSelector),this.$spinner=e.find(this.cfg.spinnerSelector),this.$dealerItems=e.find(this.cfg.dealerItemSelector),this.$validationElements=e.find(this.cfg.validationItems),this.$radioButtons=this.$searchOption.find(this.cfg.radioButtonSelector),this.$searchInput=this.$searchText.find(this.cfg.searchInputSelector),this.$searchError=this.$searchResults.find(this.cfg.errorSelector),this.$dealerBac=e.data(this.cfg.dataDealerBac),this.$dealerSiteGeo=e.data(this.cfg.dataDealerSiteGeo),this.$dealerCount=this.$searchResults.find(this.cfg.dealerCountSelector),this.dealerFoundText=this.$dealerCount.data(this.cfg.dataDealerFound),this.locale=e.data(this.cfg.dataLocale),this.localizationPagePath=e.data(this.cfg.localizationPagePath),this.useAPDVService=e.data(this.cfg.useAPDVService),this.noDealersMessage=e.data(this.cfg.dataNoDealer),this.noDealerSelected=e.data(this.cfg.dataNoDealerSelected),this.serverErrorMessage=e.data(this.cfg.dataServerError),this.endPoints=e.data(this.cfg.dataEndPoints),this.$selectedDealerAddress1=this.$ctx.find(this.cfg.selectedDealerAddress),this.$selectedDealerName=this.$ctx.find(this.cfg.selectedDealerName),this.dealer="",this.dealerObj={},this.$checkedRadio=h([]),this.searchValue="",this.endPoint="",this.searchByPostalCode="",this.searchByCity="",this.searchByName="",this.showDealerErrorVisible=!1,this.$requestType=cowp.util.getClosestModule(e,cowp.conf.cmp.gmit_gf_request_type.name),this.$vehicleSelector=this.$requestType.find(this.cfg.vehicleSelector),this.vehicleSelectorId=cowp.util.getModuleId(this.$vehicleSelector),this.requestTypeId=cowp.util.getModuleId(this.$requestType),this.bacValue=cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString("dealerBAC")),this.dealerEditable=cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString("dealerEditable")),this.siteGeoValue=cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString("dealerSiteGeo")),this.sandbox.subscribe(this.id,this)},prepare:function(){var e=this.$ctx;this.useAPDVService||this.loadPreSelectedDealer(),e.on("click",this.cfg.newSearchSelector,h.proxy(this.newSearchEvent,this)).on("click",this.cfg.closeList,h.proxy(this.closeListEvent,this)).on("click",this.cfg.closeDealer,h.proxy(this.closeSelectedDealerEvent,this)).on("click",this.cfg.searchSelector,h.proxy(this.searchForDealer,this)).on("click",this.cfg.selectDealer,h.proxy(this.onSelectDealer,this)).on("click",this.cfg.radioButtonSelector,h.proxy(this.onUpdateSearchByField,this)).on("blur",this.cfg.searchInputSelector,h.proxy(this.onUpdateTextField,this)),0<this.requestTypeId&&this.sandbox.subscribe(this.requestTypeId,this),0<this.vehicleSelectorId&&this.sandbox.subscribe(this.vehicleSelectorId,this)},finish:function(){this.useAPDVService&&this.loadPreSelectedDealer()},addDealer:function(e){var t=e||{dealerName:"",address:{}},i=h("".concat('<div class="gmit-gf-dealer-item"><a href="#" class="gmit-gf-dealer" data-dealer=\'').concat(g.escape(JSON.stringify(t)),"'><address>")+'<div class="gmit-gf-dealer-name">'.concat(t.dealerName,"</div>")+'<div class="gmit-gf-dealer-address">'.concat(this.formatAddress(t.address),"</div>")+'</address></a></div><hr class="gmit-gf-divider"/>');this.$dealerItems.append(i)},buildEndPoint:function(e){var t="",i=this.endPoints[e],a={distance:i.distance,maxResults:i.maxResults,model:i.model,services:i.services,unit:i.unit,excluded_activities:this.excludeActivities,activities:this.activities,filter_service_types:this.filterSeviceTypes},s=null;if(i){if(this.useAPDVService){var n={consumer:"GlobalForms",path:this.localizationPagePath,searchTerm:this.searchValue,searchType:e};g.extend(a,n)}i.url&&!this.useAPDVService?t=i.url:this.useAPDVService&&(t="/apps/atomic/DealersServlet"),t&&(s=cowp.util.gf.formatQueryObject(a),t+="?".concat(h.param(s)))}return t},clearHiddenValues:function(e){e.find(this.cfg.inputSelector).val("")},closeListEvent:function(){this.$searchResults.slideUp(this.cfg.animateSpeed),this.$searchOptionContainer.slideDown(this.cfg.animateSpeed)},closeSelectedDealerEvent:function(){this.$selectedDealer.slideUp(this.cfg.animateSpeed),this.$searchOptionContainer.slideDown(this.cfg.animateSpeed),this.clearHiddenValues(this.$hiddenValues),this.fire("gmitGfDealerSelected",{valid:!1},[this.id])},formatAddress:function(e){var t="";return e&&(t=e.addressLine1?"".concat(e.addressLine1,", "):"",t+=e.postalCode?"".concat(e.postalCode," "):"",t+=e.cityName),t},doPreselectedDealerSearch:function(){var a=this,e={consumer:"GlobalForms",path:this.localizationPagePath,searchType:"dealerPreSelected",excluded_activities:this.excludeActivities,activities:this.activities,dealerBac:this.bacValue,dealerSiteGeo:this.siteGeoValue},t="/apps/atomic/DealersServlet",i=cowp.util.gf.formatQueryObject(e);return t+="?".concat(h.param(i)),h.ajax({url:t,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"GET",cache:!0,statusCode:{404:h.proxy(this.showNotFoundError,this),400:h.proxy(this.showNotFoundError,this),500:h.proxy(this.showNotFoundError,this)},beforeSend:h.proxy(this.setHeaders,this),success:function(e){var t=g.get(e,"payload.dealers"),i=null;a.bacValue&&"undefined"!==a.bacValue&&(i=g.find(t,{bac:a.bacValue})),a.siteGeoValue&&"undefined"!==a.siteGeoValue&&(i=g.find(t,{siteGeo:a.siteGeoValue})),a.processSelectedDealer(i)}})},doLocationBasedSearch:function(){var a=this,e={consumer:"GlobalForms",path:this.localizationPagePath,searchType:"latlong",excluded_activities:this.excludeActivities,activities:this.activities},t="/apps/atomic/DealersServlet",i=cowp.util.gf.formatQueryObject(e);return t+="?".concat(h.param(i)),h.ajax({url:t,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"GET",statusCode:{404:h.proxy(this.showNotFoundError,this),400:h.proxy(this.showNotFoundError,this),500:h.proxy(this.showNotFoundError,this)},beforeSend:h.proxy(this.setHeaders,this),success:function(e){var t=g.get(e,"payload.dealers"),i=g.find(t,{bac:a.bacValue});cowp.util.cookies.set("dlSearchResults",JSON.stringify(t)),a.processSelectedDealer(i)}})},processSelectedDealer:function(e){var t={status:"success",payload:{dealers:[e]}};e&&(this.$searchOptionContainer.hide(),"true"!==this.dealerEditable&&(this.$closeDealer.hide(),this.$newSearchSelector.hide()),this.processDealers(t),this.processComplete())},loadPreSelectedDealer:function(){var e=this.bacValue&&"undefined"!==this.bacValue,t=this.siteGeoValue&&"undefined"!==this.siteGeoValue;if(this.useAPDVService&&(e||t)){var i=JSON.parse(cowp.util.cookies.get("dlSearchResults"))||{},a=e?g.find(i,{bac:this.bacValue}):g.find(i,{siteGeo:this.siteGeoValue});a?this.processSelectedDealer(a):this.doPreselectedDealerSearch()}else{var s=this.endPoints&&this.endPoints.bac?this.buildEndPoint("bac"):"";(s=s?s.replace("{bac}",this.bacValue):"")&&this.bacValue&&"null"!==this.bacValue&&(this.$searchOptionContainer.hide(),"true"!==this.dealerEditable&&(this.$closeDealer.hide(),this.$newSearchSelector.hide()),h.ajax({url:s,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"GET",statusCode:{404:h.proxy(this.showNotFoundError,this),400:h.proxy(this.showNotFoundError,this),500:h.proxy(this.showNotFoundError,this)},beforeSend:h.proxy(this.setHeaders,this),success:h.proxy(this.processDealers,this),fail:h.proxy(this.showFailed,this),complete:h.proxy(this.processComplete,this)}))}},newSearchEvent:function(e){e.preventDefault(),""!==this.$dealerItems.html().trim()&&this.$searchResults.slideDown(this.cfg.animateSpeed),this.$searchOptionContainer.slideDown(this.cfg.animateSpeed)},processComplete:function(){this.$spinner.addClass(this.cfg.hideClass)},processDealers:function(e){var t=e&&e.status&&"success"===e.status&&e.payload&&e.payload.dealers?e.payload.dealers:[];0<t.length?(this.$dealerCount.html("".concat(t.length," ").concat(this.dealerFoundText)),g.each(t,h.proxy(this.addDealer,this))):(this.$searchOptionContainer.show(),this.$closeDealer.show(),this.$newSearchSelector.show(),e&&"success"!==e.status?this.$searchError.html(this.serverErrorMessage):this.$searchError.html(this.noDealersMessage),this.$dealerItems.html("").addClass(this.cfg.hideClass)),1===t.length&&1===this.$dealerItems.length?this.$dealerItems.find(this.cfg.selectDealer).trigger("click"):(this.$searchError.is(":empty")&&this.$dealerItems.removeClass(this.cfg.hideClass),this.$searchResults.slideDown(this.cfg.animateSpeed))},onShowDealerNotSelectedError:function(){this.$searchInput.next(".error").append(cowp.util.gf.addErrorLabel(this.noDealerSelected)),this.$searchInput.parent().addClass("error"),this.$searchInput.attr("data-invalid",""),this.showDealerErrorVisible=!0},onResetshowDealerErrorVisible:function(){this.$searchInput.next(".error").html(""),this.$searchInput.parent().removeClass("error"),this.$searchInput.removeAttr("data-invalid"),this.showDealerErrorVisible=!1},onGmitGfCarlineSelected:function(){var e=this.$radioButtons.filter(":checked");0<e.length&&e.trigger("change")},onSelectDealer:function(e){var t=this,i=h(e.currentTarget),a=[],s={},n={name:""},r=this.$hiddenValues.find(this.cfg.dealerId),o=this.$hiddenValues.find(this.cfg.dealerBac),l=this.$hiddenValues.find(this.cfg.siteGeo),c=this.$hiddenValues.find(this.cfg.codeActorCC_VN),d=this.$hiddenValues.find(this.cfg.rrdi);e.preventDefault(),this.dealer=i.data(this.cfg.dataDealer),this.dealerObj=this.dealer||{},this.clearHiddenValues(this.$hiddenValues),this.$selectedDealerAddress1.empty(),this.$selectedDealerName.empty(),this.$selectedDealerAddress1.empty(),this.$selectedDealer.data(this.cfg.dataDealer,this.dealer),this.dealer&&(g.each(this.activities,function(e){n.name=e,(a=g.filter(t.dealer.services,n))&&0<a.length&&(s=g.nth(a,0),o.val(s.bac),r.val(s.cadc))}),o.val()||o.val(this.dealer.bac),r.val()||r.val(this.dealer.cadc),l.val()||l.val(this.dealer.siteGeo),d.val()||d.val(this.dealer.RRDI),c.val()||c.val(this.dealer.codeActorCC_VN),this.dealer.upsc&&this.$hiddenValues.find(this.cfg.dealerUpsc).val(this.dealer.upsc),this.dealer.dealerName&&(this.$selectedDealerName.html(this.dealer.dealerName),this.$hiddenValues.find(this.cfg.dealerName).val(this.dealer.dealerName)),this.dealer.address&&(this.$selectedDealerAddress1.html(this.formatAddress(this.dealer.address)),this.dealer.address.addressLine1&&this.$hiddenValues.find(this.cfg.dealerStreet).val(this.dealer.address.addressLine1),this.dealer.address.postalCode&&this.$hiddenValues.find(this.cfg.dealerPostalCode).val(this.dealer.address.postalCode),this.dealer.address.cityName&&this.$hiddenValues.find(this.cfg.dealerCity).val(this.dealer.address.cityName))),this.$searchResults.slideUp(this.cfg.animateSpeed),this.$searchOptionContainer.slideUp(this.cfg.animateSpeed),this.$selectedDealer.slideDown(this.cfg.animateSpeed),this.fire("gmitGfUpdateDealer",this.dealerObj,[this.id]),this.fire("gmitGfDealerSelected",{valid:!0},[this.id]),window.setTimeout(function(){t.$searchInput.trigger("change")},1),this.onResetshowDealerErrorVisible()},onUpdateTextField:function(e){var t=h(e.currentTarget).val();switch(0<this.$radioButtons.filter(":checked").length?this.$radioButtons.filter(":checked").val():this.$radioButtons.filter(":first").val()){case"name":this.searchByName=t;break;case"city":this.searchByCity=t;break;case"zip":this.searchByPostalCode=t}this.showDealerErrorVisible&&window.setTimeout(h.proxy(this.onShowDealerNotSelectedError,this),10)},onUpdateSearchByField:function(e){switch(h(e.currentTarget).val()){case"name":this.$searchInput.val(this.searchByName);break;case"city":this.$searchInput.val(this.searchByCity);break;case"zip":this.$searchInput.val(this.searchByPostalCode)}},searchForDealer:function(e){var t=this;if(e.preventDefault(),this.$checkedRadio=this.$radioButtons.filter(":checked"),this.searchValue=encodeURIComponent(this.$searchInput.val()),this.endPoint="",0===this.$checkedRadio.length||!this.searchValue)return this.$radioButtons.trigger("change"),setTimeout(function(){t.$searchInput.trigger("change")},1),!1;if(0<this.$validationElements.filter(":checked[data-invalid]").length)return!1;var i=this.$checkedRadio.val()?this.$checkedRadio.val().toLocaleLowerCase():this.$checkedRadio.val();return this.endPoint=this.buildEndPoint(i),this.useAPDVService||(this.endPoint=this.endPoint?this.endPoint.replace("{searchValue}",this.searchValue).replace("{model}",""):""),this.$dealerCount.html(""),this.$dealerItems.html(""),this.$searchError.html(""),h.ajax({url:this.endPoint,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"GET",statusCode:{404:h.proxy(this.showNotFoundError,this),400:h.proxy(this.showNotFoundError,this),500:h.proxy(this.showNotFoundError,this)},beforeSend:h.proxy(this.setHeaders,this),success:h.proxy(this.processDealers,this),fail:h.proxy(this.showFailed,this),complete:h.proxy(this.processComplete,this)}),!0},setHeaders:function(e){this.$spinner.removeClass(this.cfg.hideClass),e.setRequestHeader("locale",this.locale),e.setRequestHeader("clientApplicationId",this.clientApplicationId)},showFailed:function(){this.$searchOptionContainer.show(),this.$dealerItems.html("").addClass(this.cfg.hideClass),this.$searchError.html(this.serverErrorMessage),this.$searchResults.slideDown(this.cfg.animateSpeed)},showNotFoundError:function(e){var t=this.serverErrorMessage;e&&400===e.status&&(t=this.noDealersMessage),this.$searchOptionContainer.show(),this.$dealerItems.html("").addClass(this.cfg.hideClass),this.$searchError.html(t),this.$searchResults.slideDown(this.cfg.animateSpeed)}})}(cowp.$,cowp._),function(o,l){o.extend(!0,cowp.conf.cmp,{gmit_gf_dealer_selector_thank_you:{name:"gmit_gf_dealer_selector_thank_you",dataDealer:"dealer",dealerAddress:".gmit-gf-dealer-address1",dealerEmail:".gmit-gf-dealer-contact-email-value",dealerHours:".gmit-gf-dealer-hours-value",dealerPhone:".gmit-gf-dealer-contact-phone-value",dealerPostalCodeCity:".gmit-gf-dealer-city-postal",dealerSelector:".gmit-gf-dealer",listSelector:".gmit-gf-list",dealerSelectorContainer:".gmit-gf-dealer-selector",dealerSelectorV2Container:".gmit-gf-dealer-selector-v2",dealerWeb:".gmit-gf-dealer-contact-web-value"}}),cowp.mod.gmit_gf_dealer_selector_thank_you=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$dealerName=e.find(this.cfg.dealerSelector),this.$dealerAddress1=e.find(this.cfg.dealerAddress),this.$dealerPostalCodeCity=e.find(this.cfg.dealerPostalCodeCity),this.$dealerPhoneValue=e.find(this.cfg.dealerPhone),this.$dealerWebValue=e.find(this.cfg.dealerWeb),this.$dealerEmailValue=e.find(this.cfg.dealerEmail),this.$dealerHoursValue=e.find(this.cfg.dealerHours),this.$formattedTime="",this.$formattedHour="",this.$formattedDayOfWeek="",this.separator="",this.$list=e.find(this.cfg.listSelector),this.listId=cowp.util.getModuleId(this.$list),this.listCheck=0<this.listId,this.sandbox.subscribe(this.id,this)},prepare:function(){var e=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name),t=e.find(this.cfg.dealerSelectorContainer),i=cowp.util.getModuleId(t),a=e.find(this.cfg.dealerSelectorV2Container),s=cowp.util.getModuleId(a);0<i&&this.sandbox.subscribe(i,this),0<s&&this.sandbox.subscribe(s,this),0<this.listCheck&&this.sandbox.subscribe(this.listId,this)},onGmitGfUpdateDealer:function(i){var a=this,e=o("<a></a>"),t=o("<a></a>"),s=o("<a></a>"),n=cowp.conf.gf.dealerInfo,r={};this.$dealerAddress1.empty(),this.$dealerPostalCodeCity.empty(),this.$dealerName.empty(),this.$dealerPhoneValue.empty(),this.$dealerWebValue.empty(),this.$dealerEmailValue.empty(),i&&this.listCheck?(l.forIn(n,function(e,t){if(l.hasIn(i,e))switch(t){case"dealerId":l.set(r,"id",l.get(i,e)),l.set(r,t,l.get(i,e));break;case"dealerGeneralOpeningHour":l.set(r,t,i.generalOpeningHour);break;case"dealerPhoneNumber":l.set(r,t,a.formatPhoneNumber(l.get(i,n.dealerLocale),l.get(i,e)));break;default:l.set(r,t,l.get(i,e))}}),l.hasIn(i,"selected")&&i.selected?this.fire("gmitGfAddListItem",r,[this.listId]):this.fire("gmitGfRemoveListItem",r,[this.listId])):i&&(i.dealerName&&this.$dealerName.html(i.dealerName),i.dealerUrl&&(e.attr("href","http://".concat(i.dealerUrl)),e.attr("target","_new"),e.html(i.dealerUrl),this.$dealerWebValue.html(e)),i.generalContact&&(i.generalContact.phone1&&(s.attr("href","tel:".concat(i.generalContact.phone1)),s.html(i.generalContact.phone1),this.$dealerPhoneValue.html(s)),i.generalContact.email1&&(t.attr("href","mailto:".concat(i.generalContact.email1)),t.html(i.generalContact.email1),this.$dealerEmailValue.html(t))),i.address&&(i.address.addressLine1&&this.$dealerAddress1.html(i.address.addressLine1),this.$dealerPostalCodeCity.html(this.formatCityPostalCode(i.address))),i.generalOpeningHour&&this.$dealerHoursValue.html(i.generalOpeningHour))},onGmitGfClearDealers:function(){this.listCheck&&this.fire("gmitGfClearList",[this.listId])},formatCityPostalCode:function(e){var t="";return e&&(e.postalCode&&(t="".concat(e.postalCode," ")),e.cityName&&(t+=e.cityName)),t},formatPhoneNumber:function(e,t){return"US"===e?t.replace(/(\d{3})(\d{3})(\d{4})/,"($1)$2-$3"):t}})}(cowp.$,cowp._),function(n,l){n.extend(!0,cowp.conf.cmp,{gmit_gf_dealer_selector_v2:{name:"gmit_gf_dealer_selector_v2",animateSpeed:500,btlCaller:"btl",caller:"x-caller",closeDealer:".gmit-gf-selected-dealer .gmit-gf-icon-close",codeActorCC_VN:".js-gmit-gf-hidden-dealer-code-actor-cc-vn",dataAutoPopulateList:"auto-populate-list",dataClientApplicationId:"client-application-id",dataDealer:"dealer",dataDealerFound:"dealer-found-text",dataEndPoints:"end-points",dataExcludeActivities:"exclude-activities",dataFilterServiceTypes:"filter-service-types",dataLinkToField:"link-to-field",dataLocale:"locale",dataNoDealer:"no-dealer-message",dataNoDealerSelected:"no-dealer-selected",dataServerError:"server-error-message",dealerBac:".js-gmit-gf-hidden-dealer-bac",dealerBacIdQueryParam:"bacId",dealerBacQueryParam:"dealerBAC",dealerCity:".js-gmit-gf-hidden-dealer-city",dealerEditable:"dealerEditable",dealerId:".js-gmit-gf-hidden-dealer-id:not('.js-gmit-gf-sales-lead-dealer-id')",dealerName:".js-gmit-gf-hidden-brand-site-name",dealerNameCityStateTextSelector:".js-gmit-gf-dealer-city-state",dealerPostalCode:".js-gmit-gf-hidden-dealer-postal-code",dataPlaceholderZip:"placeholder-zip",dataPlaceholderCityState:"placeholder-city-state",dataPlaceholderDealer:"placeholder-dealer",dataMaxLengthZip:"max-length-zip",dataMaxLengthCityState:"max-length-city-state",dataMaxLengthDealer:"max-length-dealer",dataZipValidation:"zip-validation",dealerStreet:".js-gmit-gf-hidden-dealer-street",dealerUpsc:".js-gmit-gf-hidden-dealer-upsc",dealerUSLocale:"dealerUSLocale",dealerZipRadioSelector:"#gmit-gf-dealer-search-zip",hiddenContainerSelector:".gmit-gf-dealer-hidden-section",hideClass:"gmit-gf-hide",inputSelector:":input",newSearchSelector:".js-gmit-gf-new-search",radioButtonSelector:".gmit-gf-input-radio",resultListLengthHeadlineReplace:"{gmit-gf-result-list-length}",searchDropDownSelector:".gmit-gf-select-dropdown",searchInputSelector:".gmit-gf-input-text",searchOptionContainerSelector:".gmit-gf-search-options",searchOptionSelector:".gmit-gf-multioption-radio",searchResultComponent:".gmit-gf-search-result",searchSelector:".js-gmit-gf-search",searchTextSelector:".gmit-gf-text-field.js-gmit-gf-dealer-search",searchValueHeadlineReplace:"{gmit-gf-search-value}",selectDealer:".gmit-gf-dealer",selectedDealerAddress:".gmit-gf-selected-dealer-address",selectedDealerName:".gmit-gf-selected-dealer-name",selectedDealerSelector:".gmit-gf-selected-dealer",siteGeo:".js-gmit-gf-hidden-dealer-site-geo",rrdi:".js-gmit-gf-hidden-dealer-rrdi",spinnerSelector:".gmit-gf-loader",thankYouSelector:".gmit-gf-thank-you",validationItems:".gmit-gf-input-radio, .gmit-gf-input-text",vehicleSelector:".gmit-gf-vehicle-selector"}}),cowp.mod.gmit_gf_dealer_selector_v2=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.clientApplicationId=e.data(this.cfg.dataClientApplicationId),this.$closeDealer=e.find(this.cfg.closeDealer),this.$newSearchSelector=e.find(this.cfg.newSearchSelector),this.$searchOption=e.find(this.cfg.searchOptionSelector),this.$searchText=e.find(this.cfg.searchTextSelector),this.$dealerNameCityStateText=e.find(this.cfg.dealerNameCityStateTextSelector),this.$searchButton=e.find(this.cfg.searchSelector),this.$searchOptionContainer=e.find(this.cfg.searchOptionContainerSelector),this.filterSeviceTypes=e.data(this.cfg.dataFilterServiceTypes),this.excludeActivities=e.data(this.cfg.dataExcludeActivities),this.$hiddenValues=e.find(this.cfg.hiddenContainerSelector),this.$selectedDealer=e.find(this.cfg.selectedDealerSelector),this.$spinner=e.find(this.cfg.spinnerSelector),this.spinnerId=cowp.util.getModuleId(this.$spinner),this.spinnerCheck=0<this.spinnerId,this.$searchResultComponent=e.find(this.cfg.searchResultComponent),this.searchResultComponentId=cowp.util.getModuleId(this.$searchResultComponent),this.searchResultComponentCheck=0<this.searchResultComponentId,this.$validationElements=e.find(this.cfg.validationItems),this.$radioButtons=this.$searchOption.find(this.cfg.radioButtonSelector),this.$searchInput=this.$searchText.find(this.cfg.searchInputSelector),this.$dealerNameCityStateInput=this.$dealerNameCityStateText.find(this.cfg.searchInputSelector).length?this.$dealerNameCityStateText.find(this.cfg.searchInputSelector):this.$dealerNameCityStateText.find(this.cfg.searchDropDownSelector),this.dealerFoundText=e.data(this.cfg.dataDealerFound),this.locale=e.data(this.cfg.dataLocale),this.noDealersMessage=e.data(this.cfg.dataNoDealer),this.noDealerSelected=e.data(this.cfg.dataNoDealerSelected),this.serverErrorMessage=e.data(this.cfg.dataServerError),this.autoPopulateList=!!e.data(this.cfg.dataAutoPopulateList),this.endPoints=e.data(this.cfg.dataEndPoints),this.$selectedDealerAddress1=this.$ctx.find(this.cfg.selectedDealerAddress),this.$selectedDealerName=this.$ctx.find(this.cfg.selectedDealerName),this.dealer="",this.dealerObj={},this.markersObj={markers:[]},this.dealertempleteObj={},this.locationCookieObject=cowp.conf.gf.cookieObject,this.$checkedRadio=n([]),this.searchValue="",this.endPoint="",this.searchByPostalCode="",this.searchByCity="",this.searchByName="",this.showDealerErrorVisible=!1,this.focusSearchField=!0,this.$requestType=cowp.util.getClosestModule(e,cowp.conf.cmp.gmit_gf_request_type.name),this.$vehicleSelector=this.$requestType.find(this.cfg.vehicleSelector),this.vehicleSelectorId=cowp.util.getModuleId(this.$vehicleSelector),this.$zipcodeField=this.$requestType.find("#".concat(e.data(this.cfg.dataLinkToField))),this.zipCodeFieldId=cowp.util.getModuleId(this.$zipcodeField.parent()),this.zipcodeFieldCheck=0<this.zipCodeFieldId,this.searchTextFieldInputId=cowp.util.getModuleId(this.$searchText),this.searchTextFieldCheck=0<this.searchTextFieldInputId,this.$thankYou=this.$requestType.find(this.cfg.thankYouSelector),this.thankYouId=cowp.util.getModuleId(this.$thankYou),this.thankYouCheck=0<this.thankYouId,this.dealerNameCityStateInputId=cowp.util.getModuleId(this.$dealerNameCityStateText),this.dealerNameCityStateTextFieldCheck=0<this.dealerNameCityStateInputId,this.requestTypeId=cowp.util.getModuleId(this.$requestType),this.bacValue=cowp.util.gf.loadQueryString(this.cfg.dealerBacQueryParam)?cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString(this.cfg.dealerBacQueryParam)):cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString(this.cfg.dealerBacIdQueryParam)),this.dealerEditable=cowp.util.gf.sanitizeData(cowp.util.gf.loadQueryString(this.cfg.dealerEditable))||cowp.util.gf.loadQueryString(this.cfg.caller)===this.cfg.btlCaller,this.placeholderZip=e.data(this.cfg.dataPlaceholderZip),this.placeholderCityState=e.data(this.cfg.dataPlaceholderCityState),this.placeholderDealer=e.data(this.cfg.dataPlaceholderDealer),this.maxLengthZip=e.data(this.cfg.dataMaxLengthZip),this.maxLengthCityState=e.data(this.cfg.dataMaxLengthCityState),this.maxLengthDealer=e.data(this.cfg.dataMaxLengthDealer),this.zipValidation=e.data(this.cfg.dataZipValidation),this.sandbox.subscribe(this.id,this)},prepare:function(){0<this.requestTypeId&&this.sandbox.subscribe(this.requestTypeId,this),0<this.vehicleSelectorId&&this.sandbox.subscribe(this.vehicleSelectorId,this),this.spinnerCheck&&this.sandbox.subscribe(this.spinnerId,this),this.searchResultComponentCheck&&this.sandbox.subscribe(this.searchResultComponentId,this),this.searchTextFieldCheck&&this.sandbox.subscribe(this.searchTextFieldInputId,this),this.zipcodeFieldCheck&&this.sandbox.subscribe(this.zipCodeFieldId,this),this.thankYouCheck&&this.sandbox.subscribe(this.thankYouId,this),this.dealerNameCityStateTextFieldCheck&&this.sandbox.subscribe(this.dealerNameCityStateInputId,this)},finish:function(){var e={};switch(this.$ctx.on("click.newSearch",this.cfg.newSearchSelector,n.proxy(this.newSearchEvent,this)).on("click.close",this.cfg.closeDealer,n.proxy(this.closeSelectedDealerEvent,this)).on("click.search",this.cfg.searchSelector,n.proxy(this.searchForDealer,this)).on("click.update",this.cfg.radioButtonSelector,n.proxy(this.onUpdateSearchByField,this)),this.searchTextFieldCheck&&this.fire("gmitGfSetupTextFieldBlurEvent",[this.searchTextFieldInputId]),this.zipcodeFieldCheck&&this.fire("gmitGfSetupTextFieldBlurEvent",[this.zipCodeFieldId]),this.fire("gmitGfDealerSelected",{valid:!1},[this.id]),this.$radioButtons.filter(":checked").length?this.$radioButtons.filter(":checked").val():this.$radioButtons.filter(":first").val()){case"name":e.placeholder=this.placeholderDealer,e.removeValidations=this.zipValidation,e.maxLength=this.maxLengthDealer,this.fire("gmitGfUpdateValue",e,[this.searchTextFieldInputId]);break;case"city":e.placeholder=this.placeholderCityState,e.removeValidations=this.zipValidation,e.maxLength=this.maxLengthCityState,this.fire("gmitGfUpdateValue",e,[this.searchTextFieldInputId]);break;case"zip":e.placeholder=this.placeholderZip,e.validations=this.zipValidation,e.maxLength=this.maxLengthZip,this.fire("gmitGfUpdateValue",e,[this.searchTextFieldInputId])}this.loadPreSelectedDealer()},addDealer:function(e){var a=e||{dealerName:"",address:{}},s=this.locale,n={},r=cowp.conf.gf.dealerInfo,o=this.cfg.dealerUSLocale;n.searchResultRows=[],l.isEmpty(this.dealertempleteObj)||l.each(this.dealertempleteObj.lines,function(e){l.each(e,function(e){var t,i=l.replace(e,"js-","");l.hasIn(a,r[i])&&(t=l.get(a,r[i],""),"dealerPostalCode"===i&&s===r[o]?t=t.replace(/(\d{5})(\d{4})/,"$1-$2"):"dealerDistance"===i&&(t=t.toFixed(1)),n.searchResultRows.push({resultType:i,resultText:t}))})}),n.searchResultData=JSON.stringify(a),this.searchResultComponentCheck&&this.fire("gmitGfAddItem",n,[this.searchResultComponentId])},buildEndPoint:function(e){var t=l.find(l.get(this.endPoints,"endPointList"),l.matchesProperty("endPointTag",e)),i="";return t&&l.hasIn(t,"endPointUrl")&&t.endPointUrl&&(i=t.endPointUrl,l.hasIn(t,"urlParameters")&&t.urlParameters&&(i="".concat(i,"?").concat(n.param(t.urlParameters)))),i},clearHiddenValues:function(e){e&&e.find(this.cfg.inputSelector).val("")},onGmitGfListClosed:function(){this.$searchOptionContainer.slideDown(this.cfg.animateSpeed)},onGmitGfClearDealerList:function(){this.clearHiddenValues(),this.$searchResultComponent.slideUp(),this.fire("gmitGfClearSearchList",[this.searchResultComponentId])},closeSelectedDealerEvent:function(){this.$selectedDealer.slideUp(this.cfg.animateSpeed),this.$searchOptionContainer.slideDown(this.cfg.animateSpeed),this.clearHiddenValues(this.$hiddenValues),this.fire("gmitGfDealerSelected",{valid:!1},[this.id])},formatAddress:function(e){var t="";return e&&(t=e.addressLine1?"".concat(e.addressLine1,", "):"",this.locale===this.cfg.dealerUSLocale?t+=e.postalCode?"".concat(e.postalCode.replace(/(\d{5})(\d{4})/,"$1-$2")," "):"":t+=e.postalCode?"".concat(e.postalCode," "):"",t+=e.cityName),t},loadPreSelectedDealer:function(){var e=this.buildEndPoint("bac"),t={};(e=e?e.replace("{bac}",this.bacValue):"")&&this.bacValue&&"null"!==this.bacValue?(this.$searchOptionContainer.hide(),l.set(t,"display",!1),this.fire("gmitGfToggleSearchHeadline",t,[this.searchResultComponentId]),this.dealerSearchAjaxCall(e)):this.autoPopulateList&&this.loadDealersFromCookie()},dealerSearchAjaxCall:function(e){n.ajax({url:e,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=UTF-8",method:"GET",statusCode:{404:n.proxy(this.showNotFoundError,this),400:n.proxy(this.showNotFoundError,this),500:n.proxy(this.showNotFoundError,this)},beforeSend:n.proxy(this.setHeaders,this),success:n.proxy(this.processDealers,this),fail:n.proxy(this.showNotFoundError,this),complete:n.proxy(this.processComplete,this)})},loadDealersFromCookie:function(){if(this.$radioButtons.first().attr("checked","checked"),this.locationCookieObject&&l.hasIn(this.locationCookieObject,"location.zipcode")){var e={};e.text=this.locationCookieObject.location.zipcode,e.placeholder=this.placeholderZip,e.validations=this.zipValidation,e.maxLength=this.maxLengthZip,this.searchTextFieldCheck&&this.fire("gmitGfUpdateValue",e,[this.searchTextFieldInputId]),this.$searchButton.click()}},newSearchEvent:function(e){e.preventDefault(),this.searchResultComponentCheck&&this.fire("gmitGfShowSearchResult",[this.searchResultComponentId]),this.$searchOptionContainer.slideDown(this.cfg.animateSpeed)},processComplete:function(){this.spinnerCheck&&this.fire("gmitGfHideLoader",[this.spinnerId]),this.searchResultComponentCheck&&this.fire("gmitGfShowSearchResult",[this.searchResultComponentId])},processDealers:function(e){var t=e&&e.status&&"success"===e.status&&l.hasIn(e,"payload.dealers")&&e.payload.dealers?e.payload.dealers:[],i={certification:[]},a={};l.set(a,"exclude.activity",[]),l.each(this.filterSeviceTypes,function(e){i.certification.push(e)}),l.each(this.excludeActivities,function(e){a.exclude.activity.push(e)}),i.certification.length&&(t=l.filter(t,i)),a.exclude.activity.length&&l.remove(t,a),t.length?(this.setDealerResultHeadline(t),l.each(t,n.proxy(this.addDealer,this))):(this.$searchOptionContainer.show(),this.$closeDealer.show(),this.$newSearchSelector.show(),this.searchResultComponentCheck&&(this.fire("gmitGfClearSearchResult",[this.searchResultComponentId]),this.fire("gmitGfToggleDisplaySearchList",!1,[this.searchResultComponentId])),this.showNotFoundError(e,!0)),1===t.length&&this.searchResultComponentCheck&&(this.fire("gmitGfSelectFirstItem",[this.searchResultComponentId]),this.fire("gmitGfDealerSelected",{valid:!0},[this.id])),1<t.length&&this.searchResultComponentCheck&&this.fire("gmitGfShowSearchResult",[this.searchResultComponentId]),"true"!==this.dealerEditable&&(this.$closeDealer.hide(),this.$newSearchSelector.hide(),this.searchResultComponentCheck&&this.fire("gmitGfDisableList",[this.searchResultComponentId]))},onGmitGfTextFieldUpdated:function(e){var t,i="",a={};if(l.hasIn(e,"value")&&e.value&&l.hasIn(e,"sandboxId")&&e.sandboxId&&(!this.bacValue||"null"===this.bacValue))if(t=e.sandboxId,i=e.value,a={},t===this.zipCodeFieldId)this.focusSearchField=!1,this.searchByPostalCode=i,n(this.cfg.dealerZipRadioSelector).click(),cowp.util.gf.applyBusinessRules(this.$ctx),a.text=i,a.placeholder=this.placeholderZip,a.validations=this.zipValidation,a.maxLength=this.maxLengthZip,this.searchTextFieldCheck&&this.fire("gmitGfUpdateValue",a,[this.searchTextFieldInputId]),this.$searchButton.trigger("click"),this.fire("gmitGfDealerSelected",{},[this.id]);else if(t===this.searchTextFieldInputId){switch(this.$radioButtons.filter(":checked").length?this.$radioButtons.filter(":checked").val():this.$radioButtons.filter(":first").val()){case"name":this.searchByName=i;break;case"city":this.searchByCity=i;break;case"zip":this.searchByPostalCode=i}this.showDealerErrorVisible&&window.setTimeout(n.proxy(this.onShowDealerNotSelectedError,this),10)}},onShowDealerNotSelectedError:function(){this.$searchInput.next(".error").append(cowp.util.gf.addErrorLabel(this.noDealerSelected)),this.$searchResultComponent.addClass("error"),this.$searchInput.parent().addClass("error"),this.$searchInput.attr("data-invalid",""),this.showDealerErrorVisible=!0},onResetshowDealerErrorVisible:function(){this.$searchInput.next(".error").html(""),this.$searchInput.parent().removeClass("error"),this.$searchResultComponent.removeClass("error"),this.$searchInput.removeAttr("data-invalid"),this.showDealerErrorVisible=!1},onGmitGfCarlineSelected:function(){var e=this.$radioButtons.filter(":checked");e.length&&e.trigger("change")},onGmitGfItemTempleteSetup:function(e){this.dealertempleteObj=e},onGmitGfItemSelected:function(e){var t,i=this.dealer||{},a=[],s={};this.dealer=e,this.dealerObj=this.dealer||{},this.$selectedDealerAddress1.empty(),this.$selectedDealerName.empty(),this.$selectedDealerAddress1.empty(),this.$selectedDealer.data(this.cfg.dataDealer,this.dealer),this.dealer&&(l.hasIn(this.dealer,"cadc")&&this.dealer.cadc?t=this.dealer.cadc:l.hasIn(this.dealer,"id")&&this.dealer.id&&(t=this.dealer.id.toString()),this.dealerObj.id=t,l.hasIn(this.dealer,"selected")&&this.dealer.selected?(i.valid=!0,l.hasIn(this.dealer,"bac")&&this.dealer.bac&&this.$hiddenValues.find(this.cfg.dealerBac).val(this.dealer.bac),l.hasIn(this.dealer,"upsc")&&this.dealer.upsc&&this.$hiddenValues.find(this.cfg.dealerUpsc).val(this.dealer.upsc),l.hasIn(this.dealer,"siteGeo")&&this.dealer.siteGeo&&this.$hiddenValues.find(this.cfg.siteGeo).val(this.dealer.siteGeo),l.hasIn(this.dealer,"RRDI")&&this.dealer.RRDI&&this.$hiddenValues.find(this.cfg.rrdi).val(this.dealer.RRDI),l.hasIn(this.dealer,"codeActorCC_VN")&&this.dealer.codeActorCC_VN&&this.$hiddenValues.find(this.cfg.codeActorCC_VN).val(this.dealer.codeActorCC_VN),this.$hiddenValues.find(this.cfg.dealerId).val()&&(a=l.split(this.$hiddenValues.find(this.cfg.dealerId).val(),",")),l.includes(a,t)||(a.push(t),this.$hiddenValues.find(this.cfg.dealerId).val(a.toString()),l.hasIn(this.dealer,"geolocation")&&this.dealer.geolocation&&(s.name=t,s.coordinates=this.dealer.geolocation,this.markersObj.markers.push(s))),l.hasIn(this.dealer,"dealerName")&&this.dealer.dealerName&&(this.$selectedDealerName.html(this.dealer.dealerName),this.$hiddenValues.find(this.cfg.dealerName).val(this.dealer.dealerName)),l.hasIn(this.dealer,"address")&&this.dealer.address&&(this.$selectedDealerAddress1.html(this.formatAddress(this.dealer.address)),l.hasIn(this.dealer.address,"addressLine1")&&this.dealer.address.addressLine1&&this.$hiddenValues.find(this.cfg.dealerStreet).val(this.dealer.address.addressLine1),l.hasIn(this.dealer.address,"postalCode")&&this.dealer.address.postalCode&&this.$hiddenValues.find(this.cfg.dealerPostalCode).val(this.dealer.address.postalCode),l.hasIn(this.dealer.address,"cityName")&&this.dealer.address.cityName&&this.$hiddenValues.find(this.cfg.dealerCity).val(this.dealer.address.cityName)),this.onResetshowDealerErrorVisible()):(this.$hiddenValues.find(this.cfg.dealerId).val()&&(a=l.split(this.$hiddenValues.find(this.cfg.dealerId).val(),",")),l.includes(a,t)&&(l.pull(a,t),this.$hiddenValues.find(this.cfg.dealerId).val(a.toString()),l.hasIn(this.dealer,"geolocation")&&this.dealer.geolocation&&(s.name=t,s.coordinates=this.dealer.geolocation,l.pullAllWith(this.markersObj.markers,[s],l.isEqual)),l.isEmpty(a)&&(i.valid=!1,window.setTimeout(n.proxy(this.onShowDealerNotSelectedError,this),10))))),this.$selectedDealer.length&&(this.$searchResultComponent.slideUp(this.cfg.animateSpeed),this.$searchOptionContainer.slideUp(this.cfg.animateSpeed),this.$closeDealer.show(),this.$newSearchSelector.show(),this.$selectedDealer.slideDown(this.cfg.animateSpeed)),this.fire("gmitGfUpdateDealer",this.dealerObj,[this.id]),this.fire("gmitGfDealerSelected",i,[this.id])},setDealerResultHeadline:function(e){var t={};t.text=l.replace(this.dealerFoundText,this.cfg.searchValueHeadlineReplace,this.$searchInput.val()),t.text=l.replace(t.text,this.cfg.resultListLengthHeadlineReplace,e.length),this.searchResultComponentCheck&&this.fire("gmitGfSetSearchHeadline",t,[this.searchResultComponentId])},onUpdateSearchByField:function(e){var t=n(e.currentTarget).val(),i={};if(this.searchTextFieldCheck){switch(t){case"name":this.fire("gmitGfSetupAutoCompleteUrl",this.buildEndPoint("nameAutoComplete"),[this.searchTextFieldInputId]),this.dealerNameCityStateTextFieldCheck&&this.fire("gmitGfSetupAutoCompleteUrl",this.buildEndPoint("cityAutoComplete"),[this.dealerNameCityStateInputId]),i.text=this.searchByName,i.placeholder=this.placeholderDealer,i.removeValidations=this.zipValidation,i.maxLength=this.maxLengthDealer,this.fire("gmitGfUpdateValue",i,[this.searchTextFieldInputId]);break;case"city":this.fire("gmitGfSetupAutoCompleteUrl",this.buildEndPoint("cityAutoComplete"),[this.searchTextFieldInputId]),i.text=this.searchByCity,i.placeholder=this.placeholderCityState,i.removeValidations=this.zipValidation,i.maxLength=this.maxLengthCityState,this.fire("gmitGfUpdateValue",i,[this.searchTextFieldInputId]);break;case"zip":this.fire("gmitGfSetupAutoCompleteUrl",this.buildEndPoint("zipAutoComplete"),[this.searchTextFieldInputId]),i.text=this.searchByPostalCode,i.placeholder=this.placeholderZip,i.validations=this.zipValidation,i.maxLength=this.maxLengthZip,this.fire("gmitGfUpdateValue",i,[this.searchTextFieldInputId])}this.focusSearchField&&this.$searchInput.focus(),this.focusSearchField=!0}},searchForDealer:function(e){var t=this,i=cowp.util.gf.sanitizeData(this.$dealerNameCityStateInput.val())?cowp.util.gf.sanitizeData(this.$dealerNameCityStateInput.val()).split(", "):[];if(e.preventDefault(),this.$checkedRadio=this.$radioButtons.filter(":checked"),this.searchValue=cowp.util.gf.sanitizeData(this.$searchInput.val()),this.endPoint="",0===this.$checkedRadio.length||!this.searchValue)return this.$radioButtons.trigger("change"),setTimeout(function(){t.$searchInput.trigger("change"),t.$dealerNameCityStateInput.trigger("change")},1),!1;if(this.$checkedRadio.filter(":checked[data-invalid]").length)return!1;if(this.$searchInput.filter("[data-invalid]").length)return!1;var a=this.$checkedRadio.val()?this.$checkedRadio.val().toLocaleLowerCase():this.$checkedRadio.val();return this.endPoint=this.buildEndPoint(a),this.endPoint=this.endPoint?this.endPoint.replace("{searchValue}",this.searchValue).replace("{model}","").replace(",","/").replace(" ",""):"",this.$dealerNameCityStateText.is(":visible")&&i.length&&(1===i.length?this.endPoint="".concat(this.endPoint,"&state=").concat(i[0]):2===i.length&&(this.endPoint="".concat(this.endPoint,"&city=").concat(i[0],"&state=").concat(i[1]))),this.searchResultComponentCheck&&this.fire("gmitGfClearSearchResult",[this.searchResultComponentId]),this.fire("gmitGfClearDealers",[this.id]),this.clearHiddenValues(this.$hiddenValues),this.dealerSearchAjaxCall(this.endPoint),!0},setHeaders:function(e){this.spinnerCheck&&this.fire("gmitGfShowLoader",[this.spinnerId]),this.searchResultComponentCheck&&this.fire("gmitGfHideSearchResult",[this.searchResultComponentId]),e.setRequestHeader("locale",this.locale),e.setRequestHeader("clientApplicationId",this.clientApplicationId)},onGmitGfSubmit:function(){this.thankYouCheck&&this.fire("gmitGfAddMapMarkers",this.markersObj,[this.thankYouId])},showNotFoundError:function(e,t){var i=this.serverErrorMessage;(e&&400===e.status||t)&&(i=this.noDealersMessage),this.$searchOptionContainer.show(),this.searchResultComponentCheck&&this.fire("gmitGfShowSearchError",i,[this.searchResultComponentId])}})}(cowp.$,cowp._),function(i){i.extend(!0,cowp.conf.cmp,{gmit_gf_double_opt_in:{name:"gmit_gf_double_opt_in",content:".js-gmit-gf-response",dataEndPoint:"end-point",dataWelcomePage:"welcome-page",dataSorryPage:"sorry-page",loaderClass:"q-loader",gmitLoaderClass:"gmit-gf-loader",contentToLoad:".q-grid-container"}}),cowp.mod.gmit_gf_double_opt_in=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx,t={leadid:cowp.util.gf.loadQueryString("leadid"),lang:cowp.util.gf.loadQueryString("lang")};this.endPoint="".concat(e.data(this.cfg.dataEndPoint),"?").concat(i.param(t)),this.$content=e.find(this.cfg.content),this.welcomePage=e.data(this.cfg.dataWelcomePage),this.sorryPage=e.data(this.cfg.dataSorryPage),this.endPoint&&t.leadid&&t.lang?i.ajax({url:this.endPoint,statusCode:{0:i.proxy(this.responseFail,this)},processData:!1,method:"GET",success:i.proxy(this.responseSuccess,this),fail:i.proxy(this.responseFail,this)}):this.responseFail()},getPartial:function(e){var t="".concat(e," ").concat(this.cfg.contentToLoad);cowp.util.loadUrl(this.$content,t).done(i.proxy(this.showContent,this)).fail(i.proxy(this.showError,this))},removeLoader:function(){this.$content.removeClass(this.cfg.loaderClass),this.$content.removeClass(this.cfg.gmitLoaderClass)},responseSuccess:function(e){e&&200===e.statusCode?this.getPartial(this.welcomePage):this.responseFail()},responseFail:function(){this.getPartial(this.sorryPage)},showContent:function(){this.removeLoader(),this.$content.children().fadeIn(cowp.conf.ui.fade.speed),window.picturefill(),cowp.util.loadNewModules(this.$content,this.sandbox)},showError:function(e){this.removeLoader(),cowp.util.ajaxError(e)}})}(cowp.$),function(a,i){a.extend(!0,cowp.conf.cmp,{gmit_gf_dropdown:{name:"gmit_gf_dropdown",dropdownSelector:".gmit-gf-select-dropdown",labelSelector:".gmit-gf-label-text",populateField:"populate-field"}}),cowp.mod.gmit_gf_dropdown=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.locationCookieObject=cowp.conf.gf.cookieObject,e.on("change.rules",this.cfg.dropdownSelector,a.proxy(this.applyBusinessRule,this)),this.$dropdown=e.find(this.cfg.dropdownSelector),this.$label=e.find(this.cfg.labelSelector),this.placeholderTxt=this.$dropdown.data("placeholder"),this.dropdownType=this.$dropdown.data("type"),this.dropdownId=this.$dropdown.attr("id"),this.sandbox.subscribe(this.id,this)},prepare:function(){var e=cowp.util.gf.prefillSelectableItems(this.dropdownId);e&&this.$dropdown.val(e)},finish:function(){this.$dropdown.off("focus"),this.$dropdown.data(this.cfg.populateField)&&this.loadFieldFromCookie(this.$dropdown.data(this.cfg.populateField))},changeEvent:function(e){var t={},i=a(e.currentTarget).find(":selected");t.coTwoImage=i.data("co-two-image"),t.endPointList=this.$dropdown.data("end-point-list"),t.featureId=i.data("feature-id"),t.headlineIndex=this.$dropdown.data("headline-index"),t.index=this.$dropdown.data("index"),t.imageReset=this.$dropdown.data("image-reset"),t.nextIndex=this.$dropdown.data("next-index"),t.segmentValue=i.data("segment"),t.selectedText=i.text(),t.setConfigString=this.$dropdown.data("config-string-set"),t.setPricing=this.$dropdown.data("set-pricing"),t.setTextGroup=this.$dropdown.data("text-group"),t.type=this.$dropdown.data("type"),t.value=i.val(),t.valueCheck=i.filter("[value]").length,e.preventDefault(),t&&this.fire("gmitGfDropdownChangeEvent",t,[this.id])},applyBusinessRule:function(){cowp.util.gf.applyBusinessRules(this.$ctx)},loadFieldFromCookie:function(e){var t={};switch(e){case"state":i.hasIn(this.locationCookieObject,"location.state")&&this.locationCookieObject.location.state&&(i.hasIn(this.locationCookieObject,"location.countryCode")&&this.locationCookieObject.location.countryCode?this.onGmitGfSelectValue(i.set(t,"value","".concat(this.locationCookieObject.location.countryCode,"-").concat(this.locationCookieObject.location.state))):this.onGmitGfSelectValue(i.set(t,"value",this.locationCookieObject.location.state)));break;case"city":i.hasIn(this.locationCookieObject,"location.city")&&this.locationCookieObject.location.city&&this.onGmitGfSelectValue(i.set(t,"value",this.locationCookieObject.location.city));break;case"zipCode":i.hasIn(this.locationCookieObject,"location.zipcode")&&this.locationCookieObject.location.zipcode&&this.onGmitGfSelectValue(i.set(t,"value",this.locationCookieObject.location.zipcode))}},onGmitGfResetDropdown:function(){this.$dropdown.find("option").remove().end().append('<option value="">'.concat(this.placeholderTxt,"</option>")).val("")},onGmitGfAddOption:function(e){e&&i.hasIn(e,"option")&&this.$dropdown.append(e.option)},onGmitGfSetupChangeEvent:function(){var e="";this.dropdownId&&(e="#".concat(this.dropdownId),this.$ctx.on("change.dropdown",e,a.proxy(this.changeEvent,this)))},onGmitGfSelectValue:function(e){e&&i.hasIn(e,"value")&&(e.value?this.$dropdown.val(e.value).change():this.$dropdown.val(e.value))}})}(cowp.$,cowp._),function(e,a){e.extend(!0,cowp.conf.cmp,{gmit_gf_dropdown_list:{name:"gmit_gf_dropdown_list",selector:".gmit-gf-dropdown-list",dropdownSelector:".gmit-gf-dropdown",hiddenFieldSelector:".gmit-gf-hidden-field"}}),cowp.mod.gmit_gf_dropdown_list=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx,t=e.find(this.cfg.dropdownSelector),i=e.find(this.cfg.hiddenFieldSelector);this.dropdownModuleIds=cowp.util.gf.setupModuleIdsFromArray(t),this.hiddenFieldModuleIds=cowp.util.gf.setupModuleIdsFromArray(i),this.sandbox.subscribe(this.id,this)},prepare:function(){cowp.util.gf.subscribeModuleIds(this.dropdownModuleIds,this),cowp.util.gf.subscribeModuleIds(this.hiddenFieldModuleIds,this)},onGmitGfResetDropdowns:function(e){var t=this,i=[];e&&a.hasIn(e,"index")&&(i=a.drop(this.dropdownModuleIds,e.index+1),a.each(i,function(e){0<e&&t.fire("gmitGfResetDropdown",[e])}))},onGmitGfAddOptionToDropdown:function(e){var t="",i={};e&&a.hasIn(e,"index")&&a.hasIn(e,"option")&&(t=this.dropdownModuleIds[e.index],i.option=e.option,0<t&&this.fire("gmitGfAddOption",i,[t]))},onGmitGfUpdateHiddenField:function(e){var t="",i={};e&&a.hasIn(e,"text")&&a.hasIn(e,"index")&&(i.text=e.text,0<(t=this.hiddenFieldModuleIds[e.index])&&this.fire("gmitGfUpdateValue",i,[t]))},onGmitGfSetupChangeEvents:function(){var t=this;a.each(this.dropdownModuleIds,function(e){0<e&&t.fire("gmitGfSetupChangeEvent",[e])})},onGmitGfDropdownChangeEvent:function(e){e&&this.fire("gmitGfDropdownChange",e,[this.id])},onGmitGfShowDropdownList:function(){this.$ctx.show()},onGmitGfHideDropdownList:function(){this.$ctx.hide()},onGmitGfSelectDropdownOption:function(e){var t="",i={};e&&a.hasIn(e,"value")&&a.hasIn(e,"index")&&(i.value=e.value,0<(t=this.dropdownModuleIds[e.index])&&this.fire("gmitGfSelectValue",i,[t]))}})}(cowp.$,cowp._),function(t,i){t.extend(!0,cowp.conf.cmp,{gmit_gf_follow_on:{name:"gmit_gf_follow_on",animateSpeed:500,agreementSelector:"#gmit-gf-follow-on-agreement",buttonSelector:"#gmit-gf-follow-on-button",confirmationMessageSelector:".gmit-gf-confirmation-message",followOnFormId:"#gmit-gf-follow-on-form-id",followOnMarketingId:"#gmit-gf-follow-on-marketing-id",followOnProgramId:"#gmit-gf-follow-on-program-id",followOnRequestType:"#gmit-gf-follow-on-sale-lead-request-type",requestTypeSelector:".gmit-gf-request-type"}}),cowp.mod.gmit_gf_follow_on=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$requestButton=e.find(this.cfg.buttonSelector),this.$confirmation=e.find(this.cfg.confirmationMessageSelector),this.$checkConfirmation=e.find(this.cfg.agreementSelector),this.$followOnRequestType=e.find(this.cfg.followOnRequestType),this.$followOnFormId=e.find(this.cfg.followOnFormId),this.$followOnProgramId=e.find(this.cfg.followOnProgramId),this.$followOnMarketingId=e.find(this.cfg.followOnMarketingId),this.$requestType=e.closest(this.cfg.requestTypeSelector),this.$form=this.$requestType.find("form"),this.submitUrl=this.$form.data("action-url"),this.formData={},this.sandbox.subscribe(this.id,this)},prepare:function(){this.$ctx.on("click",this.cfg.buttonSelector,t.proxy(this.submitRequestAgain,this))},onResetFollow:function(){this.blockSubmitUI(!1),this.$confirmation.slideUp(this.cfg.animateSpeed),this.$checkConfirmation.filter(":checked").removeAttr("checked")},replaceData:function(e){"salesLead.campaignCode"===e.name?e.value=this.$followOnProgramId.val():"salesLead.requestType"===e.name||"x-requestType"===e.name?e.value=this.$followOnRequestType.val():"x-formid"===e.name?e.value=this.$followOnFormId.val():"salesLead.referenceNumber"===e.name&&(e.value=this.$followOnMarketingId.val())},submitRequestAgain:function(e){e.preventDefault(),this.formData=this.$form.serializeArray(),this.formData=t.param(i.each(this.formData,t.proxy(this.replaceData,this))),0<this.$checkConfirmation.filter(":checked").length&&(this.blockSubmitUI(),t.ajax({url:this.submitUrl,data:this.formData,processData:!1,method:"POST",statusCode:{404:t.proxy(this.responseFail,this)},success:t.proxy(this.responseSuccess,this),fail:t.proxy(this.responseFail,this)}))},responseSuccess:function(){this.$confirmation.slideDown(this.cfg.animateSpeed)},responseFail:function(){return this.blockSubmitUI(!1),!1},blockSubmitUI:function(e){!(0<arguments.length&&void 0!==e)||e?(this.$requestButton.attr("disabled","disabled"),this.$checkConfirmation.attr("disabled","disabled")):(this.$requestButton.removeAttr("disabled"),this.$checkConfirmation.removeAttr("disabled"))}})}(cowp.$,cowp._),function(i){i.extend(!0,cowp.conf.cmp,{gmit_gf_groupbox:{name:"gmit_gf_groupbox",animateSpeed:500,collapseClassName:"gmit-gf-collapse",contentClassSelector:".gmit-gf-groupbox-content",dataMultiStepForm:"multi-step-form",expandedSelector:".gmit-gf-expanded",expanded:"gmit-gf-expanded",expanderClassName:"gmit-gf-expander",expanderSelector:".gmit-gf-groupbox-title.gmit-gf-expander",groupBoxContainer:".gmit-gf-group-box",groupBoxSelector:".gmit-gf-groupbox",groupBoxTitle:".gmit-gf-groupbox-title",iconMinusClass:"icon-minus",iconPlusClass:"icon-plus",iconClass:"icon",iconSelector:".icon",requestTypeSelector:".gmit-gf-request-type",titleIconSelector:".gmit-gf-groupbox-title .icon",windowSizeXLarge:"xlarge",windowSizeLarge:"large",windowSizeMedium:"medium"}}),cowp.mod.gmit_gf_groupbox=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.$requestType=this.$ctx.closest(this.cfg.requestTypeSelector),this.multiStepForm=this.$requestType.data(this.cfg.multiStepForm),this.$icon=this.$ctx.find(this.cfg.titleIconSelector),this.$groupBoxTitle=this.$ctx.find(this.cfg.groupBoxTitle),this.$container=i([]),this.$content=i([])},prepare:function(){this.$ctx.on("click",this.cfg.expanderSelector,i.proxy(this.listenToExpander,this)),this.addOrRemoveExpander(),cowp.util.debugModule(this)},finish:function(){},onBroadcastBreakpointChange:function(){this.addOrRemoveExpander()},onBroadcastWindowScroll:function(){},addOrRemoveExpander:function(){cowp.util.isWindowSize(this.cfg.windowSizeXLarge)||cowp.util.isWindowSize(this.cfg.windowSizeLarge)||cowp.util.isWindowSize(this.cfg.windowSizeMedium)?(this.$groupBoxTitle.removeClass(this.cfg.expanderClassName),this.$icon.removeClass(this.cfg.iconClass).removeClass(this.cfg.iconPlusClass).removeClass(this.cfg.iconMinusClass)):(this.$icon.addClass(this.cfg.iconClass),this.$groupBoxTitle.addClass(this.cfg.expanderClassName))},listenToExpander:function(e){var t=i(e.currentTarget);this.$container=t.closest(this.cfg.groupBoxContainer),this.$icon=t.find(this.cfg.iconSelector),this.$content=this.$container.find(this.cfg.contentClassSelector),this.$content.hasClass(this.cfg.expanded)?(this.$content.slideUp(this.cfg.animateSpeed,i.proxy(this.styleCollapse,this)),this.$content.removeClass(this.cfg.expanded),this.$icon.removeClass(this.cfg.iconMinusClass),this.$icon.addClass(this.cfg.iconPlusClass)):(this.$ctx.removeClass(this.cfg.collapseClassName),this.$container.removeClass(this.cfg.collapseClassName),this.$content.slideDown(this.cfg.animateSpeed),this.$content.addClass(this.cfg.expanded),this.$icon.removeClass(this.cfg.iconPlusClass),this.$icon.addClass(this.cfg.iconMinusClass))},styleCollapse:function(){this.$ctx.addClass(this.cfg.collapseClassName)}})}(cowp.$),function(e,i){e.extend(!0,cowp.conf.cmp,{gmit_gf_headline:{name:"gmit_gf_headline",selector:".gmit-gf-headline"}}),cowp.mod.gmit_gf_headline=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$headline=e.children(),this.preText=e.data("pre-text"),this.postText=e.data("post-text"),this.sandbox.subscribe(this.id,this)},onGmitGfSetHeadline:function(e){var t="";e&&i.hasIn(e,"newText")&&e.newText.length&&(t=e.newText,this.preText&&(t=this.preText+t),this.postText&&(t+=this.postText),this.$headline.html(t))},onGmitGfHideHeadline:function(){this.$ctx.hide()},onGmitGfShowHeadline:function(){this.$ctx.show()}})}(cowp.$,cowp._),function(e,t){e.extend(!0,cowp.conf.cmp,{gmit_gf_image:{name:"gmit_gf_image",selector:".gmit-gf-image",vehicleSelectorContainer:".gmit-gf-vehicle-selector"}}),cowp.mod.gmit_gf_image=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;e.hide(),this.imageData=e.data("image"),this.imageData&&(this.$ctx.attr("src",this.imageData),this.$ctx.show()),this.sandbox.subscribe(this.id,this)},onGmitGfSetImage:function(e){e&&t.hasIn(e,"src")&&this.$ctx.attr("src",e.src)},onGmitGfResetDefaultImage:function(){this.imageData?this.$ctx.attr("src",this.imageData):this.$ctx.hide()},onGmitGfHideImage:function(){this.$ctx.hide()},onGmitGfShowImage:function(){this.$ctx.show()}})}(cowp.$,cowp._),function(g){g.extend(!0,cowp.conf.cmp,{gmit_gf_layer_window:{name:"gmit_gf_layer_window",configSelector:".tooltip-config",configClass:"tooltip-config",revealClass:"reveal-modal,",dataHeadline:"layerHeadline",dataContent:"layerContent",dataSelector:"layer-selector",dataHeight:"layerHeight",dataWidth:"layerWidth",modal:"-reveal",qtipContent:".qtip-content",qtipTitlebar:".qtip-titlebar",qtipTip:".qtip-tip",headerStyle:"<span/>"}}),cowp.mod.gmit_gf_layer_window=cowp.mod.AtomicMod.extend({events:{},initElements:function(){},prepare:function(){function c(e,t){var i=e.attr("href").substr(1);return g("".concat(h.cfg.configSelector,"[data-").concat(h.cfg.dataSelector,'="').concat(i,'"]')).data(t)}function d(e){var t=c(e.target,h.cfg.dataWidth);cowp.util.isMobile()?(e.set("style.tip.corner",!1),e.set("position.target",cowp.dom.$window),e.set("position.at","bottom center"),e.set("style.width","100%")):(e.set("style.tip.corner",!0),e.set("position.target",!0),e.set("position.at","top center"),e.set("style.width",t))}var e=this.$ctx,h=this,t=e.attr("data-".concat(h.cfg.dataSelector));this.api={content:{text:function(e,t){var i=c(t.target,h.cfg.dataHeadline);return i&&t.set("content.title",g(h.cfg.headerStyle).append(i)),t.set("content.button",!0),c(t.target,h.cfg.dataContent)},tip:!1},events:{render:function(e,t){var i=c(t.target,h.cfg.dataHeight),a=c(t.target,h.cfg.dataWidth);i&&g(this).css("max-height",i),a&&g(this).css("max-width","none"),d(t)},visible:function(e,t){var i=g(this),a=c(t.target,h.cfg.dataHeight),s=i.outerHeight(),n=i.find(h.cfg.qtipContent),r=n.height(),o=i.find(h.cfg.qtipTitlebar).outerHeight(),l=i.find(h.cfg.qtipTip).outerHeight();a&&a<r&&n.height(s-o-l),d(t)}},hide:{event:"unfocus"},position:{my:"bottom center",at:"top center",viewport:cowp.dom.$window,adjust:{method:"flip none"}},show:{event:"click"},style:{tip:{corner:!1,border:0,width:24,height:12}}},h.api.id=t,g('a[href="#'.concat(t,'"]')).each(function(){g(this).on("click.".concat(h.cfg.name),function(e){e.preventDefault();var t=g.extend(!0,h.api,{show:{event:e.type,ready:!0}});g(this).qtip(t)})}),this.sandbox.subscribe(this.id,this)},finish:function(){var e=this.$ctx,t=cowp.$("#".concat(e.attr("id")).concat(this.cfg.modal));cowp.util.gf.isMobile()?t.on("click touchend",g.proxy(this.openLayerWindow,this)):t.on("click",g.proxy(this.openLayerWindow,this))},openLayerWindow:function(e){this.fire("setLayerWindow",{isLayerWindow:!0},[this.id]),cowp.util.gf.openLayerWindow(e)}})}(cowp.$),function(t){t.extend(!0,cowp.conf.cmp,{gmit_gf_link:{name:"gmit_gf_link",selector:".js-gmit-gf-click-link"}}),cowp.mod.gmit_gf_link=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.$link=this.$ctx.find(this.cfg.selector),this.linkId=this.$link.attr("id"),this.sandbox.subscribe(this.id,this)},finish:function(){},clickEvent:function(e){e.preventDefault(),this.fire("gmitGfLinkClick",[this.id])},onGmitGfSetupClickEvent:function(){var e="#".concat(this.linkId);this.$ctx.on("click.link",e,t.proxy(this.clickEvent,this))},onGmitGfHideLink:function(){this.$link.hide()},onGmitGfShowLink:function(){this.$link.show()}})}(cowp.$),function(r,o){r.extend(!0,cowp.conf.cmp,{gmit_gf_list:{name:"gmit_gf_list",selector:".gmit-gf-list",listItemTmpl:".gmit-gf-list-item-tmpl",listItemTmplClass:"gmit-gf-list-item-tmpl",contentSperator:".gmit-gf-content-separator",listItemClass:"gmit-gf-list-item",listItemClassSelector:".gmit-gf-list-item",hideClass:"gmit-gf-hide",dynamicUrl:"dynamic-url",linkSelector:".js-gmit-gf-click-link"}}),cowp.mod.gmit_gf_list=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$listItemTmpl=e.find(this.cfg.listItemTmpl),this.$item=this.$listItemTmpl.clone().removeClass(this.cfg.listItemTmplClass).addClass(this.cfg.listItemClass),this.sandbox.subscribe(this.id,this)},prepare:function(){},finish:function(){this.listItemTempleteSetup()},onGmitGfAddListItem:function(e){var i=this.cfg.dynamicUrl;o.templateSettings.interpolate=/{([\S]+?)}/g;var t=this.$item.html().replace(/\\\\/g,""),a=o.template(t),s=r("<div/>").attr("id",e.id).addClass(this.cfg.listItemClass).append(r(a(e))),n=s.find(this.cfg.linkSelector);o.each(n,function(e){var t=r(e);t.data(i)&&t.attr("href",t.data(i))}),this.$ctx.append(s),this.removeItemSeperator(1),cowp.util.gf.applyBusinessRules(this.$ctx)},onGmitGfRemoveListItem:function(e){this.$ctx.find("#".concat(e.id)).remove(),this.removeItemSeperator(1)},removeItemSeperator:function(e){r(this.$ctx.children()[e]).find(this.cfg.contentSperator).remove()},listItemTempleteSetup:function(){var e={},t=[];o.each(this.$listItemTmpl.children(),r.proxy(function(e){t.push(r(e).html().match(/[^{}]+(?=\})/g))},this)),e.lines=t,this.fire("gmitGfItemTempleteSetup",e,[this.id])},onGmitGfAddMarkerToList:function(e){var t=this;o.each(o.get(e,"markerList"),function(e){o.hasIn(e,"id")&&o.hasIn(e,"src")&&t.$ctx.find("#".concat(e.id)).find("img").attr("src",e.src)})},onGmitGfClearList:function(){this.$ctx.children(this.cfg.listItemClassSelector).remove()}})}(cowp.$,cowp._),cowp.$.extend(!0,cowp.conf.cmp,{gmit_gf_loader:{name:"gmit_gf_loader",selector:".gmit-gf-loader",hideClass:"gmit-gf-hide"}}),cowp.mod.gmit_gf_loader=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.sandbox.subscribe(this.id,this)},prepare:function(){this.onGmitGfHideLoader()},onGmitGfHideLoader:function(){this.$ctx.addClass(this.cfg.hideClass)},onGmitGfShowLoader:function(){this.$ctx.removeClass(this.cfg.hideClass)}}),function(t,r){t.extend(!0,cowp.conf.cmp,{gmit_gf_map:{name:"gmit_gf_map",dataApiKey:"api-key",dataGoogleApiUrl:"google-api-url",initMapFunction:"window.gmitGfInitMap",latDrilldown:"coordinates.latitude",lngDrilldown:"coordinates.longitude",selector:".gmit-gf-map",listSelector:".gmit-gf-list",markerImgSrc:"http://www.google.com/mapfiles/marker{label}.png"}}),cowp.mod.gmit_gf_map=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.$requestType=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name),this.map={},this.markers={},this.apiKey=this.$ctx.data(this.cfg.dataApiKey),this.googleApiUrl=this.$ctx.data(this.cfg.dataGoogleApiUrl),this.$list=this.$requestType.find(this.cfg.listSelector),this.listId=cowp.util.getModuleId(this.$list),this.listCheck=0<this.listId,this.mapMarkerListObj={markerList:[]},this.sandbox.subscribe(this.id,this)},prepare:function(){this.listCheck&&this.sandbox.subscribe(this.listId,this)},finish:function(){var i=this;cowp.dom.$window[0].gmitGfInitMap=function(){var e=new cowp.dom.$window[0].google.maps.LatLng(0,0),t=new cowp.dom.$window[0].google.maps.Map(i.$ctx[0],{center:e,zoom:8});i.map=t},window.setTimeout(t.proxy(this.loadApi,this),1e3)},onGmitGfToggleMarker:function(e){var i=this,a={},s="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;r.each(this.mapMarkerListObj.markerList,function(e){e.setMap(null),e=null}),this.mapMarkerListObj.markerList=[],this.bounds=new cowp.dom.$window[0].google.maps.LatLngBounds,r.each(r.get(e,"markers"),function(e){if(e&&!r.hasIn(i.markers,e.name)&&r.hasIn(e,i.cfg.latDrilldown)&&r.hasIn(e,i.cfg.lngDrilldown)){a=new cowp.dom.$window[0].google.maps.LatLng(r.get(e,i.cfg.latDrilldown),r.get(e,i.cfg.lngDrilldown)),n+=1;var t=new cowp.dom.$window[0].google.maps.Marker({position:a,label:s[n%s.length],id:e.name,map:i.map});r.set(t,"src",i.cfg.markerImgSrc.replace("{label}",t.label)),i.bounds.extend(t.position),i.mapMarkerListObj.markerList.push(t),i.markers=r.set(i.markers,t.name,t)}}),this.listCheck&&this.fire("gmitGfAddMarkerToList",this.mapMarkerListObj,[this.listId])},onGmitGfFocusMapMarker:function(){cowp.dom.$window[0].google.maps.event.trigger(cowp.$(this.cfg.selector)[0],"resize"),this.map.fitBounds(this.bounds),1===this.mapMarkerListObj.markerList.length&&this.map.setZoom(10)},loadApi:function(){var e="";"object"===_typeof(cowp.dom.$window[0].google)&&"object"===_typeof(cowp.dom.$window[0].google.maps)?cowp.dom.$window[0].gmitGfInitMap():this.apiKey&&(e="".concat(this.googleApiUrl,"key=").concat(this.apiKey),t.getScript(e).done(cowp.dom.$window[0].gmitGfInitMap))}})}(cowp.$,cowp._),cowp.$.extend(!0,cowp.conf.cmp,{gmit_gf_multioption_radio:{name:"gmit_gf_multioption_radio",selector:".gmit-gf-input-radio",radioGroup:".gmit-gf-radio-group"}}),cowp.mod.gmit_gf_multioption_radio=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$radioSelector=e.find(this.cfg.selector),this.radioGroup=e.find(this.cfg.radioGroup),this.radioGroupId=this.radioGroup.attr("id")},prepare:function(){var e=cowp.util.gf.prefillSelectableItems(this.radioGroupId);e&&this.$radioSelector.val(e)},finish:function(){this.$radioSelector.off("focus")}}),function(e,t){e.extend(!0,cowp.conf.cmp,{gmit_gf_paragraph:{name:"gmit_gf_paragraph",selector:".gmit-gf-paragraph",hideClass:"gmit-gf-hide",dataTestDealerFlag:"test-dealer-flag"}}),cowp.mod.gmit_gf_paragraph=cowp.mod.AtomicMod.extend({events:{},initElements:function(){},prepare:function(){this.sandbox.subscribe(this.id,this)},finish:function(){this.$ctx.data(this.cfg.dataTestDealerFlag)&&this.$ctx.hide()},onGmitGfToggleTestDealerParagraph:function(e){t.get(e,"toggleFlag")?this.$ctx.show():this.$ctx.hide()},onGmitGfShowGeneralError:function(){this.$ctx.removeClass(this.cfg.hideClass)},onGmitGfRemoveGeneralError:function(){this.$ctx.addClass(this.cfg.hideClass)}})}(cowp.$,cowp._),function(e,i){e.extend(!0,cowp.conf.cmp,{gmit_gf_pricing:{name:"gmit_gf_pricing",selector:".gmit-gf-pricing",tableSelector:".gmit-gf-table",headlineSelector:".gmit-gf-headline"}}),cowp.mod.gmit_gf_pricing=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$table=e.find(this.cfg.tableSelector),this.$headline=e.find(this.cfg.headlineSelector),this.tableId=cowp.util.getModuleId(this.$table),this.tableCheck=0<this.tableId,this.headlineId=cowp.util.getModuleId(this.$headline),this.headlineCheck=0<this.headlineId,this.sandbox.subscribe(this.id,this)},prepare:function(){this.tableCheck&&this.sandbox.subscribe(this.tableId,this),this.headlineCheck&&this.sandbox.subscribe(this.headlineId,this)},formatPrice:function(e){var t;return e?(t=parseInt(e,10).toFixed(),isNaN(t)?e:"$".concat(t.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))):""},onGmitGfHidePricing:function(){this.$ctx.hide()},onGmitGfShowPricing:function(){this.$ctx.show()},onGmitGfSetPricingColumn:function(e){var t={};e&&i.hasIn(e,"rowIndex")&&i.hasIn(e,"columnIndex")&&i.hasIn(e,"newText")&&(t.rowIndex=e.rowIndex,t.columnIndex=e.columnIndex,t.newText=e.newText,this.tableCheck&&this.fire("gmitGfSetTableColumn",t,[this.tableId]))},onGmitGfSetPricingHeadline:function(e){var t={};e&&i.hasIn(e,"newText")&&(t.newText=this.formatPrice(e.newText),e.newText||(t.newText=""),this.headlineCheck&&this.fire("gmitGfSetHeadline",t,[this.headlineId]))}})}(cowp.$,cowp._),function(c,s){c.extend(!0,cowp.conf.cmp,{gmit_gf_request_type:{name:"gmit_gf_request_type",accordionNavigationSelector:".accordion-navigation",activeAccordion:".accordion-navigation.active",activeClass:"active",activeSelector:".active",activeTabSelector:".tab-title.active",animateSpeed:500,brochureSelector:".gmit-gf-brochure",carlineDetailSelector:".js-gmit-gf-carline-detail",carlineDetailWrapperSelector:".gmit-gf-carline-detail-wrapper",carlineImageSelector:".js-gmit-gf-carline-image",carlineObjSelector:".gmit-gf-carline-obj",chosenDealerIdClass:".js-gmit-gf-sales-lead-dealer-id",clpIdSelector:".gmit-gf-clp-id",gaClientId:"#GACLIENTID",collapseClassName:"gmit-gf-collapse",commentFieldSelector:".q-mod-gmit-gf-comment-field",confirmationMessageSelector:".gmit-gf-confirmation-message",content:".content",contentActiveSelector:".gmit-gf-groupbox-content.active",contentFirstSelector:".gmit-gf-groupbox-content:first",dataActionUrl:"action-url",dataInvalidSelector:"[data-invalid]",dataMultiStepForm:"multi-step-form",dataPageLoadDtmScript:"page-load-dtm-script",dataSubmitForm:"submit-form",dataSuccessDtmScript:"success-dtm-script",dataTestDealerBac:"test-dealer-bac",dataTestDealerParagraph:'[data-test-dealer-flag="true"]',dataThankYouDtmScript:"thank-you-dtm-script",dataThankYouUrl:"thank-you-url",dataUseVehicleSelector:"use-vehicle-selector",dealerIdClass:".js-gmit-gf-hidden-dealer-id",dealerSelector:".gmit-gf-dealer-selector",dealerSelectorV2:".gmit-gf-dealer-selector-v2",disabledSelector:"disabled",expandedClass:"gmit-gf-expanded",expandIconSelector:".gmit-gf-expand-icon",followOnAgreementSelector:"#gmit-gf-follow-on-agreement",formElementSelectors:"input,textarea,select",formSelector:"form",generalSubmissionErrorClass:".js-gmit-gf-general-submission-error",groupBoxContainer:".gmit-gf-groupbox",groupBoxSelector:".gmit-gf-group-box",hiddenFieldSelector:"addToCommentField",iconMinusClass:"icon-minus",iconPlusClass:"icon-plus",layerWindowSelector:".gmit-gf-layer-window",liMultiStepLinkSelector:"li a.gmit-multi-step-link",linkAttribute:"link-type",linkType:"cancel",mapSelector:".gmit-gf-map",multiStepNextSelector:".js-gmit-gf-multi-step-next",multiStepPrevSelector:".js-gmit-gf-multi-step-prev",mutliStepLinkSelector:"a.gmit-multi-step-link",readyToSubmit:".gmit-gf-ready-to-submit",srClassSelector:".gmit-gf-sr",stepVisitedSelector:"gmit-gf-step-visited",submitSequestTypeSelector:"#gmit-gf-submit-request-type",extraSubmitSelector:".gmit-gf-submit-button",tabsSelector:".tabs",thankYouParagraphSelector:".gmit-gf-thank-you-paragraph",thankYouSelector:".gmit-gf-thank-you",titleIconSelector:".gmit-gf-groupbox-title .icon",titleSelector:".gmit-gf-group-box .gmit-gf-groupbox-title",ulAccordionSelector:"ul.accordion",windowSizeLarge:"large",windowSizeMedium:"medium",windowSizeXLarge:"xlarge",vehicleSelectorV2Selector:".gmit-gf-vehicle-selector-v2"}}),cowp.mod.gmit_gf_request_type=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx,t=e.find(this.cfg.mapSelector);this.$accordion=e.find(this.cfg.ulAccordionSelector),this.$layerWindow=e.find(this.cfg.layerWindowSelector),this.$brochure=e.find(this.cfg.brochureSelector),this.$form=e.find(this.cfg.formSelector),this.$readyToSubmit=this.$form.find(this.cfg.readyToSubmit),this.actionUrl=this.$form.data(this.cfg.dataActionUrl),this.$groupBoxExpander=e.find(this.cfg.groupBoxSelector),this.multiStepForm=e.data(this.cfg.dataMultiStepForm),this.mapId=cowp.util.getModuleId(t),this.$submitButton=e.find(this.cfg.submitSequestTypeSelector),this.$extraSubmitButton=e.find(this.cfg.extraSubmitSelector),this.$tabs=e.find(this.cfg.tabsSelector),this.$thankYou=e.find(this.cfg.thankYouSelector),this.$questions=e.find("[data-questions], [data-callers]"),this.$clpId=e.find(this.cfg.clpIdSelector),this.$gaClientId=e.find(this.cfg.gaClientId),this.$content=this.$groupBoxExpander.find(this.cfg.contentFirstSelector),this.$title=e.find(this.cfg.titleSelector),this.$icon=this.$groupBoxExpander.find(this.cfg.titleIconSelector),this.$collapsedContainer=this.$content.slice(1).closest(this.cfg.groupBoxContainer),this.thankYouUrl=e.data(this.cfg.dataThankYouUrl),this.$carlineDetail=this.$thankYou.find(this.cfg.carlineDetailSelector),this.$carlineImage=this.$thankYou.find(this.cfg.carlineImageSelector),this.$generalSubmissionError=e.find(this.cfg.generalSubmissionErrorClass),this.generalSubmissionErrorId=cowp.util.getModuleId(this.$generalSubmissionError),this.thankYouId=cowp.util.getModuleId(this.$thankYou),this.$dealerSelector=e.find(this.cfg.dealerSelector),this.dealerSelectorId=cowp.util.getModuleId(this.$dealerSelector),this.$dealerSelectorV2=e.find(this.cfg.dealerSelectorV2),this.dealerSelectorV2Id=cowp.util.getModuleId(this.$dealerSelectorV2),this.dealerSelected=!1,this.isLayerWindow=!1,this.$cancelLink=c("[data-".concat(this.cfg.linkAttribute,'="').concat(this.cfg.linkType,'"]')),this.cancelLinkId=cowp.util.getModuleId(this.$cancelLink),this.cancelLink=0<this.cancelLinkId,this.$comments=e.find(this.cfg.commentFieldSelector),this.commentsId=[],this.$commentField=e.find('[name="salesLead.comment"]').closest(this.cfg.commentFieldSelector),this.commentFieldId=cowp.util.getModuleId(this.$commentField),this.commentFieldCheck=0<this.commentFieldId,this.$vehicleSelectorV2=e.find(this.cfg.vehicleSelectorV2Selector),this.vehicleSelectorV2Id=cowp.util.getModuleId(this.$vehicleSelectorV2),this.vehicleSelectorV2Check=0<this.vehicleSelectorV2Id,this.successDtmScript=e.data(this.cfg.dataSuccessDtmScript),this.thankYouDtmScript=e.data(this.cfg.dataThankYouDtmScript),this.pageLoadDtmScript=e.data(this.cfg.dataPageLoadDtmScript),this.setTestDealerBac=!1,this.testDealerBac=e.data(this.cfg.dataTestDealerBac),this.$testDealerParagraph=e.find(this.cfg.dataTestDealerParagraph),this.testDealerParagraphId=cowp.util.getModuleId(this.$testDealerParagraph),this.testDealerParagraphCheck=0<this.testDealerParagraphId,this.moduleIdArray=[],cowp.conf.gf.queryObject=cowp.util.gf.parseQueryString(),s.set(cowp.conf.gf.cookieObject,"location",cowp.util.gf.parseLocationCookie(["cookie_customer_location","GMWP_location"])),this.clpId=""},prepare:function(){var a=this;this.$ctx.on("click",this.cfg.submitSequestTypeSelector,c.proxy(this.setupSubmitButtonClicked,this)).on("click",this.cfg.liMultiStepLinkSelector,c.proxy(this.moveToTab,this)).on("click",this.cfg.multiStepNextSelector,c.proxy(this.onNextButton,this)).on("click",this.cfg.multiStepPrevSelector,c.proxy(this.onPrevButton,this)),this.setupAccordion(),this.sandbox.subscribe(this.id,this),0<this.thankYouId&&this.sandbox.subscribe(this.thankYouId,this),0<this.dealerSelectorId&&this.sandbox.subscribe(this.dealerSelectorId,this),0<this.dealerSelectorV2Id&&this.sandbox.subscribe(this.dealerSelectorV2Id,this),0<this.generalSubmissionErrorId&&this.sandbox.subscribe(this.generalSubmissionErrorId,this),this.cancelLink&&this.sandbox.subscribe(this.cancelLinkId,this),0<this.mapId&&this.sandbox.subscribe(this.mapId,this),this.commentFieldCheck&&this.sandbox.subscribe(this.commentFieldId,this),this.vehicleSelectorV2Check&&this.sandbox.subscribe(this.vehicleSelectorV2Id,this),this.testDealerParagraphCheck&&this.sandbox.subscribe(this.testDealerParagraphId,this),s.each(this.$comments,function(e){var t=cowp.util.getModuleId(c(e));0<t&&(a.sandbox.subscribe(t,a),a.commentsId.push(t))}),s.each(this.$layerWindow,function(e){var t=c(e),i=cowp.util.getModuleId(t);0<i&&a.sandbox.subscribe(i,a)})},finish:function(){var e=cowp.util.generateUUID();this.collapseExpanders(),this.onApplyBusinessRules(),this.pageLoadDtmScript&&cowp.util.gf.callDtmScript(this.pageLoadDtmScript),this.clpId="CLP".concat(e),this.$clpId.attr("value",e),cowp.dom.$document.foundation("abide","events"),this.$form.on("valid.fndtn.abide",c.proxy(this.submitForm,this)).on("invalid.fndtn.abide",c.proxy(this.additionalValidations,this)),this.$ctx.show(),this.cancelLink&&this.fire("gmitGfSetupClickEvent",[this.cancelLinkId])},onBroadcastBreakpointChange:function(){this.collapseExpanders()},onApplyBusinessRules:function(){cowp.util.gf.applyBusinessRules(this.$ctx)},onGmitGfDealerSelected:function(e){var t=!!s.isPlainObject(e)&&e.valid;this.dealerSelected=t},onGmitGfChangeVehicle:function(){this.$thankYou.slideUp(this.cfg.animateSpeed),this.$form.slideDown(this.cfg.animateSpeed),this.$form.find('[name="salesLead.qIds"]').remove(),this.commentFieldCheck&&this.fire("gmitGfClearCommentField",[this.commentFieldId])},onGmitGfLinkClick:function(){var i=this,e=c();this.$form.length&&(e=this.$form.find('input[type="radio"]').clone(),0<this.dealerSelectorV2Id&&(this.fire("gmitGfClearDealerList",[this.dealerSelectorV2Id]),this.fire("resetshowDealerErrorVisible",[this.dealerSelectorV2Id])),s.each(this.commentsId,function(e){i.fire("gmitGfResetCharacterCounter",[e])}),this.$ctx.find("span .icon-minus").parent().click(),this.$form.children("div").removeClass("error"),this.$form.children("label").removeClass("error"),this.testDealerParagraphCheck&&this.fire("gmitGfToggleTestDealerParagraph",{toggleFlag:!1},[this.testDealerParagraphId]),this.$form[0].reset(),s.each(e,function(e){var t=c(e);i.$form.find("#".concat(t.attr("id"))).val(t.prop("defaultValue"))}),this.$form.find('[name="salesLead.qIds"]').remove(),this.fire("gmitGfClearDisabledBrochures",[this.id]),this.$form.slideDown(this.cfg.animateSpeed),this.onApplyBusinessRules(),this.$form.find(this.cfg.formElementSelectors).filter(":visible:first").focus())},collapseExpanders:function(){cowp.util.isWindowSize(this.cfg.windowSizeXLarge)||cowp.util.isWindowSize(this.cfg.windowSizeLarge)||cowp.util.isWindowSize(this.cfg.windowSizeMedium)?this.multiStepForm||(this.$content.slideDown(this.cfg.animateSpeed).removeClass(this.cfg.expandedClass),this.$collapsedContainer.removeClass(this.cfg.collapseClassName),this.$icon.removeClass(this.cfg.iconMinusClass).removeClass(this.cfg.iconPlusClass)):this.$content.hasClass(this.cfg.srClassSelector)||this.multiStepForm||this.isLayerWindow||(this.$content.slice(0,1).slideDown(this.cfg.animateSpeed).addClass(this.cfg.expandedClass),this.$content.slice(1).slideUp(this.cfg.animateSpeed),this.$collapsedContainer.addClass(this.cfg.collapseClassName),this.$icon.slice(0,1).addClass(this.cfg.iconMinusClass).removeClass(this.cfg.iconPlusClass),this.$icon.slice(1).removeClass(this.cfg.iconMinusClass).addClass(this.cfg.iconPlusClass)),this.isLayerWindow=!1},enableLink:function(e){e.removeClass(this.cfg.disabledSelector)},moveToTab:function(e){var t=c(e.currentTarget),i=t.parent().hasClass(this.cfg.disabledSelector),a=t.data("next-prev"),s=t.attr("href"),n=this.$accordion.find(this.cfg.activeAccordion),r=this.$accordion.find(this.cfg.mutliStepLinkSelector).filter('[href="'.concat(s,'"]')).parent(),o=this.$tabs.find(this.cfg.mutliStepLinkSelector).filter('[href="'.concat(s,'"]')).parent(),l=this.$tabs.find(this.cfg.activeTabSelector);return e.preventDefault(),e.stopPropagation(),(!i||"prev"===a||"next"===a)&&(this.$submitButton.data(this.cfg.dataSubmitForm,!1),this.$form.submit(),0<this.$form.find(this.cfg.dataInvalidSelector).length?(this.blockSubmitUI(!1),!1):(c.proxy(this.enableLink(n),this),c.proxy(this.enableLink(l),this),c.proxy(this.enableLink(r),this),c.proxy(this.enableLink(o),this),r.find(this.cfg.expandIconSelector).removeClass(this.cfg.iconPlusClass).addClass(this.cfg.iconMinusClass),n.find(this.cfg.expandIconSelector).addClass(this.cfg.iconPlusClass).removeClass(this.cfg.iconMinusClass),l.removeClass(this.cfg.activeClass).addClass(this.cfg.stepVisitedSelector),n.removeClass(this.cfg.activeClass).addClass(this.cfg.stepVisitedSelector),n.find(this.cfg.content).removeClass(this.cfg.activeClass),r.addClass(this.cfg.activeClass),r.find(this.cfg.content).addClass(this.cfg.activeClass),o.addClass(this.cfg.activeClass).removeClass(this.cfg.stepVisitedSelector),t.data("next-prev",""),!0))},onNextButton:function(e){var t=c(e.currentTarget).closest(this.cfg.accordionNavigationSelector).next().find(this.cfg.mutliStepLinkSelector);t.data("next-prev","next"),t.trigger("click")},onPrevButton:function(e){var t=c(e.currentTarget).closest(this.cfg.accordionNavigationSelector).prev().find(this.cfg.mutliStepLinkSelector);t.data("next-prev","prev"),t.trigger("click")},onSetLayerWindow:function(e){s.isPlainObject(e)&&(this.isLayerWindow=e.isLayerWindow)},setupAccordion:function(){this.multiStepForm&&(this.$accordion.find(this.cfg.activeSelector).find(this.cfg.expandIconSelector).removeClass(this.cfg.iconPlusClass).addClass(this.cfg.iconMinusClass),this.$title.hide())},setupSubmitButtonClicked:function(e){c(e.currentTarget).data(this.cfg.dataSubmitForm,!0),!this.multiStepForm&&cowp.util.isMobile()&&(this.$content.slideDown(this.cfg.animateSpeed).addClass(this.cfg.expandedClass),this.$icon.addClass(this.cfg.iconMinusClass).removeClass(this.cfg.iconPlusClass))},additionalValidations:function(){this.dealerSelected||this.showDealerError(),0<this.generalSubmissionErrorId&&this.fire("gmitGfShowGeneralError",[this.generalSubmissionErrorId]),0<this.$brochure.filter(":not(:hidden)").length&&this.$brochure.find(":input:checked").length<=0&&this.fire("showBrochureSelectedError",[this.id])},showDealerError:function(){this.dealerSelected||!this.$dealerSelector.filter(":not(:hidden)").length&&!this.$dealerSelectorV2.filter(":not(:hidden)").length||(this.fire("showDealerNotSelectedError",[this.id]),this.blockSubmitUI(!1))},onGmitGfCheckNoBrochureSelected:function(){0<this.$brochure.filter(":not(:hidden)").length&&this.$brochure.find(":input:checked").length<=0&&(this.fire("showBrochureSelectedError",[this.id]),this.blockSubmitUI(!1))},onGmitGfToggleTestDealer:function(e){s.get(e,"moduleId")&&(s.get(e,"toggleFlag")?this.moduleIdArray.push(e.moduleId):s.pull(this.moduleIdArray,e.moduleId),this.moduleIdArray&&this.moduleIdArray.length?this.setTestDealerBac=!0:this.setTestDealerBac=!1,this.fire("gmitGfToggleTestDealerParagraph",{toggleFlag:this.setTestDealerBac},[this.testDealerParagraphId]))},submitForm:function(e){var r=this,o=c(e.currentTarget),t=!0,i=this.setTestDealerBac&&this.testDealerBac?s.split(this.testDealerBac,","):s.split(o.find(this.cfg.dealerIdClass).filter(":not(".concat(this.cfg.chosenDealerIdClass,")")).val(),",");return 0<this.generalSubmissionErrorId&&this.fire("gmitGfRemoveGeneralError",[this.generalSubmissionErrorId]),this.vehicleSelectorV2Check&&this.fire("gmitGfSetThankYou",[this.vehicleSelectorV2Id]),this.dealerSelected||!this.$dealerSelector.filter(":not(:hidden)").length&&!this.$dealerSelectorV2.filter(":not(:hidden)").length?0<this.$brochure.filter(":not(:hidden)").length&&this.$brochure.find(":input:checked").length<=0?this.fire("showBrochureSelectedError",[this.id]):(this.fire("resetShowDealerErrorVisible",[this.id]),this.fire("resetShowBrochureSelectedError",[this.id]),this.multiStepForm&&!this.$submitButton.data(this.cfg.dataSubmitForm)||(s.each(this.$readyToSubmit,c.proxy(function(e){c(e).val()&&(t=!1)},this)),t?(window.ga&&ga.loaded&&ga(function(){var e=ga.getAll()[0].get("clientId");r.$gaClientId.val(e)}),s.each(this.$questions,function(e){var t=c('<input type="hidden" name="salesLead.qIds">'),i=c(e),a=i.data("questions")?i.data("questions"):i.data("callers"),s=a&&1===a.length?a[0].key:"",n=a&&1===a.length?a[0].value:"";s&&(i.is(":radio")||i.is(":checkbox")?i.is(":checked")&&t.val("".concat(s,"=").concat(n)):i.is("select")?0<i.find("option:selected").filter("[value]").length&&t.val("".concat(s,"=").concat(i.find("option:selected").val())):i.val()&&t.val("".concat(s,"=").concat(i.val())),0===i.attr("name").indexOf("salesLead.questionCodes")?t.val()&&o.append(t):r.commentFieldCheck&&i.length&&r.fire("gmitGfAddValuesToCommentField",i,[r.commentFieldId]))}),this.blockSubmitUI(),i?s.each(i,function(e){o.find(r.cfg.dealerIdClass).filter(r.cfg.chosenDealerIdClass).val(e),c.ajax({context:r,url:r.actionUrl,data:o.serialize(),processData:!1,method:"POST",statusCode:{404:c.proxy(r.responseFail,r)},success:c.proxy(r.responseSuccess,r),fail:c.proxy(r.responseFail,r)}).always(function(){this.blockSubmitUI(!1)})}):c.ajax({context:this,url:this.actionUrl,data:o.serialize(),processData:!1,method:"POST",statusCode:{404:c.proxy(this.responseFail,this)},success:c.proxy(this.responseSuccess,this),fail:c.proxy(this.responseFail,this)}).always(function(){this.blockSubmitUI(!1)})):e.preventDefault())):this.fire("showDealerNotSelectedError",[this.id]),!1},responseSuccess:function(e){if(e&&!e.http_response_code){var t=this.$form.find("#gmit-gf-bodystyle"),i=this.$form.find("#gmit-gf-title1"),a="",s="";t.length&&(a=t.val(),s=this.$form.find("#gmit-gf-carline option:selected").text()+" "+t.find("option:selected").text()),i.length&&(a=i.val(),s=i.find("option:selected").text()),window.pushToDataLayer&&pushToDataLayer(a,s),window.digitalData||(window.digitalData={toolsInfo:{}}),window.digitalData.toolsInfo.clp=this.clpId,this.$thankYou.filter(":hidden").length&&(cowp.util.gf.callDtmScript(this.successDtmScript),this.thankYouUrl?window.location=this.thankYouUrl:(cowp.dom.$htmlBody.animate({scrollTop:0},this.cfg.animateSpeed),this.fire("gmitGfSubmit",this.id),this.$form.slideUp(this.cfg.animateSpeed),this.$thankYou.slideDown(this.cfg.animateSpeed,cowp.util.gf.callDtmScript(this.thankYouDtmScript)),0<this.mapId&&this.fire("gmitGfFocusMapMarker",this.mapId)))}},responseFail:function(){return!1},blockSubmitUI:function(e){!(0<arguments.length&&void 0!==e)||e?(this.$submitButton.attr("disabled","disabled"),this.$extraSubmitButton&&this.$extraSubmitButton.attr("disabled","disabled")):(this.$submitButton.removeAttr("disabled"),this.$extraSubmitButton&&this.$extraSubmitButton.removeAttr("disabled"))}})}(cowp.$,cowp._),function(s,n){s.extend(!0,cowp.conf.cmp,{gmit_gf_search_result:{name:"gmit_gf_search_result",selector:".gmit-gf-search-result",closeList:".gmit-gf-icon-close",hideClass:"gmit-gf-hide",resultListSelector:".gmit-gf-search-result-list",selectItemTmpl:".gmit-gf-result-item-tmpl",selectItemTmplClass:"gmit-gf-result-item-tmpl",selectItem:".gmit-gf-result-item",selectItemClass:"gmit-gf-result-item",disabledClass:"gmit-gf-disabled",dataMaxSelected:"max-selected",itemSelectorCheckBox:".gmit-gf-input-checkbox",selectedItemsSelector:".gmit-gf-input-checkbox:checked",nonSelected:".gmit-gf-input-checkbox:not(:checked)",errorSelector:".gmit-gf-search-error",searchResultHeadlineSelector:".gmit-gf-search-result-headline",animateSpeed:500}}),cowp.mod.gmit_gf_search_result=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$selectedItems=s(),this.$nonSelectedItems=s([]),this.$items=e.find(":input"),this.$resultItems=e.find(this.cfg.resultListSelector),this.$selectItemTmpl=e.find(this.cfg.selectItemTmpl),this.$itemLabels=this.$selectItemTmpl.children().closest("label"),this.maxSelected=e.data(this.cfg.dataMaxSelected),this.disableItems=!1,this.$searchHeadline=e.find(this.cfg.searchResultHeadlineSelector),this.$searchError=e.find(this.cfg.errorSelector),this.$itemSelectorCheckBox=e.find(this.cfg.itemSelectorCheckBox),this.selectItems={selectedItemId:"",toggleValue:!1},this.sandbox.subscribe(this.id,this)},prepare:function(){var e=this.$ctx;this.$inputCheckbox=e.find(this.cfg.itemSelectorCheckBox),e.on("change.selectItem",this.cfg.selectItem,s.proxy(this.selectItem,this)).on("click.close",this.cfg.closeList,s.proxy(this.closeSearchResult,this))},finish:function(){this.updateSelectedItems(),this.itemTempleteSetup(),this.$inputCheckbox.off("focus")},onGmitGfAddItem:function(e){var a=this.$selectItemTmpl.clone().removeClass(this.cfg.hideClass).removeClass(this.cfg.selectItemTmplClass).addClass(this.cfg.selectItemClass);a.find("input")&&a.find("input").attr("id","selectItem-".concat(this.$resultItems.children().length)),a.find("label").attr("for","selectItem-".concat(this.$resultItems.children().length)),e.searchResultData&&a.attr("data-item",e.searchResultData),e&&n.hasIn(e,"searchResultRows")&&n.each(e.searchResultRows,function(e){var t="{".concat(e.resultType,"}"),i=n.replace(a.html(),t,e.resultText);a.html(i)}),this.$resultItems.append(a)},updateSelectedItems:function(){this.$selectedItems=this.$ctx.closest(this.cfg.selector).find(this.cfg.selectedItemsSelector),this.$nonSelectedItems=this.$ctx.closest(this.cfg.selector).find(this.cfg.nonSelected)},onDisableItems:function(){this.disableItems=this.$selectedItems.length===this.maxSelected,this.disableItems?this.$nonSelectedItems.attr("disabled",!0):this.$nonSelectedItems.removeAttr("disabled")},onGmitGfShowSearchResult:function(){1<this.$resultItems.children().length&&this.$searchError.is(":empty")&&(this.$ctx.removeClass(this.cfg.hideClass),this.$ctx.slideDown(this.cfg.animateSpeed),this.onGmitGfToggleDisplaySearchList(!0))},onGmitGfClearSearchList:function(){this.$resultItems.children().not(":first").remove(),this.updateSelectedItems(),this.onDisableItems()},onGmitGfHideSearchResult:function(){this.$ctx.addClass(this.cfg.hideClass)},closeSearchResult:function(){this.$ctx.slideUp(this.cfg.animateSpeed),this.onGmitGfClearSearchList(),this.fire("gmitGfListClosed",[this.id])},itemTempleteSetup:function(){var e={},t=[],i=[],a=[];n.each(this.$itemLabels.children(),function(e){i=n.split(s(e).attr("class")," "),a=n.dropWhile(i,function(e){return!n.startsWith(e,"js-")}),t.push(a)}),e.lines=t,this.fire("gmitGfItemTempleteSetup",e,[this.id])},onGmitGfDisableList:function(){this.$ctx.find(this.cfg.selectItem).off("click"),this.$nonSelectedItems.attr("disabled",!0),this.$selectedItems.attr("disabled",!0)},selectItem:function(e){var t=s(e.currentTarget),i=t.data("item");this.updateSelectedItems(),this.selectItems={selectedItemId:t.find("label").attr("id"),toggleValue:0<t.find("input").filter(":checked").length},i.selected=this.selectItems.toggleValue,this.fire("gmitGfItemSelected",i,[this.id]),this.onDisableItems()},onGmitGfShowSearchError:function(e){this.onGmitGfClearSearchList(),this.onGmitGfToggleDisplaySearchList(!1),this.$ctx.removeClass(this.cfg.hideClass),this.$searchError.html(e)},onGmitGfToggleDisplaySearchList:function(e){e?this.$resultItems.removeClass(this.cfg.hideClass):this.$resultItems.addClass(this.cfg.hideClass)},onGmitGfSelectFirstItem:function(){this.$resultItems.find(this.cfg.selectItem).find("input").click()},onGmitGfClearSearchResult:function(){this.$searchError.html(""),this.$searchHeadline.html(""),this.onGmitGfClearSearchList()},onGmitGfSetSearchHeadline:function(e){e&&n.hasIn(e,"text")&&this.$searchHeadline.html(e.text)},onGmitGfToggleSearchHeadline:function(e){e&&n.hasIn(e,"display")&&this.$searchHeadline.toggle(e.display)}})}(cowp.$,cowp._),function(s,t){s.extend(!0,cowp.conf.cmp,{gmit_gf_selected_brochures:{name:"gmit_gf_selected_brochures",brochureSelector:".gmit-gf-brochure"}}),cowp.mod.gmit_gf_selected_brochures=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name).find(this.cfg.brochureSelector);this.sandbox.subscribe(this.id,this),t.each(e,s.proxy(this.broadCastBrochures,this))},prepare:function(){cowp.util.debugModule(this)},broadCastBrochures:function(e){var t=s(e),i=cowp.util.getModuleId(t);0<i&&this.sandbox.subscribe(i,this)},onBrochureItemSelect:function(e){var t=!!e&&e.toggleValue,i=e?e.selectedBrochureId:"",a=i?this.$ctx.find('[data-brochure-id="'.concat(i,'"]')):s([]);cowp.util.debug(a),a.toggle(t)}})}(cowp.$,cowp._),function(e,a){e.extend(!0,cowp.conf.cmp,{gmit_gf_table:{name:"gmit_gf_table",selector:".gmit-gf-table",rowSelector:".gmit-gf-table-row"}}),cowp.mod.gmit_gf_table=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx.find(this.cfg.rowSelector);this.rowModuleIds=cowp.util.gf.setupModuleIdsFromArray(e),this.sandbox.subscribe(this.id,this)},prepare:function(){cowp.util.gf.subscribeModuleIds(this.rowModuleIds,this)},onGmitGfHideTable:function(){this.$ctx.hide()},onGmitGfShowTable:function(){this.$ctx.show()},onGmitGfHideTableRow:function(e){var t="";e&&a.hasIn(e,"rowIndex")&&0<(t=this.rowModuleIds[e.rowIndex])&&this.fire("gmitGfHideRow",[t])},onGmitGfShowTableRow:function(e){var t="";e&&a.hasIn(e,"rowIndex")&&0<(t=this.rowModuleIds[e.rowIndex])&&this.fire("gmitGfShowRow",[t])},onGmitGfSetTableColumn:function(e){var t={},i="";e&&a.hasIn(e,"newText")&&a.hasIn(e,"columnIndex")&&a.hasIn(e,"rowIndex")&&(t.newValue=e.newText,t.columnIndex=e.columnIndex,0<(i=this.rowModuleIds[e.rowIndex])&&this.fire("gmitGfSetColumn",t,[i]))}})}(cowp.$,cowp._),function(e,t){e.extend(!0,cowp.conf.cmp,{gmit_gf_table_column:{name:"gmit_gf_table_column",selector:".gmit-gf-table-column"}}),cowp.mod.gmit_gf_table_column=cowp.mod.AtomicMod.extend({events:{},initElements:function(){this.sandbox.subscribe(this.id,this)},onGmitGfSetColumnText:function(e){t.hasIn(e,"newValue")&&this.$ctx.html(e.newValue)}})}(cowp.$,cowp._),function(e,a){e.extend(!0,cowp.conf.cmp,{gmit_gf_table_row:{name:"gmit_gf_table_row",selector:".gmit-gf-table-row",columnSelector:".gmit-gf-table-column"}}),cowp.mod.gmit_gf_table_row=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx.find(this.cfg.columnSelector);this.columnIds=cowp.util.gf.setupModuleIdsFromArray(e),this.sandbox.subscribe(this.id,this)},prepare:function(){cowp.util.gf.subscribeModuleIds(this.columnIds,this)},onGmitGfSetColumn:function(e){var t={},i="";e&&a.hasIn(e,"newValue")&&a.hasIn(e,"columnIndex")&&(t.newValue=e.newValue,0<(i=this.columnIds[e.columnIndex])&&this.fire("gmitGfSetColumnText",t,[i]))},onGmitGfHideRow:function(){this.$ctx.hide()},onGmitGfShowRow:function(){this.$ctx.show()}})}(cowp.$,cowp._),function(s,n){s.extend(!0,cowp.conf.cmp,{gmit_gf_text_field:{name:"gmit_gf_text_field",autocomplete:".js-gmit-gf-autocomplete",caller:"x-caller",dataCallers:"callers",dataTestDealerValue:"test-dealer-value",populateField:"populate-field",selector:".gmit-gf-input-text"}}),cowp.mod.gmit_gf_text_field=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$autoCompleteTextField=this.$ctx.find(this.cfg.autocomplete),this.autocompleteUrl="",this.locationCookieObject=cowp.conf.gf.cookieObject,this.$inputElement=e.find(this.cfg.selector),this.testDealerValue=e.data(this.cfg.dataTestDealerValue),e.on("blur.rules",this.cfg.selector,s.proxy(this.processTextField,this)),e.on("keypress.autocomplete",this.cfg.autocomplete,s.proxy(this.autoCompleteTextField,this))},prepare:function(){var e=this.$inputElement.attr("id"),t=cowp.util.gf.prefillSelectableItems(e),i=s();t&&this.$inputElement.val(t),cowp.util.gf.resetPlaceHolder(this.$inputElement),this.testDealerValue&&(i=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name),this.requestTypeId=cowp.util.getModuleId(i),this.requestTypeCheck=0<this.requestTypeId,this.requestTypeCheck&&this.$ctx.on("blur.testDealer",this.cfg.selector,s.proxy(this.checkTestDealer,this))),this.requestTypeCheck&&this.sandbox.subscribe(this.requestTypeId,this),this.sandbox.subscribe(this.id,this)},finish:function(){var e=this.$inputElement.data(this.cfg.dataCallers),t=n.get(cowp.conf.gf.queryObject,this.cfg.caller,""),i=n.filter(e,{key:t},[]);this.$inputElement.off("focus"),this.$inputElement.data(this.cfg.populateField)&&this.loadFieldFromCookie(this.$inputElement.data(this.cfg.populateField)),i.length&&this.$inputElement.val(i[0].value)},checkTestDealer:function(e){var t=s(e.currentTarget),i={},a="toggleFlag";n.set(i,"moduleId",this.id),t.val()===this.testDealerValue?n.set(i,a,!0):n.set(i,a,!1),this.fire("gmitGfToggleTestDealer",i,[this.requestTypeId])},processTextField:function(e){var t=s(e.currentTarget),i={value:"",replaceMatch:""};cowp.util.gf.applyBusinessRules(this.$ctx),i.value=cowp.util.gf.sanitizeData(t.val()),i.replaceMatch=t.attr("id")?t.attr("id"):"",this.fire("gmitGfUpdateValue",i,[this.id])},onGmitGfSetupAutoCompleteUrl:function(e){n.isEmpty(e)?this.autocompleteUrl="":this.autocompleteUrl=e},autoCompleteTextField:function(e){var t=this,i=s(e.currentTarget);this.autocompleteUrl&&s.ajax({url:this.autocompleteUrl,type:"GET",dataType:"json",data:{term:i.val()},success:function(e){t.$autoCompleteTextField.autocomplete({minLength:3,source:e})}})},onGmitGfUpdateValue:function(e){var t=this.$ctx.find(this.cfg.selector),i=[];e?(n.hasIn(e,"text")&&e.text?(t.val(e.text),Foundation.libs.abide.validate(t,{type:""})):t.val(""),n.hasIn(e,"placeholder")&&e.placeholder?t.attr("placeholder",e.placeholder):t.attr("placeholder",""),n.hasIn(e,"maxLength")&&e.maxLength?t.attr("maxlength",e.maxLength):t.removeAttr("maxlength"),n.hasIn(e,"validations")&&e.validations&&(i=t.data("validations")||[],n.each(e.validations,function(e){0===n.filter(i,e).length&&i.push(e)}),t.data("validations",i)),n.hasIn(e,"removeValidations")&&e.removeValidations&&(i=t.data("validations")||[],t.data("validations",[]),Foundation.libs.abide.validate(t,{type:""}),n.each(e.removeValidations,function(e){n.remove(i,{operator:e.operator})}),t.data("validations",i))):t.val("")},loadFieldFromCookie:function(e){var t={maxLength:this.$inputElement.attr("maxlength"),placeholder:this.$inputElement.attr("placeholder")};switch(e){case"state":n.hasIn(this.locationCookieObject,"location.state")&&this.locationCookieObject.location.state&&this.onGmitGfUpdateValue(n.set(t,"text",this.locationCookieObject.location.state));break;case"city":n.hasIn(this.locationCookieObject,"location.city")&&this.locationCookieObject.location.city&&this.onGmitGfUpdateValue(n.set(t,"text",this.locationCookieObject.location.city));break;case"zipCode":n.hasIn(this.locationCookieObject,"location.zipcode")&&this.locationCookieObject.location.zipcode&&this.onGmitGfUpdateValue(n.set(t,"text",this.locationCookieObject.location.zipcode))}},sendFieldValue:function(e){var t=s(e.currentTarget),i={};Foundation.libs.abide.validate(t,{type:""}),i.id=this.$inputElement.attr("id"),i.value=this.$inputElement.val(),i.sandboxId=this.id,0===t.filter("[data-invalid]").length&&this.fire("gmitGfTextFieldUpdated",i,[this.id])},onGmitGfSetupTextFieldBlurEvent:function(){this.$ctx.on("blur.update",this.cfg.selector,s.proxy(this.sendFieldValue,this))}})}(cowp.$,cowp._),function(e,n){e.extend(!0,cowp.conf.cmp,{gmit_gf_text_group:{name:"gmit_gf_text_group",headlineSelector:".gmit-gf-headline",hideClass:"gmit-gf-hide",hideSelector:".gmit-gf-hide",selector:".gmit-gf-text-group"}}),cowp.mod.gmit_gf_text_group=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx.find(this.cfg.headlineSelector);this.headlineModuleIds=cowp.util.gf.setupModuleIdsFromArray(e),this.sandbox.subscribe(this.id,this)},prepare:function(){cowp.util.gf.subscribeModuleIds(this.headlineModuleIds,this)},onGmitGfSetTextGroup:function(e){var t=this,i={};e&&n.hasIn(e,"newText")&&(i.newText=e.newText,n.each(this.headlineModuleIds,function(e){0<e&&t.fire("gmitGfSetHeadline",i,[e])}))},onGmitGfHideTextGroup:function(){this.$ctx.hide()},onGmitGfShowTextGroup:function(){this.$ctx.show()},onGmitGfSetText:function(e){var t={},i="";e&&n.hasIn(e,"newText")&&n.hasIn(e,"index")&&(t.newText=e.newText,0<(i=this.headlineModuleIds[e.index])&&this.fire("gmitGfSetHeadline",t,[i]))},onGmitGfHideText:function(e){e&&n.hasIn(e,"moduleId")&&0<e.moduleId&&this.fire("gmitGfHideHeadline",[e.moduleId])},onGmitGfShowText:function(e){e&&n.hasIn(e,"moduleId")&&0<e.moduleId&&this.fire("gmitGfShowHeadline",[e.moduleId])},onGmitGfRemoveHideClasses:function(){this.$ctx.find(this.cfg.hideSelector).removeClass(this.cfg.hideClass)},onGmitGfResetTextGroup:function(e){var t=this,i="",a=[],s={};e&&n.hasIn(e,"index")&&n.hasIn(e,"newText")&&(i=e.index,a=n.drop(this.headlineModuleIds,i+1),s.newText=e.newText,n.each(a,function(e){0<e&&t.fire("gmitGfSetHeadline",s,[e])}))}})}(cowp.$,cowp._),function(i,t){i.extend(!0,cowp.conf.cmp,{gmit_gf_thank_you:{name:"gmit_gf_thank_you",followOn:".gmit-gf-follow-on",linkAttribute:"link-type",linkType:"refresh",mapSelector:".gmit-gf-map",textFieldSelector:".gmit-gf-text-field",thankYouParagraphSelector:".gmit-gf-thank-you-paragraph",vehicleSelectorContainer:".gmit-gf-vehicle-selector",vehicleSelectorV2Container:".gmit-gf-vehicle-selector-v2",vsChangeButtonSelector:".js-gmit-gf-vs-change"}}),cowp.mod.gmit_gf_thank_you=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx,t=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name),i=t.find(this.cfg.vehicleSelectorContainer),a=t.find(this.cfg.vehicleSelectorV2Container),s=e.find(this.cfg.followOn),n=e.find(this.cfg.mapSelector),r=e.find("[data-".concat(this.cfg.linkAttribute,'="').concat(this.cfg.linkType,'"]'));this.$textField=t.find(this.cfg.textFieldSelector),this.requestTypeId=cowp.util.getModuleId(t),this.vehicleSelectorId=cowp.util.getModuleId(i),this.vehicleSelectorV2Id=cowp.util.getModuleId(a),this.followOnId=cowp.util.getModuleId(s),this.linkId=cowp.util.getModuleId(r),this.mapId=cowp.util.getModuleId(n),this.$thankYouParagraph=e.find(this.cfg.thankYouParagraphSelector),this.newHtml=this.$thankYouParagraph.html(),this.firstName="",this.lastName="",this.sandbox.subscribe(this.id,this)},prepare:function(){0<this.requestTypeId&&this.sandbox.subscribe(this.requestTypeId,this),0<this.vehicleSelectorId&&this.sandbox.subscribe(this.vehicleSelectorId,this),0<this.vehicleSelectorV2Id&&this.sandbox.subscribe(this.vehicleSelectorV2Id,this),0<this.followOnId&&this.sandbox.subscribe(this.followOnId,this),0<this.linkId&&this.sandbox.subscribe(this.linkId,this),0<this.mapId&&this.sandbox.subscribe(this.mapId,this),t.each(this.$textField,i.proxy(this.subscribeTextField,this))},finish:function(){0<this.linkId&&this.fire("gmitGfSetupClickEvent",[this.linkId])},onBroadcastWindowResize:function(){},onBroadcastWindowScroll:function(){},onGmitGfAddMapMarkers:function(e){e&&t.hasIn(e,"markers")&&0<this.mapId&&this.fire("gmitGfToggleMarker",e,[this.mapId])},onGmitGfLinkClick:function(){this.$ctx.hide(),this.fire("gmitGfLinkClick",[this.requestTypeId])},onGmitGfUpdateValue:function(e){if(e)switch(e.replaceMatch){case"gmit-gf-first-name":this.firstName=e.value;break;case"gmit-gf-last-name":this.lastName=e.value}},onGmitGfSubmit:function(){0<this.$thankYouParagraph.length&&this.$thankYouParagraph.html(this.$thankYouParagraph.html().replace("{gmit-gf-last-name}",this.lastName)).html(this.$thankYouParagraph.html().replace("{gmit-gf-first-name}",this.firstName))},onGmitResetThankYouParagraph:function(){this.$thankYouParagraph.html(this.newHtml)},subscribeTextField:function(e){var t=cowp.util.getModuleId(i(e));0<t&&this.sandbox.subscribe(t,this)}})}(cowp.$,cowp._),function(g,u){g.extend(!0,cowp.conf.cmp,{gmit_gf_vehicle_selector:{agencyRoleCodeSelector:"#gmit-gf-agency-role-code",bodystyleHeadline:".gmit-gf-bodystyle-headline",bodystyleSelector:"#gmit-gf-bodystyle",carlineDetailWrapper:".gmit-gf-carline-detail-wrapper",carlineFilter:"x-filters",carlineHeadline:".gmit-gf-carline-headline",carlineImage:".gmit-gf-carline-image",carlineObj:".gmit-gf-carline-obj",carlinePricing1:".gmit-gf-carline-pricing1",carlinePricing2:".gmit-gf-carline-pricing2",carlinePricing3:".gmit-gf-carline-pricing3",carlinePricing:".gmit-gf-carline-pricing",carlinePricingLabel1:".gmit-gf-carline-pricing-label1",carlinePricingLabel2:".gmit-gf-carline-pricing-label2",carlinePricingLabel3:".gmit-gf-carline-pricing-label3",carlineSelector:"#gmit-gf-carline",carlineWrapperSelector:".gmit-gf-carline-wrapper",co2Chart:".gmit-gf-co2-chart",co2Description:".gmit-gf-co2-description",co2Disclaimer:".gmit-gf-co2-disclaimer",co2Headline:".gmit-gf-co2-headline",co2Image:".gmit-gf-co2-image",co2Stats1:".gmit-gf-co2-stats1",co2Stats2:".gmit-gf-co2-stats2",co2Stats3:".gmit-gf-co2-stats3",co2Stats:".gmit-gf-co2-stats",co2StatsLabel1:".gmit-gf-co2-stats-label1",co2StatsLabel2:".gmit-gf-co2-stats-label2",co2StatsLabel3:".gmit-gf-co2-stats-label3",co2StatsTableRow:'<tr><td class="gmit-gf-co2-stats-label{{labelIndex}}">{{label}} {{formattedUnit}}</td><td class="gmit-gf-co2-stats{{labelIndex}}">{{formattedVal}}</td></tr>',co2StatsTableSelector:".gmit-gf-co2-stats-table",co2Wrapper:".gmit-gf-co2-wrapper",commentFieldSelector:"#gmit-gf-comment",configIDSelector:"#gmit-gf-config-id",configurationString:"#gmit-gf-configuration-string",configurationURL:"#gmit-gf-configuration-url",dataCarlineImage:"carline-image",dropdownSelector:".gmit-gf-dropdown",engineDescription:".gmit-gf-engine-description",engineSelector:"#gmit-gf-engine",gfErrorSelector:".gmit-gf-wltp-error",modelYearSelector:"#gmit-gf-configured-vehicle-model-year",name:"gmit_gf_vehicle_selector",noCo2Wrapper:".gmit-gf-no-co2-wrapper",segmentSelector:"#gmit-gf-segment",transmission:"#gmit-gf-transmission",trimHeadline:".gmit-gf-trim-headline",trimSelector:"#gmit-gf-trim",useGfWltp:"use-gf-wltp",requestTypeSelector:"#gmit-gf-sales-lead-request-type"}}),cowp.mod.gmit_gf_vehicle_selector=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx,t=g.extend({bodystyleEndpoint:"",carlineEndpoint:"",engineEndpoint:"",imageEndpoint:"",imageTrimEndpoint:"",pricingBodystyleEndpoint:"",pricingDetailEndpoint:"",pricingEndpoint:"",pricingEngineEndpoint:"",pricingTrimEndpoint:"",trimEndpoint:""},e.data("endpoints"));if(this.dataAppId=e.data("app-id"),this.dataBrand=e.data("brand"),this.dataChannel=e.data("channel"),this.dataCountry=e.data("country"),this.dataLanguage=e.data("language"),this.dataGfWidgetId=e.data("gf-widget-id"),this.dataOvConfigurator=e.data("ovconfigurator"),this.carlineApi=t.carlineEndpoint,this.bodyStyleApi=t.bodystyleEndpoint,this.pricingBodystyleApi=t.pricingBodystyleEndpoint,this.imageApi=t.imageEndpoint,this.imageTrimApi=t.imageTrimEndpoint,this.pricingApi=t.pricingEndpoint,this.trimApi=t.trimEndpoint,this.pricingTrimApi=t.pricingTrimEndpoint,this.engineApi=t.engineEndpoint,this.pricingEngineApi=t.pricingEngineEndpoint,this.pricingDetailApi=t.pricingDetailEndpoint,this.baseParams={applyDefaults:"true",brand:this.dataBrand,channel:this.dataChannel,country:this.dataCountry,language:this.dataLanguage,outputType:"json"},this.selectedCarline="",this.selectedModelYear="",this.selectedBodystyle="",this.selectedSeries="",this.selectedPackage="",this.dataOvConfigurator){"/"!==this.dataOvConfigurator.slice(-1)&&(this.dataOvConfigurator+="/");var i="".concat(this.dataOvConfigurator,"getConfigData"),a="".concat(this.dataOvConfigurator,"imageComponent"),s="".concat(this.dataOvConfigurator,"priceDetail"),n="".concat(this.dataOvConfigurator,"salesLeadPriceDetail");this.carlineApi=i,this.bodyStyleApi=i,this.trimApi=i,this.engineApi=i,this.imageApi=a,this.imageTrimApi=a,this.pricingBodystyleApi=n,this.pricingApi=n,this.pricingTrimApi=n,this.pricingEngineApi=n,this.pricingDetailApi=s}this.$segment=e.find(this.cfg.segmentSelector),this.$carlineId=e.find(this.cfg.carlineSelector),this.$configurationString=e.find(this.cfg.configurationString),this.$configurationURL=e.find(this.cfg.configurationURL),this.carlineOptionTxt=this.$carlineId.data("placeholder"),this.$bodystyleId=e.find(this.cfg.bodystyleSelector),this.bodyStyleOptionTxt=this.$bodystyleId.data("placeholder"),this.$trimId=e.find(this.cfg.trimSelector),this.trimOptionTxt=this.$trimId.data("placeholder"),this.$engineId=e.find(this.cfg.engineSelector),this.engineOptionTxt=this.$engineId.data("placeholder"),this.$carlineDetails=e.find(this.cfg.carlineDetailWrapper),this.$carlineObj=e.find(this.cfg.carlineObj),this.$co2Wrapper=e.find(this.cfg.co2Wrapper),this.$carlineHeadline=e.find(this.cfg.carlineHeadline),this.$bodystyleHeadline=e.find(this.cfg.bodystyleHeadline),this.$trimHeadline=e.find(this.cfg.trimHeadline),this.$engineDescription=e.find(this.cfg.engineDescription),this.$carlineImage=e.find(this.cfg.carlineImage),this.carlineImageData=this.$carlineImage.data(this.cfg.dataCarlineImage),this.$carlinePricing=e.find(this.cfg.carlinePricing),this.$carlinePricingLabel1=e.find(this.cfg.carlinePricingLabel1),this.$carlinePricingLabel2=e.find(this.cfg.carlinePricingLabel2),this.$carlinePricingLabel3=e.find(this.cfg.carlinePricingLabel3),this.$carlinePricing1=e.find(this.cfg.carlinePricing1),this.$carlinePricing2=e.find(this.cfg.carlinePricing2),this.$carlinePricing3=e.find(this.cfg.carlinePricing3),this.$co2Headline=e.find(this.cfg.co2Headline),this.$co2Description=e.find(this.cfg.co2Description),this.$co2Chart=e.find(this.cfg.co2Chart),this.$co2Image=e.find(this.cfg.co2Image),this.$co2Disclaimer=e.find(this.cfg.co2Disclaimer),this.$co2Stats=e.find(this.cfg.co2Stats),this.$co2StatsLabel1=e.find(this.cfg.co2StatsLabel1),this.$co2StatsLabel2=e.find(this.cfg.co2StatsLabel2),this.$co2StatsLabel3=e.find(this.cfg.co2StatsLabel3),this.$co2Stats1=e.find(this.cfg.co2Stats1),this.$co2Stats2=e.find(this.cfg.co2Stats2),this.$co2Stats3=e.find(this.cfg.co2Stats3),this.$co2StatsTable=this.$co2Wrapper.find(this.cfg.co2StatsTableSelector),this.$dropdownSelector=e.find(this.cfg.dropdownSelector),this.$gfError=e.find(this.cfg.gfErrorSelector),this.$modelYear=e.find(this.cfg.modelYearSelector),this.$transmission=e.find(this.cfg.transmission),this.$configID=e.find(this.cfg.configIDSelector),this.$agencyRoleCode=e.find(this.cfg.agencyRoleCodeSelector),this.$commentID=e.find(this.cfg.commentFieldSelector),this.useGfWltp=this.$co2Wrapper.data(this.cfg.useGfWltp),this.xNgvcFlag=this.checkForNGVC(),this.$requestType=cowp.dom.$body.find(this.cfg.requestTypeSelector),this.thankYouVehicle={$co2Wrapper:this.$co2Wrapper,$carlineDetail:e.find(this.cfg.carlineDetailWrapper),$image:e.find(this.cfg.carlineObj)},this.mpvCode=u.chain(this.xNgvcConfig).replace("?","&").split("&").map(u.partial(u.split,u,"=",2)).fromPairs().value().mpv},prepare:function(){var e=this.$ctx,t=cowp.conf.gf.queryObject;this.xCarlineFilters=t&&u.hasIn(t,this.cfg.carlineFilter)?t[this.cfg.carlineFilter]:"",this.xNgvcFlag?(this.$dropdownSelector.hide(),this.loadNGVCInfo()):(this.$modelYear.val(""),this.$configurationURL.val(""),this.$transmission.val(""),this.loadCarlineList(),e.on("change",this.cfg.carlineSelector,g.proxy(this.changeCarline,this)).on("change",this.cfg.bodystyleSelector,g.proxy(this.changeBodystyle,this)).on("change",this.cfg.trimSelector,g.proxy(this.changeTrim,this)).on("change",this.cfg.engineSelector,g.proxy(this.changeEngine,this))),this.sandbox.subscribe(this.id,this)},loadNGVCInfo:function(){var t=this;g.ajax({type:"GET",dataType:"json",url:this.xNgvcConfig}).done(function(e){t.addNGVCOptionsToDropdowns(e),t.updateCarlineDetails(e),t.updatePriceData(e),t.updateVehicleImage(e),t.useGfWltp?t.buildParams():t.updateCo2NoWltp(e)})},updateCo2NoWltp:function(e){this.updateCo2Data(e),this.$carlineDetails.show(),this.$co2Stats.show(),this.$co2Chart.show(),this.$co2Image.show(),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},wltpCallback:function(e){this.toggleWltpError(!0),this.updateCo2DataWltp(e),this.$carlineDetails.show(),this.$co2Stats.show(),this.$co2Chart.show(),this.$co2Image.show(),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},wltpErrorCallback:function(){this.toggleWltpError(!1)},toggleWltpError:function(e){this.$co2Wrapper.toggle(e),this.$gfError.toggle(!e)},updateCo2Wltp:function(e){var t=cowp.util.getWltpDataUrl("?".concat(e));cowp.util.getWltpData(t,g.proxy(this.wltpCallback,this),g.proxy(this.wltpErrorCallback,this))},buildParams:function(e,t,i,a){var s,n=!!(this.mpvCode&&this.dataBrand&&this.dataCountry&&this.dataLanguage&&this.$modelYear.length&&this.dataGfWidgetId&&this.exteriorColor&&this.interiorTrim),r=!!((e||this.$carlineId.length)&&this.dataCountry&&this.dataLanguage&&this.$modelYear.length&&this.dataGfWidgetId);(n||r)&&(s="",this.dataCountry&&(s+="country=".concat(this.dataCountry)),this.dataLanguage&&(s+="&language=".concat(this.dataLanguage)),this.$modelYear.length&&(s+="&modelYear=".concat(this.$modelYear.val())),e?s+="&carline=".concat(e):this.$carlineId.length&&(s+="&carline=".concat(this.$carlineId.val())),this.dataChannel&&(s+="&channel=".concat(this.dataChannel)),this.dataGfWidgetId&&(s+="&widgetId=".concat(this.dataGfWidgetId)),this.dataAppId&&(s+="&appId=".concat(this.dataAppId)),t&&(s+="&bodyStyle=".concat(t)),a?s+="&mpv=".concat(a):this.mpvCode&&(s+="&mpv=".concat(this.mpvCode)),this.updateCo2Wltp(s))},addNGVCOptionsToDropdowns:function(e){if(e){if(e.carline&&e.carlineLabel&&this.$carlineId.append('<option value="'.concat(e.carline,'">').concat(e.carlineLabel,"</option>")).val(e.carline),e.bodystyle&&e.bodystyleLabel&&this.$bodystyleId.append('<option value="'.concat(e.bodystyle,'">').concat(e.bodystyleLabel,"</option>")).val(e.bodystyle),e.trim&&e.series&&this.$trimId.append('<option value="'.concat(e.trim,'">').concat(e.series,"</option>")).val(e.trim),e.trim&&e.engine&&e.engineLabel&&e.transmission){var t="".concat(e.trim.split("  ")[0],"  ").concat(e.engine);this.$engineId.append('<option value="'.concat(t,'">').concat(e.engineLabel,", ").concat(e.transmission,"</option>")).val(t),this.$configurationString.val(t)}e.modelyear&&this.$modelYear.val(e.modelyear),e.configurationURL&&this.$configurationURL.val(e.configurationURL),e.transmission&&this.$transmission.val(e.transmission),e.configID&&this.$configID.val(e.configID)}},toggleCo2Details:function(e){this.$co2Stats1.toggle(e),this.$co2StatsLabel1.toggle(e),this.$co2Headline.toggle(e),this.$co2Chart.toggle(e),this.$co2Image.toggle(e),this.$co2Disclaimer.toggle(e),this.$co2Description.toggle(e)},finish:function(){},sortSelect:function(e,t){return e.feature.label.localeCompare(t.feature.label)},changeCarline:function(e){var n=this;this.selectedBodystyle="",this.selectedCarline="",this.selectedSeries="",this.selectedPackage="";var i,t,a,s,r=g(e.currentTarget).find(":selected"),o=[],l=r.data("co-two-image"),c=r.data("segment"),d="bodySelection",h=r.val();e.preventDefault(),c&&this.$segment.val({lcv_carline:"truck",car_carline:"passenger"}[c]),this.fire("gmitGfCarlineSelected",[this.id]),l&&!this.useGfWltp&&this.$co2Image.attr("src",l),this.useGfWltp||this.$co2Stats.show(),0<r.filter("[value]").length&&h&&0<h.length?(a=r.text(),this.carlineFeatureId=encodeURI(r.data("carline-id")),o=(o=r.data("carline-id")).split(";"),this.selectedCarline=o[0].split(":")[1],this.selectedModelYear=o[1].split(":")[1],t={carline:this.selectedCarline,configRepresentation:d,featureSelection:this.carlineFeatureId,modelyear:this.selectedModelYear,type:d},s=g.extend({},this.baseParams,t),this.setModelYearHiddenField(this.carlineFeatureId),this.$carlineHeadline.html(a),this.$bodystyleHeadline.html(""),this.$trimHeadline.html(""),this.$engineDescription.html(""),this.toggleCo2Details(!1),this.$carlineDetails.show(),g.ajax({type:"GET",dataType:"json",data:s,url:this.bodyStyleApi}).done(function(e){var t=e.featureSelectionSet.featureSelection;t.sort(g.proxy(n.sortSelect,n)),n.$bodystyleId.find("option").remove().end().append('<option value="">'.concat(n.bodyStyleOptionTxt,"</option>")).val(""),n.$trimId.find("option").remove().end().append('<option value="">'.concat(n.trimOptionTxt,"</option>")).val(""),n.$engineId.find("option").remove().end().append('<option value="">'.concat(n.engineOptionTxt,"</option>")).val(""),n.$bodystyleHeadline.html(""),u.each(t,function(e){var t=JSON.stringify(e.feature.code),i=JSON.stringify(e.feature.featureId),a=e&&e.feature&&e.feature.emissionLabelClassImageURLs&&e.feature.emissionLabelClassImageURLs.imageSize1?JSON.stringify(e.feature.emissionLabelClassImageURLs.imageSize1):"",s="<option data-bodystyle-id=".concat(i," value=").concat(t," data-co-two-image=").concat(a,">").concat(e.feature.label,"</option>");void 0!==t&&void 0!==i&&n.$bodystyleId.append(s),n.useGfWltp||n.updateCo2Data(e)}),n.xBodyStyle?(n.$bodystyleId.val(n.xBodyStyle),n.$bodystyleId.change(),n.xBodyStyle=null):2===n.$bodystyleId.find("option").length&&(i=n.$bodystyleId.find("option")[1])&&(n.$bodystyleId.val(i.value),n.$bodystyleId.change()),g.ajax({type:"POST",dataType:"json",data:s,url:n.imageApi}).done(g.proxy(n.getImage,n)),g.ajax({type:"POST",dataType:"json",data:s,url:n.pricingApi}).done(g.proxy(n.getPrice,n,"carlinePrice")),n.$configurationString.val(""),n.useGfWltp&&(n.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},n.cfg.co2StatsTableRow)),1===n.$dropdownSelector.length&&n.buildParams(n.$carlineId.val()))})):(this.$bodystyleId.find("option").remove().end().append('<option value="">'.concat(this.bodyStyleOptionTxt,"</option>")).val(""),this.$trimId.find("option").remove().end().append('<option value="">'.concat(this.trimOptionTxt,"</option>")).val(""),this.$engineId.find("option").remove().end().append('<option value="">'.concat(this.engineOptionTxt,"</option>")).val(""),this.$carlineImage.attr("src",this.carlineImageData),this.$carlineHeadline.html(""),this.$bodystyleHeadline.html(""),this.$trimHeadline.html(""),this.$engineDescription.html(""),this.$co2Wrapper.hide(),this.$carlineDetails.hide())},changeBodystyle:function(e){var n=this;e.preventDefault(),this.selectedSeries="",this.selectedPackage="";var t,i,a,s,r,o=g(e.currentTarget).find(":selected"),l=o.data("co-two-image"),c="seriesSelection",d=o.val();l&&!this.useGfWltp&&this.$co2Image.attr("src",l),0<o.filter("[value]").length&&d&&0<d.length?(i=o.text(),t=o.data("bodystyle-id"),this.selectedBodystyle=t.split(":")[1],s={bodystyle:this.selectedBodystyle,carline:this.selectedCarline,configRepresentation:c,featureSelection:t,modelyear:this.selectedModelYear,type:c},a=g.extend({},this.baseParams,s),this.$bodystyleHeadline.html(i),this.$trimHeadline.html(""),this.$engineDescription.html(""),this.toggleCo2Details(!1),g.ajax({type:"GET",dataType:"json",data:a,url:this.trimApi}).done(function(e){var t=e.featureSelectionSet.featureSelection;t.sort(g.proxy(n.sortSelect,n)),n.$trimId.find("option").remove().end().append('<option value="">'.concat(n.trimOptionTxt,"</option>")).val(""),n.$engineId.find("option").remove().end().append('<option value="">'.concat(n.engineOptionTxt,"</option>")).val(""),u.each(t,function(e){var t=JSON.stringify(e.feature.code),i=JSON.stringify(e.feature.featureId),a=e&&e.feature&&e.feature.emissionLabelClassImageURLs&&e.feature.emissionLabelClassImageURLs.imageSize1?JSON.stringify(e.feature.emissionLabelClassImageURLs.imageSize1):"",s="<option data-trim-id=".concat(i," value=").concat(t," data-co-two-image=").concat(a,">").concat(e.feature.label,"</option>");void 0!==t&&void 0!==i&&n.$trimId.append(s),n.useGfWltp||n.updateCo2Data(e)}),n.xTrim?(n.$trimId.val(n.xTrim),n.$trimId.change(),n.xTrim=null):2===n.$trimId.find("option").length&&(r=n.$trimId.find("option")[1])&&(n.$trimId.val(r.value),n.$trimId.change()),g.ajax({type:"POST",dataType:"json",data:a,url:n.imageApi}).done(g.proxy(n.getImage,n)),g.ajax({type:"POST",dataType:"json",data:a,url:n.pricingBodystyleApi}).done(g.proxy(n.getPrice,n,"bodyStylePrice")),n.$configurationString.val(""),n.useGfWltp&&(n.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},n.cfg.co2StatsTableRow)),2===n.$dropdownSelector.length&&n.buildParams(n.$carlineId.val(),n.$bodystyleId.val()))})):(this.$trimId.find("option").remove().end().append('<option value="">'.concat(this.trimOptionTxt,"</option>")).val(""),this.$engineId.find("option").remove().end().append('<option value="">'.concat(this.engineOptionTxt,"</option>")).val(""),this.$bodystyleHeadline.html(""),this.$trimHeadline.html(""),this.$engineDescription.html(""),this.$co2Image.hide())},changeTrim:function(e){var n=this;this.selectedPackage="",e.preventDefault();var i,a,t,s,r,o=g(e.currentTarget).find(":selected"),l=o.data("co-two-image"),c="packageSelection",d=o.val();0<o.filter("[value]").length&&d&&0<d.length?(r=o.text(),s=o.data("trim-id"),this.selectedSeries=s.split(":")[1],t={bodystyle:this.selectedBodystyle,carline:this.selectedCarline,configRepresentation:c,featureSelection:s,modelyear:this.selectedModelYear,series:this.selectedSeries,type:c},a=g.extend({},this.baseParams,t),this.$trimHeadline.html(r),this.$engineDescription.html(""),l&&!this.useGfWltp&&this.$co2Image.attr("src",l),this.toggleCo2Details(!1),g.ajax({type:"GET",dataType:"json",data:a,url:this.engineApi}).done(function(e){var t=e.featureSelectionSet.featureSelection;t.sort(g.proxy(n.sortSelect,n)),n.$engineId.find("option").remove().end().append('<option value="">'.concat(n.engineOptionTxt,"</option>")).val(""),u.each(t,function(e){var t=JSON.stringify(e.feature.code),i=JSON.stringify(e.feature.featureId),a=e&&e.feature&&e.feature.emissionLabelClassImageURLs&&JSON.stringify(e.feature.emissionLabelClassImageURLs.imageSize1)?e.feature.emissionLabelClassImageURLs.imageSize1:"",s="<option data-engine-id=".concat(i," value=").concat(t," data-co-two-image=").concat(a,">").concat(e.feature.label,"</option>");void 0!==t&&void 0!==i&&n.$engineId.append(s),n.useGfWltp||n.updateCo2Data(e)}),n.xEngine?(n.$engineId.val(n.xEngine),n.$engineId.change(),n.xEngine=null):2===n.$engineId.find("option").length&&(i=n.$engineId.find("option")[1])&&(n.$engineId.val(i.value),n.$engineId.change()),g.ajax({type:"POST",dataType:"json",data:a,url:n.imageTrimApi}).done(g.proxy(n.getImage,n)),g.ajax({type:"POST",dataType:"json",data:a,url:n.pricingTrimApi}).done(g.proxy(n.getPrice,n,"trimPrice")),n.$configurationString.val(""),n.useGfWltp&&(n.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},n.cfg.co2StatsTableRow)),3===n.$dropdownSelector.length&&n.buildParams(n.$carlineId.val(),n.$bodystyleId.val(),n.$trimId.val()))})):(this.$engineId.find("option").remove().end().append('<option value="">'.concat(this.engineOptionTxt,"</option>")).val(""),this.$trimHeadline.html(""),this.$engineDescription.html(""),this.$co2Image.hide())},changeEngine:function(e){var t,i,a,s,n=this,r=g(e.currentTarget).find(":selected"),o=r.data("co-two-image"),l="packageSelection",c=r.val();e.preventDefault(),o&&!this.useGfWltp&&this.$co2Image.attr("src",o),this.toggleCo2Details(!0),0<r.filter("[value]").length&&c&&0<c.length?(a=r.text(),i=r.data("engine-id"),this.selectedPackage=i.split(":")[1],s={bodystyle:this.selectedBodystyle,carline:this.selectedCarline,configRepresentation:l,featureSelection:i,modelyear:this.selectedModelYear,package_version:this.selectedPackage,series:this.selectedSeries,type:l},t=g.extend({},this.baseParams,s),this.$engineDescription.html(a),g.ajax({type:"GET",dataType:"json",data:t,url:this.engineApi}).done(function(e){e.featureSelectionSet.featureSelection.sort(g.proxy(n.sortSelect,n)),n.useGfWltp||g.ajax({type:"POST",dataType:"json",data:t,url:n.pricingDetailApi}).done(g.proxy(n.updateEngineCo2Data,n)).fail(cowp.util.ajaxError),n.dataOvConfigurator?g.ajax({type:"POST",dataType:"json",data:t,url:n.pricingDetailApi}).done(g.proxy(n.updateClassLabel,n)):g.ajax({type:"POST",dataType:"html",data:u.omit(t,"outputType"),url:n.pricingDetailApi}).done(g.proxy(n.updateClassLabel,n)),g.ajax({type:"POST",dataType:"json",data:t,url:n.pricingEngineApi}).done(g.proxy(n.getPrice,n,"enginePrice")),n.$configurationString.val(c),n.useGfWltp&&(n.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},n.cfg.co2StatsTableRow)),4===n.$dropdownSelector.length&&n.buildParams(n.$carlineId.val(),n.$bodystyleId.val(),n.$trimId.val(),n.$engineId.val()))}),this.useGfWltp||this.$co2Wrapper.show()):(this.$engineDescription.html(""),this.$co2Image.hide())},getImage:function(e){var t=this,i=e.configurationResult.exteriorImageViewSet.namedView,a=e.configurationResult.exteriorImageViewSet.label||"",s="",n="";u.each(i,function(e){"gmds_apps"===e.name?(s=e.$,t.$carlineImage.attr("src",s)):"large"===e.name&&(n=e.$,t.$carlineImage.attr("src",n))}),s&&""!==s||(s=n),s&&""!==s&&this.$carlineImage&&(this.$carlineImage.attr("src")!==s&&this.$carlineImage.css("opacity",0).attr("src",s),this.$carlineImage.attr("alt",a))},getPrice:function(e,t){var i=t.priceDetailBean,a=i.optionTotalPrice,s=i.configurationTotalPrice,n="",r="";"carlinePrice"===e?(n=i.carlineSelection.feature.code,r=this.$carlineId.find(":selected").val()):"bodyStylePrice"===e?(n=i.bodystyleSelection.feature.code,r=this.$bodystyleId.find(":selected").val()):"trimPrice"===e?(n=i.seriesSelection.feature.code,r=this.$trimId.find(":selected").val()):"enginePrice"===e&&(n=i.packageSelection.feature.code),n!==r&&"enginePrice"!==e||!n||(a&&(this.$carlinePricingLabel1.html(a.label),this.$carlinePricing1.html(a.$)),u.each(s,g.proxy(this.getTotalPrice,this))),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},getTotalPrice:function(e){var t="",i="",a="",s="";"total"===e.name?(t=e.$,i=e.label,this.$carlinePricingLabel2.html(i),this.$carlinePricing2.html(t)):"subtotal"===e.name&&(a=e.$,s=e.label,this.$carlinePricingLabel3.html(s),this.$carlinePricing3.html(a))},loadCarlineList:function(){var o=this,e="carlineSelection",t={startView:e,type:e},i=g.extend({},this.baseParams,t);this.$carlineImage.attr("src",this.carlineImageData),this.$carlineId.find(":selected").text(this.carlineOptionTxt),this.$bodystyleId.find(":selected").text(this.bodyStyleOptionTxt),this.$trimId.find(":selected").text(this.trimOptionTxt),this.$engineId.find(":selected").text(this.engineOptionTxt),g.ajax({type:"GET",dataType:"json",data:i,url:this.carlineApi}).done(function(e){var t,i="",a="",s="";e.featureSelectionSetList?(a=e.featureSelectionSetList).featureSelection?i=a.featureSelection:a.featureSelectionSet[0]?(i=[],u.each(a.featureSelectionSet,function(e){g.merge(i,e.featureSelection)})):i=a.featureSelectionSet.featureSelection:e.featureSelectionSet&&(i=e.featureSelectionSet.featureSelection),(i=(i=cowp.util.gf.filter(o.xCarlineFilters,"feature.code",i)).filter(function(e){return!e.feature.carline_service.includes(null)})).forEach(function(e){e.feature.carline_service.map(function(e){return e.toLowerCase()})}),t="requestTestdrive"===o.$requestType.val()?"testdrive,all":"all",(i=cowp.util.gf.filter(t,"feature.carline_service",i)).sort(g.proxy(o.sortSelect,o)),u.each(i,function(e){var t,i,a,s,n=[];t=e.feature.code,i=e.feature.featureId,a=e&&e.feature&&e.feature.emissionLabelClassImageURLs&&e.feature.emissionLabelClassImageURLs.imageSize1?e.feature.emissionLabelClassImageURLs.imageSize1:"",s=e&&e.feature?e.feature.featureGroup:"",(n=g("<option></option>")).attr("value",t),n.attr("data-carline-id",i),n.attr("data-co-two-image",a),n.attr("data-segment",s),n.text(e.feature.label),t&&void 0!==i&&o.$carlineId.append(n)});var n=o.$carlineId.find("option");o.xCarline&&o.xModelYear?(n.each(function(e,t){var i=g(t),a=i.data("carlineId")||"",s=a?a.split(";"):"",n=s&&(s[0]||""),r=s&&(s[1]||"");return!(0<=n.indexOf(o.xCarline)&&0<=r.indexOf(o.xModelYear))||(i.prop("selected",!0),!1)}),o.$carlineId.change()):2===n.length&&(s=n[1])&&(o.$carlineId.val(s.value),o.$carlineId.change())})},checkForNGVC:function(){var i=this,e=document.location.search.replace("?",""),t="",a="",s=!1,n="";return e&&(t=e.split("&"),u.each(t,function(e){a=e.split("=");var t=_slicedToArray(a,1);(n=t[0])&&("x-ngBackLinkURL"===n?(i.xNgvcConfig=decodeURIComponent(a[1]),i.xNgvcConfig=i.xNgvcConfig?i.xNgvcConfig.replace("http:","").replace("https:","").replace(":80","").replace(":443",""):"",s=!0):"agencyrolecode"===n&&i.$agencyRoleCode.val(a[1]))})),this.xNgvcConfig?s:(this.xCarline=cowp.util.gf.loadQueryString("x-carline"),this.xModelYear=cowp.util.gf.loadQueryString("x-modelyear"),this.xBodyStyle=cowp.util.gf.loadQueryString("x-bodystyle"),this.xTrim=cowp.util.gf.loadQueryString("x-trim"),this.xEngine=cowp.util.gf.loadQueryString("x-engine"),!1)},updateClassLabel:function(e){var t=g(e),i=(3===t.length?g(t[2]):g()).find(".energy_label-chart p");i.find("span").remove(),this.$co2StatsLabel1.html(i.html())},updateEngineCo2Data:function(e){var t=this;e&&e.priceDetailBean&&(e.priceDetailBean.energyLabel&&(e.priceDetailBean.energyLabel.labelClass&&this.$co2Stats1.html(e.priceDetailBean.energyLabel.labelClass),e.priceDetailBean.energyLabel.imageURLs&&this.$co2Image.attr("src",e.priceDetailBean.energyLabel.imageURLs.imageSize1)),u.each(e.priceDetailBean.energyLabelEngineAttribute,function(e){"fuelcomb"===e.key&&(t.$co2StatsLabel2.html(e.label),t.$co2Stats2.html(e.$)),"emlimit"===e.key&&(t.$co2StatsLabel3.html(e.label),t.$co2Stats3.html(e.$))}))},addToCommentField:function(e,t){var i=this.$commentID.val();this.$commentID.val("".concat(i,"| ").concat(t,": ").concat(e))},updateCarlineDetails:function(e){e&&(e.carlineLabel&&this.$carlineHeadline.html(e.carlineLabel),e.bodystyleLabel&&this.$bodystyleHeadline.html(e.bodystyleLabel),e.series&&this.$trimHeadline.html(e.series),e.engineName&&this.$engineDescription.html(e.engineName),e.formattedMonthlyRate&&this.addToCommentField(e.formattedMonthlyRate,"formattedMonthlyRate"),e.formattedLeaseTerm&&this.addToCommentField(e.formattedLeaseTerm,"formattedLeaseTerm"),e.formattedLeaseMileage&&this.addToCommentField(e.formattedLeaseMileage,"formattedLeaseMileage"),e.formattedPrivateOffer&&this.addToCommentField(e.formattedPrivateOffer,"formattedPrivateOffer"),e.formattedDownpayment&&this.addToCommentField(e.formattedDownpayment,"formattedDownpayment"),e.leaseTitle&&this.addToCommentField(e.leaseTitle,"leaseTitle"))},updatePriceData:function(e){e&&e.prices&&(e.prices[0].label&&this.$carlinePricingLabel1.html(e.prices[0].label),e.prices[0].value&&this.$carlinePricing1.html(e.prices[0].value),e.prices[1].label&&this.$carlinePricingLabel2.html(e.prices[1].label),e.prices[1].value&&this.$carlinePricing2.html(e.prices[1].value),e.prices[2].label&&this.$carlinePricingLabel3.html(e.prices[2].label),e.prices[2].value&&this.$carlinePricing3.html(e.prices[2].value))},updateVehicleImage:function(e){e&&e.vehicleImageURL&&this.$carlineImage.attr("src",e.vehicleImageURL)},updateCo2Data:function(e){e&&e.feature?(e.feature.emissionCombinedLabel&&this.$co2StatsLabel3.html(e.feature.emissionCombinedLabel),e.feature.emissionCombinedValue&&this.$co2Stats3.html(e.feature.emissionCombinedValue),e.feature.fuelCombinedLabel&&this.$co2StatsLabel2.html(e.feature.fuelCombinedLabel),e.feature.fuelCombinedValue&&this.$co2Stats2.html(e.feature.fuelCombinedValue),e.feature.emissionLabelClassLabel&&this.$co2Headline.html(e.feature.emissionLabelClassLabel),e.feature.emissionLabelClassDisclaimer&&this.$co2Disclaimer.html(e.feature.emissionLabelClassDisclaimer)):e&&e.energyLabel&&(e.energyLabel.title&&this.$co2Headline.html(e.energyLabel.title),e.energyLabel.header&&this.$co2Disclaimer.html(e.energyLabel.header),e.energyLabel.classLabel&&this.$co2StatsLabel1.html(e.energyLabel.classLabel),e.energyLabel.classValue&&this.$co2Stats1.html(e.energyLabel.classValue),e.energyLabel.consumptionLabel&&this.$co2StatsLabel2.html(e.energyLabel.consumptionLabel),e.energyLabel.consumptionValue&&this.$co2Stats2.html(e.energyLabel.consumptionValue),e.energyLabel.co2EmissionLabel&&this.$co2StatsLabel3.html(e.energyLabel.co2EmissionLabel),e.energyLabel.co2EmissionValue&&this.$co2Stats3.html(e.energyLabel.co2EmissionValue),e.energyLabel.imageUrl1&&this.$co2Image.attr("src",e.energyLabel.imageUrl1))},updateCo2DataWltp:function(e){g.proxy(this.buildStatsTable(e),this)},buildStatsTable:function(e){function t(e){e?n.$co2Image.attr("src",e):n.$co2Image.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}var i,a,s,n=this,r=e[0];if(r){switch(u.get(r,"legalDisclaimer")&&this.$co2Disclaimer.text(r.legalDisclaimer),r.energyLabelView){case"1":case"2":case"3":t(u.get(r,"efficiencyLabels.maxEnergyLabelUrl"));break;case"4":t(u.get(r,"efficiencyLabels.maxEnergyLabelSmallUrl"));break;default:t("")}u.get(r,"lines")&&r.lines.forEach(function(e,t){(i=e.valueUnitPairs)&&(a=cowp.util.formatWltpUnits(i),s=cowp.util.formatWltpValues(i)),n.$co2StatsTable.append(cowp.util.compileTpl({labelIndex:t+2,label:e.emissionAttributeLabel,formattedVal:s,formattedUnit:a},n.cfg.co2StatsTableRow))})}},setModelYearHiddenField:function(e){var t=this,i=e.split(";"),a="";u.each(i,function(e){"modelyear"===(a=e.split(":"))[0]&&t.$modelYear.val(a[1])})},onBroadcastWindowResize:function(){cowp.util.isWindowSize("xlarge")?0<this.$carlineObj.length&&0===this.$co2Wrapper.length?this.$carlineDetails.detach().appendTo(this.cfg.noCo2Wrapper):0<this.$carlineObj.length&&this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector):cowp.util.isWindowSize("large")?0<this.$carlineObj.length&&0===this.$co2Wrapper.length?this.$carlineDetails.detach().appendTo(this.$carlineObj):0<this.$carlineObj.length&&this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector):cowp.util.isWindowSize("medium")?this.$carlineDetails.detach().appendTo(this.$carlineObj):this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector)},onBroadcastWindowScroll:function(){}})}(cowp.$,cowp._),function(u){u.extend(!0,cowp.conf.cmp,{gmit_gf_vehicle_selector_thank_you:{name:"gmit_gf_vehicle_selector_thank_you",carlineDetails:".js-gmit-gf-carline-detail",carlineImage:".js-gmit-gf-carline-image",carlineImageSelector:".gmit-gf-carline-image",hideClass:"gmit-gf-hide",hideSelector:".gmit-gf-hide",clonedLinkSelector:".js-gmit-gf-click-link",thankYouSelector:".gmit-gf-thank-you",vehicleSelectorContainer:".gmit-gf-vehicle-selector",vehicleSelectorV2Container:".gmit-gf-vehicle-selector-v2",vehicleSelectorV3Container:".gmit-gf-vehicle-selector-v3",vsChangeButtonSelector:".js-gmit-gf-vs-change"}}),cowp.mod.gmit_gf_vehicle_selector_thank_you=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.$carlineDetail=e.find(this.cfg.carlineDetails),this.$carlineImage=e.find(this.cfg.carlineImage),this.sandbox.subscribe(this.id,this)},prepare:function(){var e=this.$ctx,t=cowp.util.getClosestModule(this.$ctx,cowp.conf.cmp.gmit_gf_request_type.name),i=t.find(this.cfg.vehicleSelectorContainer),a=t.find(this.cfg.vehicleSelectorV2Container),s=t.find(this.cfg.vehicleSelectorV3Container),n=e.find(this.cfg.followOn),r=t.find(this.cfg.thankYouSelector),o=cowp.util.getModuleId(n),l=cowp.util.getModuleId(t),c=cowp.util.getModuleId(r),d=cowp.util.getModuleId(i),h=cowp.util.getModuleId(a),g=cowp.util.getModuleId(s);e.on("click",this.cfg.vsChangeButtonSelector,u.proxy(this.onChangeVehicle,this)),0<o&&this.sandbox.subscribe(o,this),0<l&&this.sandbox.subscribe(l,this),0<c&&this.sandbox.subscribe(c,this),0<d&&this.sandbox.subscribe(d,this),0<h&&this.sandbox.subscribe(h,this),0<g&&this.sandbox.subscribe(g,this)},onChangeVehicle:function(){this.fire("gmitResetThankYouParagraph",this.id),this.fire("gmitGfChangeVehicle",this.id),this.fire("resetFollow",this.id)},onGmitGfUpdateVehicle:function(e){var t=[],i=[],a=[];e&&(e.$carlineDetail&&0<e.$carlineDetail.length?(this.$carlineDetail.empty(),(i=e.$carlineDetail.first().clone()).find(this.cfg.hideSelector).removeClass(this.cfg.hideClass),(a=i.find(this.cfg.clonedLinkSelector)).length&&a.remove(),this.$carlineDetail.html(i)):e.$co2Wrapper&&0<e.$co2Wrapper.length&&(this.$carlineDetail.empty(),this.$carlineDetail.html(e.$co2Wrapper.first().clone())),e.$image&&0<e.$image.length&&(this.$carlineImage.empty(),(t=e.$image.find("".concat(this.cfg.carlineImageSelector,":first"))).length?this.$carlineImage.html(t.clone()):this.$carlineImage.html(e.$image.clone())))}})}(cowp.$),function(x,C){x.extend(!0,cowp.conf.cmp,{gmit_gf_vehicle_selector_v2:{name:"gmit_gf_vehicle_selector_v2",selector:".gmit-gf-vehicle-selector-v2",caller:"x-caller",carlineDetailWrapper:".gmit-gf-carline-detail-wrapper",co2Selector:".gmit-gf-co2-data",dataEndPoints:"end-point-list",dataMarketXml:"market-xml",dataVdsParams:"vds-params",dropdownListSelector:".gmit-gf-dropdown-list",filter:"x-filters",imageSelector:".gmit-gf-carline-obj",linkSelector:".gmit-gf-link",pricingSelector:".gmit-gf-pricing",textGroupSelector:".gmit-gf-text-group"}}),cowp.mod.gmit_gf_vehicle_selector_v2=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;this.imageId=cowp.util.gf.setupModuleId(e,this.cfg.imageSelector),this.imageCheck=0<this.imageId,this.co2Id=cowp.util.gf.setupModuleId(e,this.cfg.co2Selector),this.co2Check=0<this.co2Id,this.pricingId=cowp.util.gf.setupModuleId(e,this.cfg.pricingSelector),this.pricingCheck=0<this.pricingId,this.dropdownListId=cowp.util.gf.setupModuleId(e,this.cfg.dropdownListSelector),this.dropdownListCheck=0<this.dropdownListId,this.textGroupId=cowp.util.gf.setupModuleId(e,this.cfg.textGroupSelector),this.textGroupCheck=0<this.textGroupId,this.linkId=cowp.util.gf.setupModuleId(e,this.cfg.linkSelector),this.linkCheck=0<this.linkId,this.regionConfig=cowp.conf.gf.north_america,this.queryString=cowp.conf.gf.queryObject,this.endPoints=e.data(this.cfg.dataEndPoints),this.marketXml=e.data(this.cfg.dataMarketXml),this.vdsParams=e.data(this.cfg.dataVdsParams),this.preSelectValues=[],this.loadPreselect(this.queryString,this.regionConfig.dropdownPreselectDrilldowns),this.$carlineDetailWrapper=e.find(this.cfg.carlineDetailWrapper),this.$image=e.find(this.cfg.imageSelector),this.thankYouVehicle={$carlineDetail:this.$carlineDetailWrapper,$image:this.$image},this.sandbox.subscribe(this.id,this)},prepare:function(){this.xFilters=C.hasIn(this.queryString,this.cfg.filter)?this.queryString[this.cfg.filter]:"",this.imageCheck&&this.sandbox.subscribe(this.imageId,this),this.co2Check&&this.sandbox.subscribe(this.co2Id,this),this.pricingCheck&&this.sandbox.subscribe(this.pricingId,this),this.dropdownListCheck&&this.sandbox.subscribe(this.dropdownListId,this),this.textGroupCheck&&this.sandbox.subscribe(this.textGroupId,this),this.linkCheck&&this.sandbox.subscribe(this.linkId,this)},finish:function(){var t=this,e=this.regionConfig.queryParameters,i=[],a="",s="",n="",r="";this.linkCheck&&this.fire("gmitGfHideLink",[this.linkId]),this.queryString&&C.hasIn(this.queryString,this.cfg.caller)?(C.each(e,function(e){t.queryString[t.cfg.caller]===e.callerType&&e.dropdownHide?(i=e.hiddenFieldNames,t.dropdownListCheck&&t.fire("gmitGfHideDropdownList",[t.dropdownListId]),t.queryString.agencyrolecode&&t.updateHiddenFields(["agencyRoleCode"],t.queryString),i.length&&t.updateHiddenFields(i,t.queryString),t.queryString["x-ngBackLinkURL"]?(x.ajax({type:"GET",dataType:"json",url:decodeURIComponent(t.queryString["x-ngBackLinkURL"])}).done(function(e){e&&(t.updateComponent(e,t.regionConfig.headlines,t.textGroupId),t.updateComponent(e,t.regionConfig.pricing,t.pricingId),t.updateComponent(e,t.regionConfig.co2,t.co2Id),t.updateComponent(e,t.regionConfig.image,t.imageId),t.updateHiddenFields(i,e))}),t.$carlineDetailWrapper.show(),t.co2Check&&t.fire("gmitGfShowCo2Image",[t.co2Id])):t.linkCheck&&t.marketXml&&"fs"===t.queryString[t.cfg.caller]?(t.loadFirstDropdown(),t.fire("gmitGfSetupChangeEvents",[t.dropdownListId]),t.fire("gmitGfSetupClickEvent",[t.linkId]),e.ajaxCall.url=t.marketXml,x.ajax(e.ajaxCall).done(function(e){e&&(a=t.getConfigStringFromXml(e,[t.queryString["x-carline"],t.queryString["x-modelyear"]],[t.queryString["x-bodystyle"]],[t.queryString.trimVcCode]),s=a.attr("title"),t.queryString.trimDesc=s,t.updateComponent(t.queryString,t.regionConfig.headlines,t.textGroupId),t.$carlineDetailWrapper.show(),t.fire("gmitGfShowLink",[t.linkId]),t.fire("gmitGfUpdateVehicle",t.thankYouVehicle,[t.id]))})):(t.updateComponent(t.queryString,t.regionConfig.headlines,t.textGroupId),t.$carlineDetailWrapper.show(),e.setPrice&&(t.queryString.msrpPrice?t.updateComponent(t.queryString,t.regionConfig.pricing,t.pricingId):t.marketXml&&(e.ajaxCall.url=t.marketXml,x.ajax(e.ajaxCall).done(function(e){e&&(a=t.getConfigStringFromXml(e,[t.queryString["x-carline"],t.queryString["x-modelyear"]],[t.queryString["x-bodystyle"]],[t.queryString.trimVcCode]),r=a.attr("formatted_price"),t.updateComponent({msrpPrice:r},t.regionConfig.pricing,t.pricingId),t.fire("gmitGfUpdateVehicle",t.thankYouVehicle,[t.id]))}))),e.setImage&&t.marketXml&&(e.ajaxCall.url=t.marketXml,x.ajax(e.ajaxCall).done(function(e){e&&(a=t.getConfigStringFromXml(e,[t.queryString["x-carline"],t.queryString["x-modelyear"]],[t.queryString["x-bodystyle"]],[t.queryString.trimVcCode]),n=a.find("color").attr("imageURL"),t.updateComponent({imageUrl:n},t.regionConfig.image,t.imageId),t.fire("gmitGfUpdateVehicle",t.thankYouVehicle,[t.id]))})))):t.queryString[t.cfg.caller]!==e.callerType||e.dropdownHide||(t.loadFirstDropdown(),t.dropdownListCheck&&t.fire("gmitGfSetupChangeEvents",[t.dropdownListId]))}),this.fire("gmitGfRemoveHideClasses",[this.textGroupId]),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])):(this.loadFirstDropdown(),this.dropdownListCheck&&this.fire("gmitGfSetupChangeEvents",[this.dropdownListId]))},loadPreselect:function(t,e){var i=this,a={callerType:cowp.conf.gf.queryObject["x-caller"]},s=C.filter(this.regionConfig.queryParameters,a,[]),n="",r="",o=[],l="",c="",d="",h="",g=[],u=this.checkData(this.vdsParams,this.queryString);return t&&this.queryString&&(s.length&&this.queryString&&u?(g=u.split("/"),l=this.parseTrimPath(g,"year"),c=this.parseTrimPath(g,"model"),h=this.parseTrimPath(g,"trim"),d=this.parseTrimPath(g,"bodyStyle"),s[0].ajaxCall.url=this.marketXml,x.ajax(s[0].ajaxCall).done(function(e){e&&(n=i.getConfigStringFromXml(e,[c,l],[d],[h]),r=n.attr("formatted_config")?"".concat(n.attr("formatted_config")," ").concat(n.attr("formatted_drive")):n.attr("formatted_drive"),i.preSelectValues.push(l),i.preSelectValues.push(d),i.preSelectValues.push(r),i.preSelectValues.push(h),i.loadFirstDropdown(!0))})):C.each(e,function(e){return C.hasIn(t,e)?(i.preSelectValues.push(t[e]),!0):o})),o},parseXML:function(e,t,i){var a="";return C.each(e,function(e){t&&t.length&&i&&i.length&&x(e).attr(t)===i&&(a=x(e))}),a},sortSelect:function(e,t){return e.value.localeCompare(t.value)},buildAjaxCall:function(e){var t={};return e&&C.hasIn(e,"ajaxCallType")&&C.hasIn(e,"endPointUrl")&&C.hasIn(e,"ajaxDataType")&&C.hasIn(e,"ajaxContentType")&&(t.type=e.ajaxCallType,t.url=e.endPointUrl,t.dataType=e.ajaxDataType,t.contentType=e.ajaxContentType,C.hasIn(e,"urlParameters")&&C.each(e.urlParameters,function(e){C.hasIn(e,"name")&&C.hasIn(e,"value")&&C.set(t,"data.".concat(e.name),e.value)})),t},loadFirstDropdown:function(e){var a=this,s={},n={},r={},o="",l=!1;""!==this.checkData(this.vdsParams,this.queryString)&&!e||(this.dropdownListCheck&&this.fire("gmitGfResetDropdowns",[this.dropdownListId]),C.each(this.endPoints,function(i){var e=a.buildAjaxCall(i);x.ajax(e).done(function(e){if(e&&"loadFirstDropdown"===i.endPointTag&&(s.value="",s.index=0,n.option="",n.index=0,1===(o=cowp.util.gf.filter(a.xFilters,"code",a.regionConfig.getFirstDropdownData(e))).length&&(l=!0),C.each(o,function(e){n.option=a.regionConfig.setupOptionList(e),a.dropdownListCheck&&(a.fire("gmitGfAddOptionToDropdown",n,[a.dropdownListId]),l&&(r.index=n.index,r.value=n.option.val(),l=!1,a.fire("gmitGfSelectDropdownOption",r,[a.dropdownListId])))}),a.preSelectValues[0]&&a.dropdownListCheck)){var t=_slicedToArray(a.preSelectValues,1);s.value=t[0],a.preSelectValues=C.drop(a.preSelectValues),a.fire("gmitGfSelectDropdownOption",s,[a.dropdownListId])}})}))},checkData:function(e,t){var i="";return t&&C.each(e,function(e){C.hasIn(t,e)&&(i=t[e])}),i},updateComponent:function(t,e,i){var a=this,s=[],n="",r={};t&&e&&0<i&&C.each(e,function(e){s=e.drilldowns,n=a.checkData(s,t),r=e.getParams(n),e.fire&&r&&a.fire(e.fire,r,[i])})},updateHiddenFields:function(e,t){var i=this,a=this.regionConfig.hiddenFields,s="",n="",r={},o={};t&&a&&this.dropdownListCheck&&C.each(e,function(e){o=a[e],s=o.drilldowns,n=i.checkData(s,t),r=o.getParams(n),i.fire(o.fire,r,[i.dropdownListId])})},parseTrimPath:function(e,t){var i="";if(e)if(7===e.length)switch(t){case"year":i=e[3];break;case"model":i=e[4];break;case"bodyStyle":i=e[5];break;case"trim":i=e[6]}else if(4===e.length)switch(t){case"year":i=_slicedToArray(e,1)[0];break;case"model":i=e[1];break;case"bodyStyle":i=e[2];break;case"trim":i=e[3]}return i},getConfigStringFromXml:function(e,t,i,a){x();var s=x(),n=(x(),x()),r=(x(),x()),o=x();return e&&(s=x(e).find("vehicledata").find("carline"),n=this.regionConfig.parseXML(s,["code","model-year"],t).find("bodystyle"),r=this.regionConfig.parseXML(n,["code"],i).find("series"),o=this.regionConfig.parseXML(r,["code"],a)),o},onGmitGfSetThankYou:function(){this.thankYouVehicle&&this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},onGmitGfLinkClick:function(){var e={},t={};this.linkCheck&&this.fire("gmitGfHideLink",[this.linkId]),this.textGroupCheck&&this.fire("gmitGfHideTextGroup",[this.textGroupId]),this.pricingCheck&&this.fire("gmitGfHidePricing",[this.pricingId]),this.imageCheck&&this.fire("gmitGfResetDefaultImage",[this.imageId]),this.dropdownListCheck&&(e.index=0,t.index=0,t.value="",this.fire("gmitGfResetDropdowns",e,[this.dropdownListId]),this.fire("gmitGfSelectDropdownOption",t,[this.dropdownListId]),this.fire("gmitGfShowDropdownList",[this.dropdownListId]))},onGmitGfDropdownChange:function(s){var n=this,e="",r="",o="",l="",c="",t="",d="",i="",h="",g="",u=[],a={},f={},p={},m={},b={},y="",v={},S=[],w=!1;s&&this.regionConfig&&(e=this.regionConfig.type[s.type],r=this.regionConfig.dropdownDataDrilldown,o=this.regionConfig.pricing,l=this.regionConfig.co2,c=this.regionConfig.image,t=s.index,d=s.nextIndex,i=s.headlineIndex,h=s.coTwoImage,g=s.imageReset,S=s.endPointList,this.dropdownListCheck&&(m.index=t,this.fire("gmitGfResetDropdowns",m,[this.dropdownListId])),this.fire("gmitGfCarlineSelected",[this.id]),this.textGroupCheck&&s.setTextGroup&&(a.newText="",a.index=i,p.newText=s.selectedText,p.index=i,this.fire("gmitGfResetTextGroup",a,[this.textGroupId]),this.fire("gmitGfSetText",p,[this.textGroupId])),C.hasIn(e,"hiddenFieldNames")&&this.updateHiddenFields(e.hiddenFieldNames,s),this.co2Check&&s.coTwoImage&&(f.src=s.coTwoImage,this.fire("gmitGfSetCo2Image",f,[this.co2Id]),this.fire("gmitGfShowCo2Image",[this.co2Id]),this.fire("gmitGfShowCo2",[this.co2Id])),this.$carlineDetailWrapper.show(),s.value&&s.value.length?C.each(S,function(i){var e=n.buildAjaxCall(i),a=s.featureId;a&&(e.data.featureSelection=a),x.ajax(e).done(function(e){if(r&&"loadDropdown"===i.endPointTag?(u=C.hasIn(e,r)?e[r]:"",v.index=d,n.imageCheck&&g&&n.updateComponent(e,c,n.imageId),n.pricingCheck&&s.setPricing&&(n.updateComponent(e,o,n.pricingId),n.fire("gmitGfShowPricing",[n.pricingId])),1===u.length&&(w=!0),C.each(u,function(e){var t=n.regionConfig.typeArray[d];y=n.regionConfig.getDropdownOptionData(e),v.option=n.regionConfig.setupOptionTag(a,t,h,y),n.dropdownListCheck&&(n.fire("gmitGfAddOptionToDropdown",v,[n.dropdownListId]),w&&(b.index=d,b.value=v.option.val(),w=!1,n.fire("gmitGfSelectDropdownOption",b,[n.dropdownListId]))),n.updateComponent(e,n.regionConfig.co2,n.co2Id)})):"image"===i.endPointTag?n.updateComponent(e,c,n.imageId):"price"===i.endPointTag?n.updateComponent(e,o,n.pricingId):"co2"===i.endPointTag&&n.updateComponent(e,l,n.co2Id),n.preSelectValues[0]&&n.dropdownListCheck){b.index=d;var t=_slicedToArray(n.preSelectValues,1);b.value=t[0],n.preSelectValues=C.drop(n.preSelectValues),n.fire("gmitGfSelectDropdownOption",b,[n.dropdownListId])}})}):(this.co2Check&&(p.newText="",this.fire("gmitGfSetText",p,[this.textGroupId]),this.fire("gmitGfHideCo2Image",[this.co2Id])),this.imageCheck&&this.fire("gmitGfResetDefaultImage",[this.imageId]),this.pricingCheck&&(this.fire("gmitGfHidePricing",[this.pricingId]),this.updateComponent({},o,this.pricingId))),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id]))}})}(cowp.$,cowp._),function(l,c){l.extend(!0,cowp.conf.cmp,{gmit_gf_vehicle_selector_v3:{agencyRoleCodeSelector:"#gmit-gf-agency-role-code",bodystyleHeadline:".gmit-gf-bodystyle-headline",bodystyleSelector:"#gmit-gf-bodystyle",carlineDetailWrapper:".gmit-gf-carline-detail-wrapper",carlineFilter:"x-filters",carlineHeadline:".gmit-gf-carline-headline",carlineImage:".gmit-gf-carline-image",carlineObj:".gmit-gf-carline-obj",carlinePricing1:".gmit-gf-carline-pricing1",carlinePricing2:".gmit-gf-carline-pricing2",carlinePricing3:".gmit-gf-carline-pricing3",carlinePricing:".gmit-gf-carline-pricing",carlinePricingLabel1:".gmit-gf-carline-pricing-label1",carlinePricingLabel2:".gmit-gf-carline-pricing-label2",carlinePricingLabel3:".gmit-gf-carline-pricing-label3",carlineSelector:"#gmit-gf-carline",carlineWrapperSelector:".gmit-gf-carline-wrapper",co2Chart:".gmit-gf-co2-chart",co2Description:".gmit-gf-co2-description",co2Disclaimer:".gmit-gf-co2-disclaimer",co2Headline:".gmit-gf-co2-headline",co2Image:".gmit-gf-co2-image",co2Stats1:".gmit-gf-co2-stats1",co2Stats2:".gmit-gf-co2-stats2",co2Stats3:".gmit-gf-co2-stats3",co2Stats:".gmit-gf-co2-stats",co2StatsLabel1:".gmit-gf-co2-stats-label1",co2StatsLabel2:".gmit-gf-co2-stats-label2",co2StatsLabel3:".gmit-gf-co2-stats-label3",co2StatsTableRow:'<tr><td class="gmit-gf-co2-stats-label{{labelIndex}}">{{label}} {{formattedUnit}}</td><td class="gmit-gf-co2-stats{{labelIndex}}">{{formattedVal}}</td></tr>',co2StatsTableSelector:".gmit-gf-co2-stats-table",co2Wrapper:".gmit-gf-co2-wrapper",commentFieldSelector:"#gmit-gf-comment",configIDSelector:"#gmit-gf-config-id",configurationString:"#gmit-gf-configuration-string",configurationURL:"#gmit-gf-configuration-url",dataCarlineImage:"carline-image",dropdownSelector:".gmit-gf-dropdown",gfErrorSelector:".gmit-gf-wltp-error",modelYearSelector:"#gmit-gf-configured-vehicle-model-year",name:"gmit_gf_vehicle_selector_v3",noCo2Wrapper:".gmit-gf-no-co2-wrapper",segmentSelector:"#gmit-gf-segment",transmission:"#gmit-gf-transmission",description:"#gf-gf-vehicle-description",descriptionIdFallback:"#gmit-gf-vehicle-description",useGfWltp:"use-gf-wltp",imagePickerCarline:".gmit-gf-image-picker-cl",imagePickerBodystyle:".gmit-gf-image-picker-bs",imagePickerCarlineContainer:".gmit-gf-image-picker-cl-container",imagePickerInput:".gmit-gf-image-picker-input-select",imagePickerScrollPrev:".gmit-gf-image-picker-cl-scroll-prev",imagePickerScrollNext:".gmit-gf-image-picker-cl-scroll-next",imagePickerScrollStep:150,imagePickerBodystyleContainer:".gmit-gf-image-picker-bs-container",imagePickerCarlineItem:".gmit-gf-image-picker-cl-item",imagePickerBodystyleItem:".gmit-gf-image-picker-bs-item",imagePickerCarlineSelected:"gmit-gf-image-picker-cl-item-selected",imagePickerBodystyleSelected:"gmit-gf-image-picker-bs-item-selected",imagePickerCarlineTemplate:'\n        <div class="gmit-gf-image-picker-cl-item" data-id="{{id}}" data-code="{{code}}" data-label="{{name}}">\n          <div class="gmit-gf-image-picker-cl-name" title="{{name}}">{{name}}</div>\n          <i class="icon icon-close-modal"></i>\n        </div>\n      ',imagePickerBodystyleTemplate:'\n        <div class="gmit-gf-image-picker-bs-item" title="{{name}}" data-id="{{id}}" data-code="{{code}}" data-label="{{name}}" data-carline-code="{{carlineCode}}" data-carline-label="{{carlineLabel}}">\n          <img class="gmit-gf-image-picker-bs-image" src="{{image}}">\n          <div class="gmit-gf-image-picker-bs-name">{{name}}</div>\n        </div>\n      '}}),cowp.mod.gmit_gf_vehicle_selector_v3=cowp.mod.AtomicMod.extend({events:{},initElements:function(){var e=this.$ctx;if(this.dataAppId=e.data("app-id"),this.dataBrand=e.data("brand"),this.dataChannel=e.data("channel"),this.dataCountry=e.data("country"),this.dataLanguage=e.data("language"),this.dataGfWidgetId=e.data("gf-widget-id"),this.dataOvConfigurator=e.data("ovconfigurator"),this.carlineList=this.$ctx.data("vehicles-data").vehicles,this.netPriceLabel=this.$ctx.data("total-price-label"),this.priceLabel=this.$ctx.data("gross-price-label"),this.allLabel=e.data("label-all"),this.baseParams={applyDefaults:"true",brand:this.dataBrand,channel:this.dataChannel,country:this.dataCountry,language:this.dataLanguage,outputType:"json"},this.selectedCarline="",this.selectedModelYear="",this.selectedBodystyle="",this.selectedSeries="",this.selectedPackage="",this.$segment=e.find(this.cfg.segmentSelector),this.$carlineId=e.find(this.cfg.carlineSelector),this.$configurationString=e.find(this.cfg.configurationString),this.$configurationURL=e.find(this.cfg.configurationURL),this.carlineOptionTxt=this.$carlineId.data("placeholder"),this.$bodystyleId=e.find(this.cfg.bodystyleSelector),this.bodyStyleOptionTxt=this.$bodystyleId.data("placeholder"),this.$carlineDetails=e.find(this.cfg.carlineDetailWrapper),this.$carlineObj=e.find(this.cfg.carlineObj),this.$co2Wrapper=e.find(this.cfg.co2Wrapper),this.$carlineHeadline=e.find(this.cfg.carlineHeadline),this.$bodystyleHeadline=e.find(this.cfg.bodystyleHeadline),this.$carlineImage=e.find(this.cfg.carlineImage),this.carlineImageData=this.$carlineImage.data(this.cfg.dataCarlineImage),this.$carlinePricing=e.find(this.cfg.carlinePricing),this.$carlinePricingLabel1=e.find(this.cfg.carlinePricingLabel1),this.$carlinePricingLabel2=e.find(this.cfg.carlinePricingLabel2),this.$carlinePricingLabel3=e.find(this.cfg.carlinePricingLabel3),this.$carlinePricing1=e.find(this.cfg.carlinePricing1),this.$carlinePricing2=e.find(this.cfg.carlinePricing2),this.$carlinePricing3=e.find(this.cfg.carlinePricing3),this.$co2Headline=e.find(this.cfg.co2Headline),this.$co2Description=e.find(this.cfg.co2Description),this.$co2Chart=e.find(this.cfg.co2Chart),this.$co2Image=e.find(this.cfg.co2Image),this.$co2Disclaimer=e.find(this.cfg.co2Disclaimer),this.$co2Stats=e.find(this.cfg.co2Stats),this.$co2StatsLabel1=e.find(this.cfg.co2StatsLabel1),this.$co2StatsLabel2=e.find(this.cfg.co2StatsLabel2),this.$co2StatsLabel3=e.find(this.cfg.co2StatsLabel3),this.$co2Stats1=e.find(this.cfg.co2Stats1),this.$co2Stats2=e.find(this.cfg.co2Stats2),this.$co2Stats3=e.find(this.cfg.co2Stats3),this.$co2StatsTable=this.$co2Wrapper.find(this.cfg.co2StatsTableSelector),this.$dropdownSelector=e.find(this.cfg.dropdownSelector),this.$gfError=e.find(this.cfg.gfErrorSelector),this.$modelYear=e.find(this.cfg.modelYearSelector),this.$transmission=e.find(this.cfg.transmission),this.$configID=e.find(this.cfg.configIDSelector),this.$agencyRoleCode=e.find(this.cfg.agencyRoleCodeSelector),this.$commentID=e.find(this.cfg.commentFieldSelector),this.useGfWltp=this.$co2Wrapper.data(this.cfg.useGfWltp),this.xNgvcFlag=this.checkForNGVC(),this.thankYouVehicle={$co2Wrapper:this.$co2Wrapper,$carlineDetail:e.find(this.cfg.carlineDetailWrapper),$image:e.find(this.cfg.carlineObj)},this.$imagePickerCarline=e.find(this.cfg.imagePickerCarline),this.$imagePickerBodystyle=e.find(this.cfg.imagePickerBodystyle),!e.find(this.cfg.description).length&&!e.find(this.cfg.descriptionIdFallback).length){var t=this.$transmission[0].parentNode,i=t.cloneNode();this.$description=this.$transmission[0].cloneNode(),this.$description.id="gf-gf-vehicle-description",this.$description.name="salesLead.configuredVehicle.description",i.appendChild(this.$description),t.parentNode.insertBefore(i,t.nextSibling)}e.find(this.cfg.description).length?this.$description=e.find(this.cfg.description):e.find(this.cfg.descriptionIdFallback).length&&(this.$description=e.find(this.cfg.descriptionIdFallback)),this.mpvCode=c.chain(this.xNgvcConfig).replace("?","&").split("&").map(c.partial(c.split,c,"=",2)).fromPairs().value().mpv},prepare:function(){var e=this.$ctx,t=cowp.conf.gf.queryObject;this.xCarlineFilters=t&&c.hasIn(t,this.cfg.carlineFilter)?t[this.cfg.carlineFilter]:"",this.$imagePickerCarline.length?(this.resetHTML(),this.loadImagePicker()):this.xNgvcFlag?(this.$dropdownSelector.hide(),this.loadNGVCInfo()):(this.$modelYear.val(""),this.$configurationURL.val(""),this.$transmission.val(""),this.$description.val(""),e.on("change",this.cfg.carlineSelector,l.proxy(this.changeCarline,this)).on("change",this.cfg.bodystyleSelector,l.proxy(this.changeBodystyle,this)),this.loadCarlineList()),this.sandbox.subscribe(this.id,this)},loadImagePicker:function(){function i(){var i=_toConsumableArray(s.querySelectorAll(r.cfg.imagePickerCarlineItem)).filter(function(e){return"true"===e.dataset.selected}).map(function(e){return Number(e.dataset.id)}),e=r.carlineList.filter(function(e,t){return 0===i.length||i.includes(t)}).reduce(function(e,t){return e.concat(t.bodystyles.map(function(e){return _objectSpread({},e,{carlineCode:t.code,carlineLabel:t.name})}))},[]);l.innerHTML=e.map(function(e,t){return cowp.util.compileTpl({name:e.description,id:t,carlineCode:e.carlineCode,carlineLabel:e.carlineLabel,code:e.code,image:e.image},r.cfg.imagePickerBodystyleTemplate)}).join("")}var r=this,a=this.$imagePickerCarline[0],s=a.querySelector(this.cfg.imagePickerCarlineContainer),o=a.querySelector(this.cfg.imagePickerInput),e=a.querySelector(this.cfg.imagePickerScrollPrev),t=a.querySelector(this.cfg.imagePickerScrollNext),n=this.$imagePickerBodystyle[0],l=n.querySelector(this.cfg.imagePickerBodystyleContainer),c=n.querySelector(this.cfg.imagePickerInput);s.addEventListener("click",function(e){var t=e.target.closest(r.cfg.imagePickerCarlineItem);"true"===t.dataset.selected?(t.classList.remove(r.cfg.imagePickerCarlineSelected),t.dataset.selected="",s.querySelector("".concat(r.cfg.imagePickerCarlineItem,'[data-id="all"]')).classList.add(r.cfg.imagePickerCarlineSelected)):(_toConsumableArray(s.querySelectorAll(".".concat(r.cfg.imagePickerCarlineSelected))).forEach(function(e){e.classList.remove(r.cfg.imagePickerCarlineSelected),e.dataset.selected=""}),t.classList.add(r.cfg.imagePickerCarlineSelected),"all"!==t.dataset.id&&(t.dataset.selected="true"));i()}),l.addEventListener("click",function(e){var t=e.target.closest(r.cfg.imagePickerBodystyleItem),i=t.dataset.carlineCode,a=t.dataset.carlineLabel,s=t.dataset.code,n=t.dataset.label;_toConsumableArray(l.querySelectorAll(".".concat(r.cfg.imagePickerBodystyleSelected))).forEach(function(e){e.classList.remove(r.cfg.imagePickerBodystyleSelected)}),t.classList.add(r.cfg.imagePickerBodystyleSelected),r.buildParams(i,s),o.innerHTML='<option selected value="'.concat(i,'">').concat(a,"</option>"),c.innerHTML='<option selected value="'.concat(s,'">').concat(n,"</option>")});function d(){return Math.max(s.offsetWidth-a.offsetWidth,0)}function h(){return Number(s.dataset.scroll||"0")}function g(){var e=d(),t=h();a.style.setProperty("--visibilityPrev","".concat(0<t?"visible":"hidden")),a.style.setProperty("--visibilityNext","".concat(t<e?"visible":"hidden"))}function u(e){var t=d(),i=h(),a=Math.min(Math.max(i+e,0),t);s.dataset.scroll="".concat(a),s.style.setProperty("--scroll-offset","-".concat(a,"px")),g()}var f,p;e.addEventListener("click",function(e){u(-r.cfg.imagePickerScrollStep)}),t.addEventListener("click",function(e){u(r.cfg.imagePickerScrollStep)}),f=r.carlineList.map(function(e,t){return cowp.util.compileTpl({name:e.name,id:t,code:e.code},r.cfg.imagePickerCarlineTemplate)}),p=cowp.util.compileTpl({name:r.allLabel,id:"all",code:""},r.cfg.imagePickerCarlineTemplate),s.innerHTML="".concat(p," ").concat(f.join("")),s.querySelector("".concat(r.cfg.imagePickerCarlineItem,'[data-id="all"]')).classList.add(r.cfg.imagePickerCarlineSelected),i(),g()},loadNGVCInfo:function(){var t=this;l.ajax({type:"GET",dataType:"json",url:this.xNgvcConfig}).done(function(e){t.addNGVCOptionsToDropdowns(e),t.updateCarlineDetails(e),t.updatePriceData(e),t.updateVehicleImage(e),t.useGfWltp?t.buildParams():t.updateCo2NoWltp(e)})},updateCo2NoWltp:function(e){this.updateCo2Data(e),this.$carlineDetails.show(),this.$co2Stats.show(),this.$co2Chart.show(),this.$co2Image.show(),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},wltpCallback:function(e){this.toggleWltpError(!0),this.updateCo2DataWltp(e),this.$carlineDetails.show(),this.$co2Stats.show(),this.$co2Chart.show(),this.$co2Image.show(),this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},wltpErrorCallback:function(){this.toggleWltpError(!1)},toggleWltpError:function(e){this.$co2Wrapper.toggle(e),this.$gfError.toggle(!e)},updateCo2Wltp:function(e){var t=cowp.util.getWltpDataUrl("?".concat(e));cowp.util.getWltpData(t,l.proxy(this.wltpCallback,this),l.proxy(this.wltpErrorCallback,this))},buildParams:function(e,t){var i,a=!!(this.mpvCode&&this.dataBrand&&this.dataCountry&&this.dataLanguage&&this.$modelYear.length&&this.dataGfWidgetId&&this.exteriorColor),s=!!((e||this.$carlineId.length)&&this.dataCountry&&this.dataLanguage&&this.$modelYear.length&&this.dataGfWidgetId);(a||s)&&(i="",this.dataCountry&&(i+="country=".concat(this.dataCountry)),this.dataLanguage&&(i+="&language=".concat(this.dataLanguage)),this.$modelYear.length&&(i+="&modelYear=".concat(this.$modelYear.val())),e?i+="&carline=".concat(e):this.$carlineId.length&&(i+="&carline=".concat(this.$carlineId.val())),this.dataChannel&&(i+="&channel=".concat(this.dataChannel)),this.dataGfWidgetId&&(i+="&widgetId=".concat(this.dataGfWidgetId)),this.dataAppId&&(i+="&appId=".concat(this.dataAppId)),t&&(i+="&bodyStyle=".concat(t)),this.mpvCode&&(i+="&mpv=".concat(this.mpvCode)),this.updateCo2Wltp(i))},addNGVCOptionsToDropdowns:function(e){e&&(e.carline&&e.carlineLabel&&this.$carlineId.append('<option value="'.concat(e.carline,'">').concat(e.carlineLabel,"</option>")).val(e.carline),e.bodystyle&&e.bodystyleLabel&&this.$bodystyleId.append('<option value="'.concat(e.bodystyle,'">').concat(e.bodystyleLabel,"</option>")).val(e.bodystyle),e.modelyear&&this.$modelYear.val(e.modelyear),e.configurationURL&&this.$configurationURL.val(e.configurationURL),e.transmission&&this.$transmission.val(e.transmission),e.description&&this.$description.val(e.description),e.configID&&this.$configID.val(e.configID))},toggleCo2Details:function(e){this.$co2Stats1.toggle(e),this.$co2StatsLabel1.toggle(e),this.$co2Headline.toggle(e),this.$co2Chart.toggle(e),this.$co2Image.toggle(e),this.$co2Disclaimer.toggle(e),this.$co2Description.toggle(e)},resetHTML:function(){this.selectedBodystyle="",this.selectedCarline="",this.selectedSeries="",this.selectedPackage="",this.$description.val(""),this.$carlineHeadline.html(""),this.$carlinePricingLabel2.html(""),this.$carlinePricing2.html(""),this.$carlinePricingLabel3.html(""),this.$carlinePricing3.html(""),this.$bodystyleHeadline.html(""),this.toggleCo2Details(!1)},changeCarline:function(e){var i=this;e.preventDefault(),this.resetHTML();var t,a=l(e.currentTarget).find(":selected"),s=a.data("co-two-image"),n=a.data("segment");this.selectedCarline=this.carlineList.find(function(e){return e.featureId===a.data("carline-id")}),this.$carlineDetails.show();if(n&&this.$segment.val({VU:"truck",LCV_CARLINE:"truck",VP:"passenger",CAR_CARLINE:"passenger"}[n]),this.fire("gmitGfCarlineSelected",[this.id]),s&&!this.useGfWltp&&this.$co2Image.attr("src",s),this.useGfWltp||this.$co2Stats.show(),this.$bodystyleId.find("option").remove().end().append('<option value="">'.concat(this.bodyStyleOptionTxt,"</option>")).val(""),this.selectedCarline){this.carlineFeatureId=encodeURI(a.data("carline-id")),this.selectedModelYear=this.selectedCarline.modelYear,this.setModelYearHiddenField(this.carlineFeatureId),this.$carlineHeadline.html(this.selectedCarline.name);var r=this.selectedCarline.bodystyles;r.sort(function(e,t){return e.bodystyleName.localeCompare(t.bodystyleName)}),c.each(r,function(e){var t='<option data-bodystyle-id="'.concat(e.featureId,'" value="').concat(e.id,'">').concat(e.bodystyleName,"</option>");void 0!==e.code&&void 0!==e.featureId&&i.$bodystyleId.append(t)}),this.xBodyStyle?(this.$bodystyleId.val(this.xBodyStyle),this.$bodystyleId.change(),this.xBodyStyle=null):2<=this.$bodystyleId.find("option").length&&(t=this.$bodystyleId.find("option")[1])&&(this.$bodystyleId.val(t.value),this.$bodystyleId.change()),this.$carlineImage.attr("src",this.selectedCarline.imagePath),this.$carlineImage.attr("alt",this.selectedCarline.name),this.$carlinePricingLabel2.html(this.priceLabel),this.$carlinePricing2.html(this.selectedCarline.formattedPrice),this.$carlinePricingLabel3.html(this.netPriceLabel),this.$carlinePricing3.html(this.selectedCarline.formattedPriceNet),this.$configurationString.val(""),this.useGfWltp&&(this.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},this.cfg.co2StatsTableRow)),1===this.$dropdownSelector.length&&this.buildParams(this.$carlineId.val()))}else this.$carlineImage.attr("src",this.carlineImageData);this.fire("gmitGfUpdateVehicle",this.thankYouVehicle,[this.id])},changeBodystyle:function(e){e.preventDefault(),this.selectedSeries="",this.selectedPackage="";var t=l(e.currentTarget).find(":selected"),i=t.data("co-two-image");t.val();i&&!this.useGfWltp&&this.$co2Image.attr("src",i),this.selectedBodystyle=this.selectedCarline.bodystyles.find(function(e){return e.featureId===t.data("bodystyle-id")}),this.selectedBodystyle?(this.$bodystyleHeadline.html(this.selectedBodystyle.bodystyleName),this.toggleCo2Details(!1),this.$configurationString.val(""),this.$carlinePricingLabel2.html(this.priceLabel),this.$carlinePricing2.html(this.selectedBodystyle.formattedPrice),this.$carlinePricingLabel3.html(this.netPriceLabel),this.$carlinePricing3.html(this.selectedBodystyle.formattedPriceNet),this.$carlineImage.attr("src",this.selectedBodystyle.image),this.$carlineImage.attr("alt",this.selectedBodystyle.name),this.$description.val(this.selectedBodystyle.description),this.useGfWltp&&(this.$co2StatsTable.html(cowp.util.compileTpl({labelIndex:1,label:"",formattedVal:"",formattedUnit:""},this.cfg.co2StatsTableRow)),2===this.$dropdownSelector.length&&this.buildParams(this.$carlineId.val(),this.$bodystyleId.val()))):(this.$bodystyleHeadline.html(""),this.$co2Image.hide())},loadCarlineList:function(){var o=this;this.$carlineImage.attr("src",this.carlineImageData),this.$carlineId.find(":selected").text(this.carlineOptionTxt),this.$bodystyleId.find(":selected").text(this.bodyStyleOptionTxt);var e=cowp.util.gf.filter(this.xCarlineFilters,"id",this.carlineList);c.each(e,function(e){var t=e.code,i=e.id,a=e.featureId,s=e.featureGroup,n=l("<option></option>");n.attr("value",i),n.attr("data-carline-code",t),n.attr("data-carline-id",a),n.attr("data-segment",s),n.text(e.name),i&&void 0!==a&&o.$carlineId.append(n),i===o.xCarline&&l.each(e.bodystyles,function(e,t){o.$bodystyleId.append('<option value="'.concat(t.id,'" data-bodystyle-id="').concat(t.featureId,'">').concat(t.bodystyleName,"</option>")),o.$carlineId.val(o.xCarline),o.$bodystyleId.val(o.xBodyStyle)})}),this.$carlineId.change();var t=this.$carlineId.find("option");this.xCarline&&this.xModelYear?(t.each(function(e,t){var i=l(t),a=i.data("carlineId")||"",s=a?a.split(";"):"",n=s&&(s[0]||""),r=s&&(s[1]||"");return!(0<=n.indexOf(o.xCarline)&&0<=r.indexOf(o.xModelYear))||(i.prop("selected",!0),!1)}),this.$carlineId.change()):2===t.length&&t[1]&&(this.$carlineId.val(t[1].value),this.$carlineId.change())},checkForNGVC:function(){var i=this,e=document.location.search.replace("?",""),t="",a="",s=!1,n="";return e&&(t=e.split("&"),c.each(t,function(e){a=e.split("=");var t=_slicedToArray(a,1);(n=t[0])&&("x-ngBackLinkURL"===n?(i.xNgvcConfig=decodeURIComponent(a[1]),i.xNgvcConfig=i.xNgvcConfig?i.xNgvcConfig.replace("http:","").replace("https:","").replace(":80","").replace(":443",""):"",s=!0):"agencyrolecode"===n&&i.$agencyRoleCode.val(a[1]))})),this.xNgvcConfig?s:(this.xCarline=cowp.util.gf.loadQueryString("x-carline"),this.xModelYear=cowp.util.gf.loadQueryString("x-modelyear"),this.xBodyStyle=cowp.util.gf.loadQueryString("x-bodystyle"),!1)},addToCommentField:function(e,t){var i=this.$commentID.val();this.$commentID.val("".concat(i,"| ").concat(t,": ").concat(e))},updateCarlineDetails:function(e){e&&(e.carlineLabel&&this.$carlineHeadline.html(e.carlineLabel),e.bodystyleLabel&&this.$bodystyleHeadline.html(e.bodystyleLabel),e.formattedMonthlyRate&&this.addToCommentField(e.formattedMonthlyRate,"formattedMonthlyRate"),e.formattedLeaseTerm&&this.addToCommentField(e.formattedLeaseTerm,"formattedLeaseTerm"),e.formattedLeaseMileage&&this.addToCommentField(e.formattedLeaseMileage,"formattedLeaseMileage"),e.formattedPrivateOffer&&this.addToCommentField(e.formattedPrivateOffer,"formattedPrivateOffer"),e.formattedDownpayment&&this.addToCommentField(e.formattedDownpayment,"formattedDownpayment"),e.leaseTitle&&this.addToCommentField(e.leaseTitle,"leaseTitle"))},updatePriceData:function(e){e&&e.prices&&(e.prices[0].label&&this.$carlinePricingLabel1.html(e.prices[0].label),e.prices[0].value&&this.$carlinePricing1.html(e.prices[0].value),e.prices[1].label&&this.$carlinePricingLabel2.html(e.prices[1].label),e.prices[1].value&&this.$carlinePricing2.html(e.prices[1].value),e.prices[2].label&&this.$carlinePricingLabel3.html(e.prices[2].label),e.prices[2].value&&this.$carlinePricing3.html(e.prices[2].value))},updateVehicleImage:function(e){e&&e.vehicleImageURL&&this.$carlineImage.attr("src",e.vehicleImageURL)},updateCo2Data:function(e){e&&e.feature?(e.feature.emissionCombinedLabel&&this.$co2StatsLabel3.html(e.feature.emissionCombinedLabel),e.feature.emissionCombinedValue&&this.$co2Stats3.html(e.feature.emissionCombinedValue),e.feature.fuelCombinedLabel&&this.$co2StatsLabel2.html(e.feature.fuelCombinedLabel),e.feature.fuelCombinedValue&&this.$co2Stats2.html(e.feature.fuelCombinedValue),e.feature.emissionLabelClassLabel&&this.$co2Headline.html(e.feature.emissionLabelClassLabel),e.feature.emissionLabelClassDisclaimer&&this.$co2Disclaimer.html(e.feature.emissionLabelClassDisclaimer)):e&&e.energyLabel&&(e.energyLabel.title&&this.$co2Headline.html(e.energyLabel.title),e.energyLabel.header&&this.$co2Disclaimer.html(e.energyLabel.header),e.energyLabel.classLabel&&this.$co2StatsLabel1.html(e.energyLabel.classLabel),e.energyLabel.classValue&&this.$co2Stats1.html(e.energyLabel.classValue),e.energyLabel.consumptionLabel&&this.$co2StatsLabel2.html(e.energyLabel.consumptionLabel),e.energyLabel.consumptionValue&&this.$co2Stats2.html(e.energyLabel.consumptionValue),e.energyLabel.co2EmissionLabel&&this.$co2StatsLabel3.html(e.energyLabel.co2EmissionLabel),e.energyLabel.co2EmissionValue&&this.$co2Stats3.html(e.energyLabel.co2EmissionValue),e.energyLabel.imageUrl1&&this.$co2Image.attr("src",e.energyLabel.imageUrl1))},updateCo2DataWltp:function(e){l.proxy(this.buildStatsTable(e),this)},buildStatsTable:function(e){function t(e){e?n.$co2Image.attr("src",e):n.$co2Image.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7")}var i,a,s,n=this,r=e[0];if(r){switch(c.get(r,"legalDisclaimer")&&this.$co2Disclaimer.text(r.legalDisclaimer),r.energyLabelView){case"1":case"2":case"3":t(c.get(r,"efficiencyLabels.maxEnergyLabelUrl"));break;case"4":t(c.get(r,"efficiencyLabels.maxEnergyLabelSmallUrl"));break;default:t("")}c.get(r,"lines")&&r.lines.forEach(function(e,t){(i=e.valueUnitPairs)&&(a=cowp.util.formatWltpUnits(i),s=cowp.util.formatWltpValues(i)),n.$co2StatsTable.append(cowp.util.compileTpl({labelIndex:t+2,label:e.emissionAttributeLabel,formattedVal:s,formattedUnit:a},n.cfg.co2StatsTableRow))})}},setModelYearHiddenField:function(e){var t=this,i=e.split(";"),a="";c.each(i,function(e){"modelyear"===(a=e.split(":"))[0]&&t.$modelYear.val(a[1])})},onBroadcastWindowResize:function(){cowp.util.isWindowSize("xlarge")?0<this.$carlineObj.length&&0===this.$co2Wrapper.length?this.$carlineDetails.detach().appendTo(this.cfg.noCo2Wrapper):0<this.$carlineObj.length&&this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector):cowp.util.isWindowSize("large")?0<this.$carlineObj.length&&0===this.$co2Wrapper.length?this.$carlineDetails.detach().appendTo(this.$carlineObj):0<this.$carlineObj.length&&this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector):cowp.util.isWindowSize("medium")?this.$carlineDetails.detach().appendTo(this.$carlineObj):this.$carlineDetails.detach().appendTo(this.cfg.carlineWrapperSelector)},onBroadcastWindowScroll:function(){}})}(cowp.$,cowp._);